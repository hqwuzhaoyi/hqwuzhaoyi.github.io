<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>React DDD | Prajna's blog</title><meta name="keywords" content="React,DDD"><meta name="author" content="Wu Zhaoyi,hqwuzhaoyi@foxmail.com"><meta name="copyright" content="Wu Zhaoyi"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="è½¬è½½è‡ªå‰ç«¯å¤‡å¿˜å½•-æ±Ÿæ¹–æœ¯å£«  é¢†åŸŸé©±åŠ¨ï¼Œå„è‡ªåªç®¡å„è‡ªçš„æ¨¡å—ï¼Œé¡¶å±‚å†æ¥è¿›è¡Œç»„è£…å’Œåˆ†é… åšæŒæ ¹æ®ç‰¹æ€§åŒºå‘½åç›®å½•ã€‚  åšæŒä¸ºæ¯ä¸ªç‰¹æ€§åŒºåˆ›å»ºä¸€ä¸ª NgModuleã€‚ èƒ½æä¾›é™ç•Œä¸Šä¸‹æ–‡ï¼Œå°†æŸäº›åŠŸèƒ½ç‰¢ç‰¢åœ°é”åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œå¼€å‘æŸä¸ªåŠŸèƒ½æ—¶ï¼Œåªéœ€è¦å…³å¿ƒè¿™ä¸ªæ¨¡å—å°±å¤Ÿäº†ã€‚   è§†å›¾çš„å½’è¯•å›¾ï¼Œé€»è¾‘çš„å½’é€»è¾‘1234function SomeComponent() &amp;#123;  const someService &#x3D; use">
<meta property="og:type" content="article">
<meta property="og:title" content="React DDD">
<meta property="og:url" content="https://hqwuzhaoyi.github.io/2021/01/14/react%20ddd/74.HookDDD/index.html">
<meta property="og:site_name" content="Prajna&#39;s blog">
<meta property="og:description" content="è½¬è½½è‡ªå‰ç«¯å¤‡å¿˜å½•-æ±Ÿæ¹–æœ¯å£«  é¢†åŸŸé©±åŠ¨ï¼Œå„è‡ªåªç®¡å„è‡ªçš„æ¨¡å—ï¼Œé¡¶å±‚å†æ¥è¿›è¡Œç»„è£…å’Œåˆ†é… åšæŒæ ¹æ®ç‰¹æ€§åŒºå‘½åç›®å½•ã€‚  åšæŒä¸ºæ¯ä¸ªç‰¹æ€§åŒºåˆ›å»ºä¸€ä¸ª NgModuleã€‚ èƒ½æä¾›é™ç•Œä¸Šä¸‹æ–‡ï¼Œå°†æŸäº›åŠŸèƒ½ç‰¢ç‰¢åœ°é”åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œå¼€å‘æŸä¸ªåŠŸèƒ½æ—¶ï¼Œåªéœ€è¦å…³å¿ƒè¿™ä¸ªæ¨¡å—å°±å¤Ÿäº†ã€‚   è§†å›¾çš„å½’è¯•å›¾ï¼Œé€»è¾‘çš„å½’é€»è¾‘1234function SomeComponent() &amp;#123;  const someService &#x3D; use">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://wuzhaoyi-xyz.oss-cn-beijing.aliyuncs.com/git20210114112348.png">
<meta property="article:published_time" content="2021-01-14T00:00:00.000Z">
<meta property="article:modified_time" content="2022-08-29T03:13:16.652Z">
<meta property="article:author" content="Wu Zhaoyi">
<meta property="article:tag" content="React">
<meta property="article:tag" content="DDD">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://wuzhaoyi-xyz.oss-cn-beijing.aliyuncs.com/git20210114112348.png"><link rel="shortcut icon" href="https://wuzhaoyi-xyz.oss-cn-beijing.aliyuncs.com/favicon.ico?versionId=CAEQIBiBgICUj6fpxhciIGVlZDJjMTcyMGRkMjQ0MGViNDIyOWEyNDdkOGI5YjQ5"><link rel="canonical" href="https://hqwuzhaoyi.github.io/2021/01/14/react%20ddd/74.HookDDD/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.5/dist/instantsearch.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.5/dist/instantsearch.min.js" defer></script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?4af216cebbf1ef8bfe277df5447157c1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: {"appId":"LPQ2BDF707","apiKey":"b955341b8b62ac31533e2e1ff3aa5fd0","indexName":"wzy","hits":{"per_page":6},"languages":{"input_placeholder":"æœç´¢æ–‡ç« ","hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}","hits_stats":"æ‰¾åˆ° ${hits} æ¡ç»“æœï¼Œç”¨æ—¶ ${time} æ¯«ç§’"}},
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-08-29 03:13:16'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    })(window)</script><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="Prajna's blog" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="https://wuzhaoyi-xyz.oss-cn-beijing.aliyuncs.com/git20210416184339.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">123</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">48</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">12</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://wuzhaoyi-xyz.oss-cn-beijing.aliyuncs.com/git20210114112348.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Prajna's blog</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> æœç´¢</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">React DDD</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2021-01-14T00:00:00.000Z" title="å‘è¡¨äº 2021-01-14 00:00:00">2021-01-14</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2022-08-29T03:13:16.652Z" title="æ›´æ–°äº 2022-08-29 03:13:16">2022-08-29</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/react-ddd/">react ddd</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">13.9k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>45åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="React DDD"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>è½¬è½½è‡ª<a target="_blank" rel="noopener" href="https://www.zhihu.com/column/plightfield">å‰ç«¯å¤‡å¿˜å½•-æ±Ÿæ¹–æœ¯å£«</a></p>
<hr>
<h1 id="é¢†åŸŸé©±åŠ¨ï¼Œå„è‡ªåªç®¡å„è‡ªçš„æ¨¡å—ï¼Œé¡¶å±‚å†æ¥è¿›è¡Œç»„è£…å’Œåˆ†é…"><a href="#é¢†åŸŸé©±åŠ¨ï¼Œå„è‡ªåªç®¡å„è‡ªçš„æ¨¡å—ï¼Œé¡¶å±‚å†æ¥è¿›è¡Œç»„è£…å’Œåˆ†é…" class="headerlink" title="é¢†åŸŸé©±åŠ¨ï¼Œå„è‡ªåªç®¡å„è‡ªçš„æ¨¡å—ï¼Œé¡¶å±‚å†æ¥è¿›è¡Œç»„è£…å’Œåˆ†é…"></a>é¢†åŸŸé©±åŠ¨ï¼Œå„è‡ªåªç®¡å„è‡ªçš„æ¨¡å—ï¼Œé¡¶å±‚å†æ¥è¿›è¡Œç»„è£…å’Œåˆ†é…</h1><ul>
<li><p>åšæŒæ ¹æ®ç‰¹æ€§åŒºå‘½åç›®å½•ã€‚</p>
</li>
<li><p>åšæŒä¸ºæ¯ä¸ªç‰¹æ€§åŒºåˆ›å»ºä¸€ä¸ª NgModuleã€‚</p>
<p>èƒ½æä¾›é™ç•Œä¸Šä¸‹æ–‡ï¼Œå°†æŸäº›åŠŸèƒ½ç‰¢ç‰¢åœ°é”åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œå¼€å‘æŸä¸ªåŠŸèƒ½æ—¶ï¼Œåªéœ€è¦å…³å¿ƒè¿™ä¸ªæ¨¡å—å°±å¤Ÿäº†ã€‚</p>
</li>
</ul>
<h2 id="è§†å›¾çš„å½’è¯•å›¾ï¼Œé€»è¾‘çš„å½’é€»è¾‘"><a href="#è§†å›¾çš„å½’è¯•å›¾ï¼Œé€»è¾‘çš„å½’é€»è¾‘" class="headerlink" title="è§†å›¾çš„å½’è¯•å›¾ï¼Œé€»è¾‘çš„å½’é€»è¾‘"></a>è§†å›¾çš„å½’è¯•å›¾ï¼Œé€»è¾‘çš„å½’é€»è¾‘</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SomeComponent</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> someService = useService();</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;someService.state&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="è·¨ç»„ä»¶æ•°æ®ä¼ é€’ï¼Ÿ"><a href="#è·¨ç»„ä»¶æ•°æ®ä¼ é€’ï¼Ÿ" class="headerlink" title="è·¨ç»„ä»¶æ•°æ®ä¼ é€’ï¼Ÿ"></a>è·¨ç»„ä»¶æ•°æ®ä¼ é€’ï¼Ÿ</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useGlobalService</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123; <span class="attr">state</span>: <span class="string">&quot;&quot;</span> &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> GlobalService = createContext(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SomeComponent</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;GlobalService.Provider value=&#123;useGlobalService()&#125;&gt;&lt;/GlobalService.Provider&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useSomeService</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> globalService = useContext(GlobalService);</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;globalService.state&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šä¸‹æ–‡æ³¨å…¥èŠ‚ç‚¹ï¼Œæœ¬èº«å°±æ˜¯æŒ‰ç…§è¯•å›¾æ¥çš„</p>
<h2 id="å‡½æ•°-DDD"><a href="#å‡½æ•°-DDD" class="headerlink" title="å‡½æ•° DDD"></a>å‡½æ•° DDD</h2><p>åªç”¨å‡½æ•°å®ç° DDDï¼Œå®ƒæœ‰å¤šä¼˜ç¾</p>
<p>æˆ‘ä»¬å…ˆæ¯”è¾ƒä¸€ä¸‹è¿™ä¸¤ç§å†™æ³•ï¼Œå¯¹äºä¸€ä¸ªç±»:</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomeClass</span> </span>&#123;</span><br><span class="line">  name:string,</span><br><span class="line">  password:string,</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">name,password</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name</span><br><span class="line">    <span class="built_in">this</span>.password = password</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> initValue = &#123; <span class="attr">name</span>: <span class="string">&quot;&quot;</span>, <span class="attr">password</span>: <span class="string">&quot;&quot;</span> &#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useClass</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [state, setState] = useState(initValue);</span><br><span class="line">  <span class="keyword">return</span> &#123; state, setState &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸‹é¢çš„è‡ªå¸¦å“åº”å¼ï¼Œgetterï¼Œsetter ä¹Ÿè‡ªåŠ¨ç»™å‡ºäº†ï¼ŒåŒæ—¶ä½¿ç”¨äº†å·¥å‚æ¨¡å¼ï¼Œä¸éœ€è¦äº†è§£å‡½æ•°å†…éƒ¨çš„é€»è¾‘ã€‚</p>
<h2 id="ç”Ÿå‘½å‘¨æœŸå¤ç”¨"><a href="#ç”Ÿå‘½å‘¨æœŸå¤ç”¨" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸå¤ç”¨"></a>ç”Ÿå‘½å‘¨æœŸå¤ç”¨</h2><p>æ¯ä¸ª useFunc éƒ½æ˜¯ æ‹†æ‰ çš„ç®¡é“å‡½æ•°ï¼Œæ¡†æ¶å¸®ä½ ç»„è£…ï¼Œç®€ç›´å°±æ˜¯ä¸€æ­¥åˆ°ä½ï¼</p>
<h2 id="æ•ˆç‡"><a href="#æ•ˆç‡" class="headerlink" title="æ•ˆç‡"></a>æ•ˆç‡</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useSomeService</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [form] = useForm()</span><br><span class="line">  <span class="keyword">const</span> request = useRequest()</span><br><span class="line">  <span class="keyword">const</span> model = useModel()</span><br><span class="line">  useEffect(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    form.onFieldsChange = <span class="function">()=&gt;</span>&#123;</span><br><span class="line">       request.run(form.getFieldsValue)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,[form])</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    model,</span><br><span class="line">    form</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;Form form=&#123;someService.form&#125;&gt;</span><br><span class="line">   &lt;Form.Item name=<span class="string">&quot;xxx&quot;</span> label=<span class="string">&quot;xxx&quot;</span>&gt;</span><br><span class="line">      &lt;!-- æ²¡ä½ serviceå•¥äº‹äº†ï¼åˆ«çœ‹ï¼è¿™é‡Œæ˜¯çº¯è§†å›¾ --&gt;</span><br><span class="line">  &lt;/Form.Item&gt;</span><br><span class="line">&lt;/Form&gt;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªè¡¨å•æœåŠ¡ä½ æƒ³è¦åœ¨å“ªæ§åˆ¶ï¼Ÿ</p>
<p>æƒ³è¦å¤šä¸ªç»„ä»¶åŒæ—¶æ§åˆ¶ï¼Ÿ</p>
<p>åŠ ä¸ª tokenï¼Œä¹Ÿå°±æ˜¯ createContextï¼ŒæŠŠä¾èµ–æä¸Šå»ï¼</p>
<p>ä»–ç‰¹ä¹ˆè‡ªç„¶äº†ï¼</p>
<hr>
<h1 id="React-Hooks-ç‰ˆæœ¬æ¶æ„"><a href="#React-Hooks-ç‰ˆæœ¬æ¶æ„" class="headerlink" title="React Hooks ç‰ˆæœ¬æ¶æ„"></a>React Hooks ç‰ˆæœ¬æ¶æ„</h1><h2 id="æ‰§è¡Œ-LIFT-åŸåˆ™"><a href="#æ‰§è¡Œ-LIFT-åŸåˆ™" class="headerlink" title="æ‰§è¡Œ LIFT åŸåˆ™"></a>æ‰§è¡Œ LIFT åŸåˆ™</h2><ul>
<li><p>é¡¶å±‚æ–‡ä»¶å¤¹æœ€å¤šåŒ…å«ï¼šassetsï¼Œpagesï¼Œlayoutsï¼Œapp å››ä¸ªï¼ˆå…¶ä¸­ pagesï¼Œlayouts æ˜¯ä¸ºäº†ç…§é¡¾æŸäº› ssr å¼€å‘æ ˆï¼‰ï¼Œåå­—å¯ä»¥å˜æ›´ï¼Œä½†æ˜¯ä¸å¯ä»¥æœ‰å¤šä½™æ–‡ä»¶å¤¹ï¼Œæ¿€è¿›çš„è¯å¯ä»¥åªæœ‰ä¸€ä¸ª app æ–‡ä»¶å¤¹</p>
</li>
<li><p>æŒ‰åŠŸèƒ½åˆ’åˆ†æ–‡ä»¶å¤¹ï¼Œæ¯ä¸ªåŠŸèƒ½åªèƒ½åŒ…å«ä»¥ä¸‹å››ç§æ–‡ä»¶ï¼šXxx.less, Xxx.tsx, useXxx.tsï¼ŒuseXxx.spec.ts ,é‡‡ç”¨åµŒå¥—ç»“æ„ç»„ç»‡</p>
</li>
<li><p>ä¸€ä¸ªæ–‡ä»¶å¤¹åŒ…å«è¯¥é¢†åŸŸå†…æ‰€æœ‰é€»è¾‘ï¼ˆè§†å›¾ï¼Œæ ·å¼ï¼Œæµ‹è¯•ï¼ŒçŠ¶æ€ï¼Œæ¥å£ï¼‰ï¼Œç¦æ­¢å°†é€»è¾‘æ”¾ç½®äºæ–‡ä»¶å¤¹ä»¥å¤–</p>
</li>
<li><p>å¦‚æœéœ€è¦ç”±å…¶ä»–åŠŸèƒ½è°ƒç”¨ï¼Œåˆ©ç”¨ SOA åè½¬</p>
<p>ä¸ºä½•å¦‚æ­¤ï¼Ÿ</p>
</li>
<li><p>åŠŸèƒ½ç»“æ„å³æ–‡ä»¶ç»“æ„ï¼Œå¼€å‘äººå‘˜å¯ä»¥å¿«é€Ÿå®šä½ä»£ç ï¼Œæ‰«ä¸€çœ¼å°±èƒ½çŸ¥é“æ¯ä¸ªæ–‡ä»¶ä»£è¡¨ä»€ä¹ˆï¼Œç›®å½•å°½å¯èƒ½ä¿æŒæ‰å¹³ï¼Œæ—¢æ²¡æœ‰é‡å¤ä¹Ÿæ²¡æœ‰å¤šä½™çš„åå­—</p>
</li>
<li><p>å½“æœ‰å¾ˆå¤šæ–‡ä»¶æ—¶ï¼ˆä¾‹å¦‚ 10 ä¸ªä»¥ä¸Šï¼‰ï¼Œåœ¨ä¸“ç”¨ç›®å½•å‹ç»“æ„ä¸­å®šä½å®ƒä»¬ä¼šæ¯”åœ¨æ‰å¹³ç»“æ„ä¸­æ›´å®¹æ˜“</p>
</li>
<li><p>æƒ°æ€§åŠ è½½å¯è·¯ç”±çš„åŠŸèƒ½å˜å¾—æ›´å®¹æ˜“</p>
</li>
<li><p>éš”ç¦»ã€æµ‹è¯•å’Œå¤ç”¨ç‰¹æ€§æ›´å®¹æ˜“</p>
</li>
<li><p>ç®¡ç†ä¸Šï¼Œç›¸å…³é¢†åŸŸæ–‡ä»¶å¤¹å¯ä»¥åˆ†é…ç»™ä¸“äººï¼Œå¼€å‘æ•ˆç‡é«˜ï¼Œå¯è¿½è´£å’Œè®¡é‡å·¥ä½œé‡ï¼Œå¾ˆæ˜æ˜¾åº”è¯¥ç¦æ­¢å¤šäººåŒæ—¶æ“ä½œåŒä¸€å±‚çº§æ–‡ä»¶</p>
</li>
<li><p>åªéœ€è¦å¯¹ useXxx è¿›è¡Œæµ‹è¯•ï¼Œæµ‹è¯•å¤æ‚åº¦ï¼Œå·¥ä½œé‡éƒ½å¾ˆå°ï¼Œè§†å›¾æµ‹è¯•äº¤ç»™ e2e</p>
</li>
</ul>
<h2 id="åˆ©ç”¨-SOA-å®ç°è·¨ç»„ä»¶é€»è¾‘å¤ç”¨"><a href="#åˆ©ç”¨-SOA-å®ç°è·¨ç»„ä»¶é€»è¾‘å¤ç”¨" class="headerlink" title="åˆ©ç”¨ SOA å®ç°è·¨ç»„ä»¶é€»è¾‘å¤ç”¨"></a>åˆ©ç”¨ SOA å®ç°è·¨ç»„ä»¶é€»è¾‘å¤ç”¨</h2><p>åˆ©ç”¨ <code>æ³¨å…¥ä»¤ç‰Œ</code> + <code>æœåŠ¡å‡½æ•°</code> + <code>æ³¨å…¥ç‚¹</code>ï¼Œå®ç°çµæ´»çš„ SOA</p>
<p>å‘½åæ ¼å¼ä¸º</p>
<p><code>XxxService = useToken(useXxxService)</code></p>
<p><code>XxxService</code> ä¸ºæ³¨å…¥ä»¤ç‰Œ å’Œæ–‡ä»¶å</p>
<p><code>useXxxService</code> ä¸ºæœåŠ¡å‡½æ•°</p>
<p><code>&lt;XxxService.Provider value=&#123;useXxxService()&#125; /&gt;</code></p>
<p><code>XxxService.Provider</code> ä¸ºæ³¨å…¥ç‚¹</p>
<p>æ³¨å…¥ä»¤ç‰Œä¸æœåŠ¡å‡½æ•°ç´§æŒ¨</p>
<p>ä¸æ³¨å…¥èŠ‚ç‚¹å¤„äºåŒä¸€æ–‡ä»¶ç»“æ„å±‚çº§</p>
<p>ç¦æ­¢é™¤ SOA ä»¥å¤–çš„æ‰€æœ‰æ•°æ®æº</p>
<hr>
<p>ä¸ºä½•å¦‚æ­¤ï¼Ÿ</p>
<ul>
<li>ç¬¦åˆå•ä¸€æ•°æ®ï¼Œå•ä»¥èŒè´£ï¼Œæ¥å£éš”ç¦»åŸåˆ™</li>
<li>é€šè¿‡æ³›å‹çº¦æŸï¼Œå¯ä»¥æœ‰æ›´åŠ è‡ªç„¶çš„ Typescript ä½“éªŒï¼Œä¸éœ€è¦æ‰‹åŠ¨å£°æ˜æ³¨å…¥æ•°æ®ç±»å‹ï¼Œæ‰€æœ‰ç±»å‹å°†è‡ªåŠ¨è·å¾—</li>
<li>å±‚æ¬¡åŒ–æ³¨å…¥ï¼Œå¯ä»¥å®ç° DDDï¼Œå°†é€»è¾‘å…¨éƒ¨çº¦æŸä¸ä¸€å¤„ï¼Œæ–¹ä¾¿å›¢é˜Ÿåä½œ</li>
<li>å½“ä½ åœ¨æ ¹æ³¨å…¥å™¨ä¸Šæä¾›è¯¥æœåŠ¡æ—¶ï¼Œè¯¥æœåŠ¡å®ä¾‹åœ¨æ¯ä¸ªéœ€è¦è¯¥æœåŠ¡çš„ç»„ä»¶å’ŒæœåŠ¡ä¸­éƒ½æ˜¯å…±äº«çš„ã€‚å½“æœåŠ¡è¦å…±äº«æ–¹æ³•æˆ–çŠ¶æ€æ—¶ï¼Œè¿™æ˜¯æ•°å­¦æ„ä¹‰ä¸Šçš„æœ€ç†æƒ³çš„é€‰æ‹©ã€‚</li>
<li>é…åˆç»„ä»¶å’ŒåŠŸèƒ½åˆ’åˆ†ï¼Œå¯ä»¥æ–¹ä¾¿å¤„ç†åµŒå¥—ç»“æ„ï¼Œé˜²æ­¢å¯¹è±¡å¤åˆ¶è¢«æ»¥ç”¨ï¼Œç±»ä¼¼æ·±å¤åˆ¶ä¹‹ç±»çš„æ“ä½œåº”è¯¥ç¦æ­¢</li>
</ul>
<p>å®ç°ä¸€ä¸ª IOC æ³¨å…¥ä»¤ç‰Œçš„æ–¹æ³•ä¸º</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createContext &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ³›å‹çº¦æŸè·å–æ³¨å…¥ä»¤ç‰Œ</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@export</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@template <span class="variable">T</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;(...args: any[]) =&gt; T&#125;</span> <span class="variable">func</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;(T | undefined)&#125;</span> </span>[initialValue=undefined]</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">useToken</span>&lt;<span class="title">T</span>&gt;(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  func: (...args: any[]) =&gt; T,</span></span></span><br><span class="line"><span class="function"><span class="params">  initialValue: T | <span class="literal">undefined</span> = <span class="literal">undefined</span>,</span></span></span><br><span class="line"><span class="function"><span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> createContext(initialValue <span class="keyword">as</span> T);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸€ä¸ªå…¸å‹å¯æ³¨å†ŒæœåŠ¡ä¸ºï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> useToken <span class="keyword">from</span> <span class="string">&#x27;./useToken&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> AppService = useToken(useAppService);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">useAppService</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// å¯æ³¨å…¥å…¶ä»–æœåŠ¡ï¼Œä»¥åµŒå¥—</span></span><br><span class="line">  <span class="comment">// eq:</span></span><br><span class="line">  <span class="comment">// const someOtherService = useSomeOtherService(SomeOtherService)</span></span><br><span class="line">  <span class="keyword">const</span> [appName, setAppName] = useState(<span class="string">&#x27;appName&#x27;</span>);</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    appName,</span><br><span class="line">    setAppName,</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æœ€å°æƒé™-ğŸ¾"><a href="#æœ€å°æƒé™-ğŸ¾" class="headerlink" title="æœ€å°æƒé™ ğŸ¾"></a>æœ€å°æƒé™ ğŸ¾</h2><p>äººä¸ºä¿è¯ä»£ç ç»“æ„ç§ï¼Œå„ä¸ªç»„æˆä¹‹é—´çš„æœ€å°æƒé™ï¼Œæ˜¯ä¸€ä¸ªå¥½ä¹ æƒ¯</p>
<ul>
<li>æ‰€æœ‰å¤§å†™å­—æ¯å¼€å¤´çš„ tsx æ–‡ä»¶éƒ½æ˜¯ç»„ä»¶</li>
<li>æ‰€æœ‰ use å¼€å¤´çš„æ–‡ä»¶ï¼Œéƒ½æ˜¯æœåŠ¡ï¼Œå…¶ä¸­ï¼ŒuseXxxService æ˜¯å¯æ³¨å…¥æœåŠ¡ï¼Œé»˜è®¤å°†æ‰€æœ‰ç»„ä»¶é…å¥—çš„æœåŠ¡è®¾ç½®ä¸ºå¯æ³¨å…¥æœåŠ¡ï¼Œå¯ä»¥æ–¹ä¾¿è¿›è¡Œä¾èµ–ç®¡ç†</li>
<li>ç¦æ­¢åœ¨ç»„ä»¶å‡½æ•°ç§å‡ºç°ä»»ä½•éæœåŠ¡æ³¨å…¥ä»£ç ï¼Œç¦æ­¢åœ¨ç»„ä»¶ä¸­å†™å…¥ä¸è§†å›¾ä¸æƒ³å…³çš„</li>
<li>ä¸ºå¤æ‚ç»“æ„æ•°æ®å®šä¹‰ class</li>
<li>å¦‚æœå¯ä»¥çš„è¯ï¼Œå°†å•ä¾‹æœåŠ¡ç”±å…¨å±€ service ç»„ç»‡ï¼ŒåµŒå¥—ç»“æ„ï¼Œå…±äº«å®ä¾‹ï¼Œé¡µé¢åˆå§‹åŒ– é™¤å¤–</li>
<li>âŒ ç¦æ­¢æ·±å¤åˆ¶</li>
</ul>
<p>ä¸ºä½•å¦‚æ­¤ï¼Ÿ</p>
<ul>
<li>å½“é€»è¾‘è¢«æ”¾ç½®åˆ°æœåŠ¡é‡Œï¼Œå¹¶ä»¥å‡½æ•°çš„å½¢å¼æš´éœ²æ—¶ï¼Œå¯ä»¥è¢«å¤šä¸ªç»„ä»¶é‡å¤ä½¿ç”¨</li>
<li>åœ¨å•å…ƒæµ‹è¯•æ—¶ï¼ŒæœåŠ¡é‡Œçš„é€»è¾‘æ›´å®¹æ˜“è¢«éš”ç¦»ã€‚å½“ç»„ä»¶ä¸­è°ƒç”¨é€»è¾‘æ—¶ï¼Œä¹Ÿå¾ˆå®¹æ˜“è¢«æ¨¡æ‹Ÿ</li>
<li>ä»ç»„ä»¶ç§»é™¤ä¾èµ–å¹¶éšè—å®ç°ç»†èŠ‚</li>
<li>ä¿æŒç»„ä»¶è‹—æ¡ã€ç²¾ç®€å’Œèšç„¦</li>
<li>åˆ©ç”¨ class å¯ä»¥å‡å°‘åˆå§‹åŒ–å¤æ‚åº¦ï¼Œä»¥åŠå› æ­¤äº§ç”Ÿçš„ç±»å‹é—®é¢˜</li>
<li>å±€ç®¡ç†å•ä¾‹æœåŠ¡ï¼Œå¯ä»¥ä¸€æ­¥æ¶ˆç­å¾ªç¯ä¾èµ–é—®é¢˜ï¼ˆé“ç†åŒ Redux æ›¿ä»£ Fluxï¼‰</li>
<li>æ·±å¤åˆ¶æœ‰éå¸¸ä¸¥é‡çš„æ€§èƒ½é—®é¢˜ï¼Œä¸”å®¹æ˜“äº§ç”Ÿæ„å¤–å˜æ›´ï¼Œå°¤å…¶æ˜¯ useEffect è¯­å¢ƒä¸‹</li>
</ul>
<h2 id="JUST-USE-REACT-HOOKS"><a href="#JUST-USE-REACT-HOOKS" class="headerlink" title="JUST USE REACT HOOKS"></a>JUST USE REACT HOOKS</h2><p>æŠ›å¼ƒ class è¿™æ ·çš„ï¼Œthis æŒ‚è½½å˜æ›´çš„å†å²æ–¹æ¡ˆï¼Œä¸å¯å¤ç”¨ç»„ä»¶ä¼šæ±¡æŸ“æ•´ä¸ªé¡¹ç›®ï¼Œå¯¼è‡´é€»è¾‘æ— æ³•é›†ä¸­äºä¸€å¤„ï¼Œç”šè‡³å‡ºç°è€¦åˆï¼Œ LIFTï¼ŒSOAï¼ŒDDD ç­‰æ¶æ„æ— ä»è°ˆèµ·</p>
<h3 id="é¡¹ç›®åªå­˜åœ¨"><a href="#é¡¹ç›®åªå­˜åœ¨" class="headerlink" title="é¡¹ç›®åªå­˜åœ¨"></a>é¡¹ç›®åªå­˜åœ¨</h3><ul>
<li>å¤§å†™å¹¶ä¸æ–‡ä»¶åŒåçš„ç»„ä»¶ï¼Œä¸”å…¶ä¸­é™¤äº†æ³¨å…¥æœåŠ¡æ“ä½œå¤–ï¼Œreturn ä¹‹å‰ï¼Œæ— ä»»ä½•ä»£ç </li>
<li>use å¼€å¤´å¹¶ä¸æ–‡ä»¶å¤¹åŒåçš„æœåŠ¡</li>
<li>use å¼€å¤´ï¼ŒService ç»“å°¾ï¼Œå¹¶ä¸æ–‡ä»¶å¤¹åŒåçš„å¯æ³¨å…¥æœåŠ¡</li>
<li>æœåŠ¡ä¸­åªå­˜åœ¨ åŸºç¡€ hooksï¼Œè‡ªå®šä¹‰ hooksï¼Œç¬¬ä¸‰æ–¹ hooksï¼Œé™æ€æ•°æ®ï¼Œå·¥å…·å‡½æ•°ï¼Œå·¥å…·ç±»</li>
</ul>
<h3 id="ä»¥ä¸‹ä¸ºç»†åŒ–é˜è¿°ä¸ºä½•å¦‚æ­¤è®¾è®¡çš„å‡ºå‘ç‚¹"><a href="#ä»¥ä¸‹ä¸ºç»†åŒ–é˜è¿°ä¸ºä½•å¦‚æ­¤è®¾è®¡çš„å‡ºå‘ç‚¹" class="headerlink" title="ä»¥ä¸‹ä¸ºç»†åŒ–é˜è¿°ä¸ºä½•å¦‚æ­¤è®¾è®¡çš„å‡ºå‘ç‚¹"></a>ä»¥ä¸‹ä¸ºç»†åŒ–é˜è¿°ä¸ºä½•å¦‚æ­¤è®¾è®¡çš„å‡ºå‘ç‚¹</h3><ul>
<li>å¿«é€Ÿå®šä½ <code>Locate</code></li>
<li>ä¸€çœ¼è¯†åˆ« <code>Identify</code></li>
<li>å°½é‡ä¿æŒæ‰å¹³ç»“æ„ (Flattest)</li>
<li>å°è¯• <code>Try</code> éµå¾ª <code>DRY</code> (<code>Do Not Repeat Yourself</code>, ä¸é‡å¤è‡ªå·±)</li>
</ul>
<p>æ­¤ä¸º LIFT åŸåˆ™</p>
<ul>
<li>ä¼˜å…ˆå°†ç»„ä»¶è§†ä¸ºå…ƒç´ ï¼Œè€Œå¹¶éåŠŸèƒ½é€»è¾‘å•ä½ï¼ˆè§†å›¾çš„å½’è§†å›¾ï¼Œä¸šåŠ¡çš„å½’ä¸šåŠ¡ï¼‰</li>
<li>éš”ç¦»åŸåˆ™ï¼ˆå±äºä¸€ä¸ªæˆå‘˜çš„å·¥ä½œï¼Œå¿…å®šå±äºè¯¥æˆå‘˜è´Ÿè´£çš„æ–‡ä»¶å¤¹ï¼Œä¹Ÿåªèƒ½å±äºè¯¥æˆå‘˜è´Ÿè´£çš„æ–‡ä»¶å¤¹ï¼‰</li>
<li>æœ€å°ä¾èµ–ï¼ˆç¦æ­¢ä¸å¿…è¦çš„å·¥å…·ä½¿ç”¨ï¼Œæ¯”å¦‚å½“å‰éœ€æ±‚ä¸‹ï¼Œå¼•å…¥ Redux/Flux/Dva/Mobx ç­‰å·¥å…·ï¼Œå¹¶æ²¡æœ‰è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Œå´å¯¼è‡´åŠŸèƒ½æ›´åŠ å—é™ï¼Œå½±å“éš”ç¦»åŸåˆ™æ¯”å¦‚å½“ä¸¤ä¸ªç»„ä»¶éœ€è¦æœåŠ¡çš„ä¸åŒå®ä¾‹çš„æƒ…å†µï¼Œä»¥ä¸Šå·¥å…·å±äºä¸Šä¸ªç‰ˆæœ¬æˆ–æŸç§ç‰¹æ®Šéœ€æ±‚ï¼Œæ¯”å¦‚å‰åç«¯åŒæ„ï¼Œä¸èƒ½å½±å“è¿™ä¸ªç‰ˆæœ¬å½“å‰éœ€æ±‚çš„æ¶æ„ï¼‰</li>
<li>ä¼˜å…ˆå“åº”å¼ï¼ˆæ™®åŠç®¡é“é£æ ¼çš„å‡½æ•°å¼æ–¹æ¡ˆï¼Œå¤§èƒ†ä½¿ç”¨ useEffect ç­‰ apiï¼Œä¸æå€¡æ¾æ•£çš„å‡½æ•°ç»„åˆï¼Œåªè¦æ˜¯è§†å›¾æ‰€ç”¨çš„æ•°æ®ï¼Œå¿…é¡»å…¨éƒ¨éƒ½ä¸ºå“åº”å¼æ•°æ®ï¼Œå¹¶å“åº”å˜æ›´ï¼‰</li>
<li>æµ‹è¯•å‹å¥½ï¼ˆè¾¹ç•Œæ¸…æ™°ï¼Œé£æ ¼ç®€æ´ï¼Œéš”ç¦»å®Œæ•´ï¼Œå³ä¸ºæµ‹è¯•å‹å¥½ï¼‰</li>
<li>è®¾è®¡å‹å¥½ï¼ˆæ”¯æŒæ¨¡å—åŒ–è®¾è®¡ï¼‰</li>
</ul>
<h3 id="å»ºè®®çš„æŠ€æœ¯æ ˆæ­é…"><a href="#å»ºè®®çš„æŠ€æœ¯æ ˆæ­é…" class="headerlink" title="å»ºè®®çš„æŠ€æœ¯æ ˆæ­é…"></a>å»ºè®®çš„æŠ€æœ¯æ ˆæ­é…</h3><ul>
<li>create-react-app + react-router-dom + antd + ahooks + styled-components (å¤§å¤šæ•°åœºæ™¯ä¸‹ï¼Œå¼ºçƒˆæ¨èï¼å¯ä»¥ä¸Š ProComponentï¼Œä½†æ˜¯è¦æ³¨æ„æå–åŠŸèƒ½é€»è¾‘ï¼Œä¸å¯å°†é€»è¾‘å†™äºç»„ä»¶)</li>
<li>umi + ahooks (è¯·åˆ é™¤ modelsï¼Œservicesï¼Œcomponentsï¼Œutils ç­‰éå¿…è¦é¡¶å±‚æ–‡ä»¶å¤¹ï¼Œç¦æ­¢ä½¿ç”¨ dva)</li>
<li>umi(ssr) + dva + ahooksï¼ˆåŒä¸Šï¼Œä½†å¯ä»…åŸºäº dva æ²Ÿé€šå‰åç«¯å’Œé¦–å±æ•°æ®ï¼Œé ssr åŒæ ·ç¦ç”¨ dvaï¼‰</li>
<li>next.js + react suite/material ui + swrï¼ˆåˆ©ç”¨ä¸åˆ° useAntdTable ä¹‹ç±»çš„åŠŸèƒ½ï¼Œahooks å°±é¸¡è‚‹äº†ï¼‰</li>
</ul>
<hr>
<h1 id="Hook-ä½¿ä½ åœ¨æ— éœ€ä¿®æ”¹ç»„ä»¶ç»“æ„çš„æƒ…å†µä¸‹å¤ç”¨çŠ¶æ€é€»è¾‘"><a href="#Hook-ä½¿ä½ åœ¨æ— éœ€ä¿®æ”¹ç»„ä»¶ç»“æ„çš„æƒ…å†µä¸‹å¤ç”¨çŠ¶æ€é€»è¾‘" class="headerlink" title="Hook ä½¿ä½ åœ¨æ— éœ€ä¿®æ”¹ç»„ä»¶ç»“æ„çš„æƒ…å†µä¸‹å¤ç”¨çŠ¶æ€é€»è¾‘"></a>Hook ä½¿ä½ åœ¨æ— éœ€ä¿®æ”¹ç»„ä»¶ç»“æ„çš„æƒ…å†µä¸‹å¤ç”¨çŠ¶æ€é€»è¾‘</h1><p>å½“ä½ æ€ç»´èšç„¦äºç»„ä»¶æ—¶ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ æ˜¯å¿…é¡»é€¼è¿«è‡ªå·±ï¼Œåœ¨ç»„ä»¶é‡Œå†™ä¸šåŠ¡é€»è¾‘ï¼Œæˆ–è€…é‡æ–°ç»„ç»‡ä¸šåŠ¡é€»è¾‘ï¼ğŸ™Š</p>
<p>å¹¶ä¸”ï¼Œå› ä¸º state æ˜¯ä¸ååº”ä¸šåŠ¡é€»è¾‘çš„ï¼Œå®ƒä¹Ÿå¤©ç„¶ä¸å¯ä»¥å¯¹ä¸šåŠ¡é€»è¾‘è¿›è¡Œç»„åˆ</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useSomeTable</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">// è¿™ä¸ªæ˜¯ä¸ªè¡¨å•ï¼ŒæŠ½è±¡çš„</span></span><br><span class="line">  <span class="keyword">const</span> [form] = Form.useForm()</span><br><span class="line">  <span class="comment">// è¿™ä¸ªæ˜¯ä¸ªè¡¨å•è”åŠ¨çš„è¡¨æ ¼</span></span><br><span class="line">  <span class="keyword">const</span> &#123;tableProps, loading&#125; = useAntdTable(</span><br><span class="line">     <span class="comment">// è‡ªåŠ¨å¤„ç†åˆ†é¡µç›¸å…³é—®é¢˜</span></span><br><span class="line">    (&#123;curren,pageSize&#125;, formData)=&gt;fetch(<span class="string">&#x27;http://sdfdsfsdf&#x27;</span>), <span class="comment">// æŠ½è±¡çš„çŠ¶æ€è¯·æ±‚</span></span><br><span class="line">    &#123;</span><br><span class="line">      form, <span class="comment">// è¡¨å•åœ¨è¿™é‡Œä¸è¡¨æ ¼ç»„åˆï¼Œå®ç°è”åŠ¨</span></span><br><span class="line">      defaultParams:&#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// å¾ˆå¤šåŠŸèƒ½éƒ½èƒ½é›†æˆï¼Œåªéœ€è¦ä¸€ä¸ªé…ç½®é¡¹</span></span><br><span class="line">      debounceInterval: <span class="number">300</span> <span class="comment">// èŠ‚æµ</span></span><br><span class="line">    &#125;</span><br><span class="line">  )</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    form,loading,tableProps</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;Form form=&#123;SomeTable.form&#125;&gt;&lt;!--é‡Œé¢å…¨éƒ¨çŠ¶æ€æ— å…³ï¼Œä¸ç”¨çœ‹äº†--&gt;&lt;/Form&gt;</span><br><span class="line">&lt;Table &#123;...tableProps&#125; columns=&#123;&#125; rowKey=<span class="string">&quot;id&quot;</span>/&gt;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªç»„ä»¶ï¼Œå­˜ç²¹åªæœ‰æ³¨å…¥å’Œè§†å›¾ï¼Œä¸€ä¸ç‚¹çš„é€»è¾‘éƒ½æ²¡æœ‰</p>
<p>ç»„ä»¶é‡Œæ²¡æœ‰é€»è¾‘ï¼Œ ç›¸å…³çš„é€»è¾‘å† useFunc ç§å°±èƒ½éšæ„ç»„åˆï¼Œç»“æ„ä»€ä¹ˆéƒ½éƒ½èƒ½ä½ æ¥å®šï¼Œç»“æ„å¦‚æœä¼˜ç§€ï¼Œä»»ä½•é€»è¾‘éƒ½æ˜¯ use ä¸ªå‡½æ•°çš„é—®é¢˜ï¼Œä½ ä¸ä¼šå‡ºç°éœ€è¦å†™ç¬¬äºŒéé€»è¾‘çš„æƒ…å†µï¼Œé€šè¿‡ç»„ä»¶çš„ props è¿›è¡Œåˆ†æµï¼ˆmap + keyï¼‰ï¼Œä½ èƒ½å¤Ÿéå¸¸ä¼˜é›…åœ°å¤„ç†åµŒå¥—å¤æ‚ç»“æ„</p>
<p>ä½ èƒ½å°†è§†å›¾å’Œé€»è¾‘å®Œå…¨ç»„ç»‡ä¸ºä¸€ä¸ªç»“æ„ï¼Œäº¤ç»™ä¸€ä¸ªç‰¹å®šçš„äººï¼Œå®Œå…¨ä¸ç”¨å…³å¿ƒä»–åˆ°åº•æ˜¯æ€ä¹ˆå¼€å‘çš„</p>
<p>è¿™ä¾¿æ˜¯ â€”â€” <strong>é€»è¾‘è§†å›¾åˆ†ç¦»</strong>ğŸ‘</p>
<hr>
<h1 id="React-SOA"><a href="#React-SOA" class="headerlink" title="React SOA"></a>React SOA</h1><h2 id="åŸºæœ¬çš„æœåŠ¡"><a href="#åŸºæœ¬çš„æœåŠ¡" class="headerlink" title="åŸºæœ¬çš„æœåŠ¡"></a>åŸºæœ¬çš„æœåŠ¡</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useSimpleService</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [val1,setVal1] = useState(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">const</span> [val2,setVal2] = useState(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    setVal2(val1)</span><br><span class="line">  &#125;,[val1])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    val1, setVal1, val2</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>å«å®ƒ serviceï¼Œæ˜¯ SOA æ¨¡å‹ä¸‹çš„ç®¡ç”¨å«æ³•ï¼Œæ„æ€æ˜¯ â€”â€” æˆ‘åªä¼šåœ¨è¿™æ ·çš„ç»“æ„ç§å†™é€»è¾‘ï¼Œç»„ä»¶ä¸­çš„é€»è¾‘å…¨éƒ¨æ¶ˆå¤±ï¼ˆä¼˜å…ˆå°†ç»„ä»¶è§†ä¸ºå…ƒç´ ï¼‰</li>
<li>åªæš´éœ²ä½ éœ€è¦æš´éœ²çš„çŠ¶æ€é€»è¾‘ï¼ˆçŠ¶æ€é€»è¾‘å¿…é¡»ä¸€èµ·è¯´ï¼ŒåªåšçŠ¶æ€å¤ç”¨å¾ˆæ‰¯æ·¡ï¼Œæ¯•ç«Ÿ 2021 å¹´äº†ï¼‰</li>
<li>useRefï¼ŒåŒæ ·ä¹Ÿå¯ä»¥å°è£…åœ¨ Service ä¸­ï¼Œè€Œä¸”å»ºè®®å¦‚æ­¤åšï¼Œref çš„è·å–ä¸æ˜¯è§†å›¾ï¼Œæ˜¯é€»è¾‘</li>
</ul>
<h2 id="ç»„åˆæœåŠ¡"><a href="#ç»„åˆæœåŠ¡" class="headerlink" title="ç»„åˆæœåŠ¡"></a>ç»„åˆæœåŠ¡</h2><p>æœ‰å¦å¤–ä¸€ä¸ªæœåŠ¡ï¼ŒuseAnotherService</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">userAnotherService</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [val,setVal] = useLocalstorage(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">return</span> &#123;vale,setVal&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶åä¸åŸºæœ¬æœåŠ¡è¿›è¡Œç»„åˆ</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useSimpleService</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [val1,setVal1] = useState(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">const</span> [val2,setVal2] = useState(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">const</span> &#123;setVal&#125; = userAnotherService()</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    setVal2(val1)</span><br><span class="line">  &#125;,[val1])</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    setVal(val2)</span><br><span class="line">  &#125;,[val2])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    val1, setVal1, val2</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å°±èƒ½ä¸ºåŸºæœ¬æœåŠ¡åŠ¨æ€æ·»åŠ åŠŸèƒ½</p>
<ul>
<li>ä¸ºä»€ä¹ˆä¸ç›´æ¥ <code>import</code>ï¼Ÿå› ä¸ºéœ€è¦æ¡†æ¶å†…çš„å“åº”å¼èƒ½åŠ›ï¼Œè¿™ä¸ªå«æ§åˆ¶åè½¬ï¼Œæ¡†æ¶å°†å“åº”å¼çš„æ§åˆ¶æƒè½¬äº¤ç»™äº†å¼€å‘è€…</li>
<li>å¦‚æœæœ‰å¦å¤–ä¸€ä¸ªæœåŠ¡ï¼Œå•å•åªè¦ <code>AnotherService</code> çš„åŠŸèƒ½ï¼Œä½ åªéœ€è¦è°ƒç”¨ <code>useAnthor Service</code> å°±å¥½äº†</li>
<li>æœ€å¥½æ˜¯è°ƒç”¨è€…ä¿®æ”¹è¢«è°ƒç”¨è€…ï¼Œå¯ä»¥å¯¹æ¯” <code>ahooks</code> å¯¹ä»£ <code>useRef</code> çš„æ”¹åŠ¨ï¼Œå°±æ˜¯æœ¬ç€è¿™ä¸ªæ¬¡åºï¼Œå› ä¸ºè¢«è°ƒç”¨è€…å¯èƒ½è¢«å¤šæ¬¡è°ƒç”¨ï¼Œä¿è¯å¤ç”¨æ€§</li>
<li><code>useEffect</code> æ˜¯ä¸€ç§ç®¡é“æ¨¡å‹ï¼Œå¦‚åŒ <code>rxjs</code> ä¸€èˆ¬ï¼Œåªæ˜¯æ¡†æ¶å¸®ä½ æŒ‰é¡ºåºç»„è£…è€Œå·²ï¼ˆä½ ä»¥ä¸ºä¸ºå•¥éè¦ä½ æŒ‰é¡ºåºæ¥ï¼Ÿï¼‰ï¼Œæ˜¯æé™çš„å‡½æ•°å¼æ–¹æ¡ˆï¼Œä¸å­˜åœ¨çº¯åº¦é—®é¢˜ï¼Œå‡½æ•°å¼å¾—ä¸è¦ä¸è¦çš„ã€‚ä½†æ˜¯æœ‰ä¸ªè¦æ±‚ï¼Œä¾èµ–å¿…é¡»å†™æ¸…æ¥šï¼Œè¿™ä¸ªä¾èµ–æ˜¯ç®¡é“æ“ä½œä¸­çš„å‚æ•°ï¼Œ<code>React</code> å°†ä½ çš„ <code>hook</code> é‡æ–°ç»„åˆæˆäº†ç®¡é“ï¼Œä½†æ˜¯å‚æ•°å¿…é¡»æä¾›ï¼Œåœ¨å®ƒèƒ½è‡ªåŠ¨åˆ†æä¾èµ–ä¹‹å‰</li>
<li>ä½¿ç”¨äº† <code>useAnotherService</code> çš„ç»†èŠ‚è¢«éšè—ï¼Œå½¢æˆäº†ä¸€ä¸ªæ ‘å½¢è°ƒç”¨ç»“æ„ï¼Œè¿™ç§ç»“æ„è¢«ç§°ä½œâ€œä¾èµ–æ ‘â€æˆ–è€…â€œæ³¨å…¥æ ‘â€ï¼Œåˆ«ç›¯ç€æˆ‘ï¼Œåå­—ä¸æ˜¯æˆ‘å®šçš„</li>
</ul>
<h2 id="æ³¨å…¥å•ä¾‹æœåŠ¡"><a href="#æ³¨å…¥å•ä¾‹æœåŠ¡" class="headerlink" title="æ³¨å…¥å•ä¾‹æœåŠ¡"></a>æ³¨å…¥å•ä¾‹æœåŠ¡</h2><p>å½“å‰æœåŠ¡å¦‚æœéœ€è¦è¢«å¤šä¸ªç»„ä»¶ä½¿ç”¨ï¼ŒæœåŠ¡ä¼šè¢«åˆå§‹åŒ–å¾ˆå¤šæ¬¡ï¼Œå¦‚ä½•è®©å®ƒåªæ³¨å…¥ä¸€æ¬¡ï¼Ÿ</p>
<p>åˆ©ç”¨ createContext</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> SimpleService = createContext(<span class="literal">null</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">useSimpleService</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯ï¼Œå•ä¾‹éœ€è¦æ³¨å…¥åˆ°å”¯ä¸€èŠ‚ç‚¹ï¼Œå› æ­¤ï¼Œä½ éœ€è¦åœ¨æ‰€æœ‰éœ€è¦ç”¨åˆ°è¿™ä¸ªæœåŠ¡çš„ç»„ä»¶çš„æœ€é¡¶å±‚ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;SimpleService.Provider value=&#123;useSimpleService()&#125;&gt;</span><br><span class="line">  &#123;props.children&#125;</span><br><span class="line">&lt;/SimpleService.Provider&gt;</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·ï¼Œè¿™ä¸ªæœåŠ¡çš„å•ä¾‹å°±å¯¹æ‰€æœ‰å­å­™ç»„ä»¶æ•å¼€äº†æ€€æŠ±ï¼ŒåŒæ—¶ï¼Œæ‰€æœ‰å­å­™ç»„ä»¶å¯¹å…¶çš„ä¿®æ”¹éƒ½å°†ç”Ÿæ•ˆ</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SomeComponent</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123;val1,setVal1&#125; = useContext(SomeService)</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span>=&gt;</span>&#123;setVal1(&#x27;fuck&#x27;)&#125;&gt;val1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>ç›´æ¥åœ¨ jsx çš„ provider ç§ value = {useSomeService()} åœ¨æœ¬ç»„ä»¶æ²¡æœ‰ä»»ä½•å…¶å®ƒå“åº”å¼å˜é‡çš„æƒ…å†µä¸‹æ˜¯å¯è¡Œçš„ï¼Œå› ä¸ºä¸ä¼šé‡æ–°åˆå§‹åŒ–ï¼Œåœ¨è‰¯å¥½çš„æ¶æ„ä¸‹â€”â€”ç»„ä»¶é™¤æ³¨å…¥ï¼Œæ— ä»»ä½•é€»è¾‘ï¼Œreturn ä¹‹å‰æ²¡æœ‰ä¸œè¥¿ï¼ŒåŒæ—¶ï¼Œä¸Šä¸‹æ–‡å•ç‹¬å°è£…ç»„ä»¶ï¼Œå¯ä»¥ä½œä¸ºâ€œæ¨¡å—æ ‡è¯†â€</li>
<li>è¿™ä¸ªæœ‰å…±åŒå•ä¾‹ Service çš„ä¸€ç³»åˆ—ç»„ä»¶ï¼Œè¢«ç§°ä¸ºæ¨¡å—ï¼Œå®ƒä»¬æœ‰è‡ªå·±çš„â€œé™ç•Œä¸Šä¸‹æ–‡â€ï¼Œå¹¶ä¸”ï¼Œè§†å›¾ï¼Œé€»è¾‘ï¼Œæ ·å¼éƒ½åœ¨å…¶ä¸­ï¼Œå¦‚æœè¿™ä¸ªæ¨¡å—æ˜¯æŒ‰ç…§åŠŸèƒ½åˆ’åˆ†çš„ï¼Œé‚£ä¹ˆè¿™ç§ SOA å®ç°è¢«ç§°ä¸º é¢†åŸŸé©±åŠ¨è®¾è®¡(DDD) ï¼ŒæŸäº›æ¶æ„å¼ºæ¨çš„æ‰€è°“â€™å¾®å‰ç«¯â€™ï¼Œç›®çš„å°±æ˜¯å¾—åˆ°è¿™ä¸ªä¸œè¥¿</li>
<li>ä¸€å®šè¦æ³¨æ„ï¼Œè¿™ä¸ªæ¨¡å—çš„ä¸Šå±‚æ•°æ®å˜æ›´ï¼Œæ¨¡å—çš„é™ç•Œä¸Šä¸‹æ–‡ä¼šåˆ·æ–°ï¼Œè¿™ä¸ªæ˜¯é»˜è®¤æ“ä½œï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä½• jsx ç›´æ¥èµ‹å€¼ çš„åŸå› ï¼Œå¦‚æœä½ ä¸éœ€è¦è¿™ä¸ªä¸œè¥¿ï¼Œå¯ä»¥é‡‡ç”¨ const value = useService() åŒ…è£¹ï¼Œæˆ–è€…ç›´æ¥ memo è¿™ä¸ªæ¨¡å—æ ‡è¯†ç»„ä»¶</li>
</ul>
<h2 id="å•ä¾‹æœåŠ¡ï¼Œè§£å†³æ·±å±‚åµŒå¥—å¯¹è±¡é—®é¢˜"><a href="#å•ä¾‹æœåŠ¡ï¼Œè§£å†³æ·±å±‚åµŒå¥—å¯¹è±¡é—®é¢˜" class="headerlink" title="å•ä¾‹æœåŠ¡ï¼Œè§£å†³æ·±å±‚åµŒå¥—å¯¹è±¡é—®é¢˜"></a>å•ä¾‹æœåŠ¡ï¼Œè§£å†³æ·±å±‚åµŒå¥—å¯¹è±¡é—®é¢˜</h2><p>æ·±å±‚åµŒå¥—å¯¹è±¡æ€ä¹ˆå¤„ç†ï¼ŸuseReducerï¼Ÿimmutable?è¿˜æ˜¯ç›´æ¥æ·±å¤åˆ¶ï¼Ÿ</p>
<p>ä½ é¦–å…ˆæ˜ç™½ä½ è¦å®ç°ä»€ä¹ˆé€»è¾‘ï¼Œæ·±å±‚åµŒå¥—å¯¹è±¡ä¹‹æ‰€ä»¥éš¾å¤„ç†ï¼Œæ˜¯å› ä¸ºä½ æƒ³åœ¨å­ç»„ä»¶å®ç° <strong>å¯¹æ·±å±‚ç›®æ ‡çš„éƒ¨åˆ†å˜æ›´é€»è¾‘</strong></p>
<p>ä¹‹å‰ä½ ä¹‹æ‰€ä»¥æœ‰è¿™äº›å¥‡å¥‡æ€ªæ€ªå·¥å…·ç”šè‡³æ·±å¤åˆ¶çš„éœ€æ±‚ï¼Œæ˜¯å› ä¸ºä½ æ²¡æœ‰åŠæ³•å°†é€»è¾‘ä¹Ÿæ‹†åˆ†ç»™å­ç»„ä»¶ï¼Œæ˜ç™½ä¸ºä»€ä¹ˆå¦‚æ­¤</p>
<p>ç°åœ¨ï¼Œé€»è¾‘å¯ä»¥æ‹†åˆ†å¤ç”¨ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useSomeService</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [value,setValue] = useState(&#123;</span><br><span class="line">    username: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    password: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    info:&#123;</span><br><span class="line">        nickname:<span class="string">&quot;&quot;</span>,</span><br><span class="line">        others:[]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> &#123;value,setValue&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ³¨å…¥éƒ¨åˆ†çœç•¥...</span></span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹ info:</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setValue(<span class="function">(<span class="params">res</span>)=&gt;</span>&#123;res.info.nickname === <span class="string">&#x27;fuck&#x27;</span>;<span class="keyword">return</span> res&#125;)</span><br></pre></td></tr></table></figure>

<p>é…åˆ map ä¿®æ”¹æ•°ç»„ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ†å½¢éƒ¨åˆ†ï¼š</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">5</span>).map(<span class="function">(<span class="params">_,key</span>)=&gt;</span><span class="xml"><span class="tag">&lt;<span class="name">SomeCompo</span> <span class="attr">index</span>=<span class="string">&#123;key&#125;</span> <span class="attr">key</span>=<span class="string">&#123;key&#125;/</span>&gt;</span></span>)</span><br><span class="line"><span class="comment">// ç»„ä»¶</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SomeComponent</span>(<span class="params">props</span>)</span>&#123;</span><br><span class="line">   <span class="keyword">const</span> &#123;setValue&#125; = useContext(SomeService)</span><br><span class="line">   <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span>=&gt;</span>&#123;setValue(res=&gt;&#123;res.info.others[props.index] = &#x27;fuck&#x27;;return res&#125;)&#125;&#125;&gt;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœéœ€è¦åˆ’åˆ†æ¨¡å—ï¼Œé€šè¿‡ getterï¼Œsetter ä¼ é€’è¿™ä¸ªåµŒå¥—ç»“æ„ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">subInjectedService</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123;value,setValue&#125; = useContext(SomeService)</span><br><span class="line">  <span class="keyword">const</span> info = useMemo(<span class="function">()=&gt;</span>value.info.others,[value])</span><br><span class="line">  <span class="keyword">const</span> setInfo = useCallback(<span class="function">(<span class="params">val</span>)=&gt;</span>&#123;</span><br><span class="line">    setValue(<span class="function"><span class="params">res</span>=&gt;</span>&#123;res.info.others[props.index] = val;<span class="keyword">return</span> res&#125;)</span><br><span class="line">  &#125;,[])</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    info,setInfo</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å¿½ç•¥æ³¨å…¥éƒ¨åˆ†...</span></span><br></pre></td></tr></table></figure>

<p>è¿™æ ·çš„è¯ï¼Œè¿™ä¸ªé‡æ–°åˆ’åˆ†çš„æ¨¡å—å†…éƒ¨ï¼Œæƒ³è¦ä¿®æ”¹ä¸Šå±‚çš„æ•°æ®ï¼Œåªéœ€è¦é€šè¿‡ info,setInfo å³å¯</p>
<ul>
<li>ä¸ç”¨æ‹…å¿ƒçº¯åº¦å’Œä¸å˜æ€§çš„é—®é¢˜ï¼Œå› ä¸º hooks éƒ½æ˜¯çº¯çš„ï¼Œæ²¡æœ‰ä¸çº¯çš„æƒ…å†µ</li>
<li>å…¨å±€å‰¯ä½œç”¨æ˜¯çŠ¶æ€+å‡½æ•°å…¨å±€é€»è¾‘å°è£…ï¼ˆåˆ†å±‚ï¼‰è€ƒè™‘çš„é—®é¢˜ï¼Œå°†å‡½æ•°å’Œç»„ä»¶ï¼Œè§†å›¾åŠŸèƒ½é€»è¾‘æ ·å¼å…¨éƒ¨ä½œä¸ºæ¨¡å—ï¼Œå‰¯ä½œç”¨æ˜¯ä»¥æ¨¡å—ä¸ºå•ä½çš„ï¼Œè€Œ info å’Œ setInfo çš„ getterï¼Œsetter å°è£…ï¼Œå«åšâ€”â€”æ¨¡å—é—´é€šè®¯</li>
<li>useReducer åªæ¶‰åŠè°ƒè¯•ï¼Œä¹Ÿå°±æ˜¯æœ‰ä¸ª action åå­—æ–¹ä¾¿ä½ å®šä½é—®é¢˜ï¼Œæ¨¡å—åˆ’åˆ†å¦‚æœè¶³å¤Ÿç»†ï¼Œä½ æ ¹æœ¬ä¸éœ€è¦è¿™ä¸ª action æ¥è®°å½•ä½ çš„å˜æ›´ï¼Œé‡‡ç”¨ useReducer ä¸ DDD åŸåˆ™èƒŒç¦»ï¼Œä½†æ˜¯ä¹Ÿä¸ä¼šç¦æ­¢ã€‚ä¸è¿‡ï¼Œå…¨å±€ useReducer å¿…é¡»æ˜ä»¤ç¦æ­¢ï¼Œè¿™ç§æ–¹å¼æ˜¯ä¸ªç¾éš¾ï¼ŒuseReducer å¿…é¡»æ˜¯ä»¥æ¨¡å—ä¸ºå•ä½ï¼Œä¸èƒ½æ›´å°ï¼Œä¹Ÿä¸èƒ½æ›´å¤§</li>
<li>ç»„ä»¶å’ŒæœåŠ¡ä¸€èµ·ï¼Œå¤„ç†ä¸€éƒ¨åˆ†æ•°æ®ï¼Œä¿è¯äº†å•ä¾‹ä¿®æ”¹ï¼Œä¸å˜æ€§ä¹Ÿä¸ç”¨æ‹…å¿ƒï¼Œhooks æ¥ä¿è¯è¿™ä¸ª</li>
<li>åœ¨è¿™é‡Œï¼Œä½ ä¼šå‘ç° props çš„åŠŸèƒ½å¥½åƒåªæœ‰â€™åˆ†å½¢â€™ï¼Œä¹Ÿå°±æ˜¯ map ç§å°†æ•°æ®çš„æ ‡è¯†ä¼ é€’ç»™å­ç»„ä»¶ï¼Œæ˜¯çš„ â€”â€” ä¼˜å…ˆä½¿ç”¨æœåŠ¡å…±äº«çŠ¶æ€é€»è¾‘</li>
<li>getterï¼Œsetter å«åšå“åº”å¼ï¼Œå¦‚æœä½ ä¸éœ€è¦å“åº”å¼ä¿®æ”¹ï¼Œsetter å¯ä»¥åˆ é™¤ï¼Œä½†æ˜¯ getter åŒæ—¶è¿˜æœ‰é˜²æ­¢é‡æ–°æ¸²æŸ“çš„ä½œç”¨ï¼Œä¿ç•™å³å¯ï¼Œé™¤éçº¯ç»„ä»¶</li>
</ul>
<h2 id="æœåŠ¡è·å–æ—¶çš„ç±»å‹é—®é¢˜"><a href="#æœåŠ¡è·å–æ—¶çš„ç±»å‹é—®é¢˜" class="headerlink" title="æœåŠ¡è·å–æ—¶çš„ç±»å‹é—®é¢˜"></a>æœåŠ¡è·å–æ—¶çš„ç±»å‹é—®é¢˜</h2><p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ Typescript ï¼Œé‚£ä¹ˆï¼Œç”¨æ³›å‹çº¦æŸè·å¾—è‡ªåŠ¨ç±»å‹æ¨æ–­ï¼Œä¼šè®©ä½ å¦‚è™æ·»ç¿¼</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createContext &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ³›å‹çº¦æŸè·å–æ³¨å…¥ä»¤ç‰Œ</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@export</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@template <span class="variable">T</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;(...args: any[]) =&gt; T&#125;</span> <span class="variable">func</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;(T | undefined)&#125;</span> </span>[initialValue=undefined]</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">useToken</span>&lt;<span class="title">T</span>&gt;(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  func: (...args: any[]) =&gt; T,</span></span></span><br><span class="line"><span class="function"><span class="params">  initialValue: T | <span class="literal">undefined</span> = <span class="literal">undefined</span>,</span></span></span><br><span class="line"><span class="function"><span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> createContext(initialValue <span class="keyword">as</span> T);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶åå°† <code>createContext()</code> æ”¹ä¸º <code>useToken(SomeService)</code> å³å¯ï¼Œè¿™æ ·ä½ å°±æ‹¥æœ‰äº†æŒ‡å“ªæ‰“å“ªçš„ç±»å‹æ”¯æŒï¼Œæ— éœ€å•ç‹¬çš„ç±»å‹å£°æ˜ï¼Œä»£ç æ›´åŠ æ¸…çˆ½</p>
<ul>
<li>å¦‚æœæ˜¯ <code>Javascript</code> ç¯å¢ƒï¼Œå»ºè®®è€è€å®å®å†™ <code>createContext</code> çš„ <code>defaultValue</code>ï¼Œè™½ç„¶æ³¨å…¥ä¹‹åï¼Œå­å­™ç»„ä»¶éƒ½ä¸ä¼šå‡ºç° <code>defaultValue</code>ï¼Œä½†æ˜¯ <code>javascript</code> è¯­å¢ƒä¸‹æœ‰ä»£ç æç¤º</li>
<li>ä¸å»ºè®® <code>typescript</code> ä¸‹å£°æ˜ <code>defaultValue</code>ï¼Œå› ä¸ºæ¨¡å—å¤–çš„æœåŠ¡è°ƒç”¨ï¼Œåº”è¯¥è¢«ç¦æ­¢ï¼Œè¿™æ˜¯ <code>DDD</code> æ¶æ„çš„åŸºç¡€ï¼Œå¦‚æœä½ æƒ³è¦åœ¨å¤–éƒ¨ä½¿ç”¨å•ä¾‹æœåŠ¡ â€”â€” è¯·å°†å…¶æå‡è‡³å¤–éƒ¨</li>
</ul>
<h2 id="é¡¶å±‚æ³¨å…¥æœåŠ¡"><a href="#é¡¶å±‚æ³¨å…¥æœåŠ¡" class="headerlink" title="é¡¶å±‚æ³¨å…¥æœåŠ¡"></a>é¡¶å±‚æ³¨å…¥æœåŠ¡</h2><p>å¹³å‡¡æå‡æ¨¡å—æœåŠ¡å±‚çº§ï¼Œå¯èƒ½ä¼šäº§ç”Ÿå¾ªç¯ä¾èµ–ï¼Œè€Œä¸”ä¼šå½±å“æ¨¡å—çš„å°è£…åº¦ï¼Œå› æ­¤ï¼š</p>
<p>âš ï¸<strong>ä¼˜å…ˆæ€è€ƒæ¸…æ¥šè‡ªå·±åº”ç”¨çš„æ¨¡å—å…³ç³»ï¼</strong></p>
<p>å¾ªç¯ä¾èµ–äº§ç”Ÿæ ¹æºæ˜¯åŠŸèƒ½é¢†åŸŸï¼ŒåŠŸèƒ½æ¨¡å—åˆ’åˆ†æœ‰é—®é¢˜ï¼Œä¼˜å…ˆè§£å†³æ ¹æœ¬é—®é¢˜ï¼Œè€Œä¸æ˜¯è½¬ç§»çŸ›ç›¾ã€‚å¦‚æœä½ å®åœ¨æ€è€ƒä¸æ¸…æ¥šï¼Œåˆæƒ³è¦ç«‹åˆ»å¼€å§‹å¼€å‘ï¼Œé‚£ä¹ˆå¯ä»¥å°è¯•é¡¶å±‚æ³¨å…¥æœåŠ¡ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useAppService</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    someService:useSomeService()</span><br><span class="line">    anotherService:useAnotherService()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>æ¨¡å—é—´è¿›è¡ŒåµŒå¥—ç»„åˆå°†å˜å¾—æ— æ¯”å›°éš¾ï¼Œä¸å†æ˜¯ä¸€ä¸ª getterï¼Œsetter èƒ½å¤Ÿæå®šçš„ï¼Œå¦‚æœä¸æ˜¯ç»å¯¹çš„å¿…è¦ï¼Œå°½é‡ä¸è¦é‡‡ç”¨æ­¤ç§æ–¹å¼ï¼å®ƒæœ‰æ‚–äº DDD åŸåˆ™ â€”â€” åˆ†æ²»</li>
<li>å¤šç»„ä»¶å…±äº«ä¸åŒå®ä¾‹å°†å½»åº•å¤±è´¥ï¼Œè¿™ä¸æ˜¯ä½ æ„¿æ„çœ‹åˆ°çš„</li>
</ul>
<h2 id="å¯é€‰æœåŠ¡"><a href="#å¯é€‰æœåŠ¡" class="headerlink" title="å¯é€‰æœåŠ¡"></a>å¯é€‰æœåŠ¡</h2><p>æ¨¡å—æœåŠ¡åˆ’åˆ†çš„å¦ä¸€ä¸ªå·¨å¤§ä¼˜åŠ¿ï¼Œå°±æ˜¯å°†é€»è¾‘å˜ä¸ºå¯é€‰é¡¹ï¼Œè¿™åœ¨é‡å‹åº”ç”¨ä¸­ï¼Œå‡ ä¹å°±æ˜¯é‡‡ç”¨ DDD çš„å…³é”®</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useServiceByOneLogic</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    activated,</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useServiceByAnotherLogic</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    activated,</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useSomeService</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [...servicList] = [useServiceByOneLogic(),useServiceByAnotherLogic()]</span><br><span class="line">  <span class="comment">// é€‰æ‹©æ¿€æ´»çš„æœåŠ¡</span></span><br><span class="line">  <span class="keyword">const</span> usedService = useMemo(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> service <span class="keyword">of</span> serviceList)&#123;</span><br><span class="line">      <span class="keyword">if</span>(service.activated === <span class="literal">true</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> service</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,[serviceList])</span><br><span class="line">  <span class="keyword">return</span> service</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ³¨å…¥è¿‡ç¨‹çœç•¥...</span></span><br></pre></td></tr></table></figure>

<ul>
<li>ä½ ä¹Ÿå¯ä»¥é€šè¿‡å„ç§æ¡ä»¶ç­›é€‰æœåŠ¡ï¼Œè¿™ç§æ–¹å¼æ˜¯åœ¨å‰ç«¯å®ç°çš„é«˜å¯ç”¨</li>
<li>âš  æ³¨æ„ï¼ŒæœåŠ¡æœ€å¥½åªæ˜¯å†…éƒ¨å®ç°ä¸åŒï¼Œæ¥å£åº”è¯¥å°½å¯èƒ½ç›¸åŒï¼Œå¦è€…ä¼šå‡ºç°å¯é€‰ç±»å‹</li>
<li>æœ€å…¸å‹çš„åº”ç”¨ï¼Œå°±æ˜¯å¤šå®¶äº‘æœåŠ¡å‚å•†çš„çŸ­ä¿¡éªŒè¯ï¼ˆéªŒè¯ç ï¼Œäººæœºæ ¡éªŒç­‰ï¼‰ï¼Œé€šè¿‡å¯é€‰æœåŠ¡æ ¹æ®ç”¨æˆ·ç½‘ç»œæƒ…å†µè¿›è¡Œç­›é€‰ï¼Œç”¨æœ€é€‚åˆå½“å‰ç”¨æˆ·çš„é‚£ä¸€ä¸ª</li>
<li>è¿˜æœ‰ä¸€ä¸ªéå¸¸æœ‰æ„æ€çš„æ–¹æ¡ˆï¼Œé€šè¿‡æœåŠ¡æ¥åšæ•°æ® mockï¼Œå› ä¸ºæœåŠ¡ç›´æ¥å¯¹æ¥è§†å›¾ï¼Œä½ åªéœ€è¦æ¨¡æ‹Ÿè§†å›¾æ•°æ®å³å¯ï¼Œæä¾›ä¸¤ä¸ªæœåŠ¡ï¼Œä¸€ä¸ªçœŸå®æœåŠ¡ï¼Œä¸€ä¸ª mock æœåŠ¡ï¼Œè¿™æ ·æ˜¯ç”¨çœŸå®æ•°æ®è¿˜æ˜¯ mock æ•°æ®ï¼Œéƒ½æ˜¯æœåŠ¡è‡ªåŠ¨åˆ¤æ–­çš„ï¼Œå¯¹ä½ æ¥è¯´æ²¡æœ‰æµç¨‹å·®åˆ«</li>
</ul>
<h2 id="æ ·å¼å°è£…"><a href="#æ ·å¼å°è£…" class="headerlink" title="æ ·å¼å°è£…"></a>æ ·å¼å°è£…</h2><p>æ³¨æ„ï¼Œæ¨¡å—æ˜¯åŒ…å«äº†æ ·å¼çš„ï¼Œä¸Šæ–‡åœ¨è®²è¿°é€»è¾‘å’Œè§†å›¾çš„å°è£…ï¼Œæ¥ä¸‹æ¥è¯´è¯´æ ·å¼</p>
<ul>
<li>å…¸å‹çš„ cssModuleï¼Œ styled-components ä¹‹ç±»çš„æ–¹æ¡ˆ</li>
<li>shadowDomï¼Œä»¿çœŸæ ·å¼ï¼ˆAngular åŸç”Ÿæ”¯æŒï¼ŒReact å¯ä»¥ç”¨ cssModule ä¹‹ç±»å·¥å…·é—´æ¥å®ç°ï¼‰ï¼Œå¯ä»¥å®ç°è·¨æŠ€æœ¯æ ˆæ ·å¼å°è£…ï¼ˆæ²¡é”™ï¼Œæ‰€è°“ â€˜å¾®å‰ç«¯â€™ çš„æ ·å¼å°è£…ï¼‰</li>
<li>æ ·å¼æœ€å¥½åªåŒ…å«æ’ç‰ˆï¼Œä¼ä¸š vis ç»Ÿä¸€æ€§æ˜¯æ ‡å‡†ï¼Œæ²¡æœ‰å¿…è¦è¿èƒŒè¿™ä¸ª</li>
</ul>
<hr>
<h1 id="ç»§ç»­åˆ†æ-SOA"><a href="#ç»§ç»­åˆ†æ-SOA" class="headerlink" title="ç»§ç»­åˆ†æ SOA"></a>ç»§ç»­åˆ†æ SOA</h1><p>ä»ä¸Šä¸€ç¯‡æ–‡ç« çš„ä¾‹å­å¯ä»¥çœ‹å‡ºä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>é¦–å…ˆï¼ŒæŒ‰ç…§åŠŸèƒ½é¢†åŸŸåˆ’åˆ†æ–‡ä»¶ï¼Œå¯ä»¥å¾ˆå¿«åˆ†æå‡ºåº”ç”¨çš„é€»è¾‘ç»“æ„</p>
<p>ä¹Ÿå°±æ˜¯é€»è¾‘å¯è¯»æ€§æ›´å¼ºï¼Œè¿™ä¸ªå¯è¯»æ€§ä¸åªæ˜¯é’ˆå¯¹ç”¨æˆ·çš„ï¼Œè¿˜æœ‰é’ˆå¯¹è½¯ä»¶çš„</p>
<p>æ¯”å¦‚ï¼Œ<code>TodoService</code> å’Œ <code>TableHandlerService</code> æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ</p>
<h2 id="useTableHandlerService"><a href="#useTableHandlerService" class="headerlink" title="useTableHandlerService"></a>useTableHandlerService</h2><p><img src="https://wuzhaoyi-xyz.oss-cn-beijing.aliyuncs.com/git20210121003840.jpg" alt="useTableHandlerService"></p>
<p><img src="https://wuzhaoyi-xyz.oss-cn-beijing.aliyuncs.com/git20210121003905.jpg" alt="useTodoService"></p>
<p>è¿™äº›é€»è¾‘å…³ç³»ï¼Œä»…ä»…ä¾é ç›¸å…³å·¥å…·å°±èƒ½å®šä½ï¼Œå¹¶ç”Ÿæˆå›¾å½¢ï¼Œè¾…åŠ©ä½ åˆ†æé¢†åŸŸé—´çš„å…³ç³»</p>
<p>è°ä¾èµ–è°ï¼Œä¸€ç›®äº†ç„¶ â€”â€” æ¯”å¦‚ æœ‰ä¸ª <code>useState</code> çš„å€¼ ä¾èµ– <code>useLocalStorageState</code>ï¼Œè‚‰çœ¼çœ‹èµ·æ¥æ¯”è¾ƒå›°éš¾ï¼Œä½†æ˜¯åœ¨å›¾ä¸­ä¸€ç›®äº†ç„¶</p>
<p>åªæ˜¯ï¼Œä¸å…·åè¿™ä¸€ç‚¹æœ‰ç‚¹ç¥çƒ¦ï¼</p>
<p>è¿˜æœ‰ï¼Œ<code>React</code>å†…éƒ¨å› ä¸ºæ²¡æœ‰ç®¡ç†å¥½è¿™ä¸ªéƒ¨åˆ†ä¼ é€’ï¼Œæ²¡åŠæ³•åƒ <code>Angular</code> ä¸€æ ·ï¼Œç¬é—´ç”Ÿæˆä¸€å¤§å †å¯†å¯†éº»éº»çš„ä¾èµ–æ ‘ï¼Œè¿™å°±ç»™ <code>React</code> åœ¨å¤§é¡¹ç›®å·¥ç¨‹åŒ–ä¸Šå¸¦æ¥äº†é˜»ç¢</p>
<p>ä¸è¿‡ä¸€èˆ¬é¡¹ç›®åšä¸åˆ°é‚£ä¹ˆå¤§ï¼Œé¢†åŸŸé©±åŠ¨å¯ä»¥å¸®åŠ©ä½ åšåˆ° <code>Angular</code> é¡¹ç›®æé™çš„ 95%ï¼Œå‰©ä¸‹é‚£ 5%ï¼Œä¹Ÿåªæ˜¯ç¨ç¨ç—›è‹¦äº›è€Œå·²ï¼Œå¹¶ä¸”ï¼Œæ²¡æœ‰åŠæ³•ç»™ç®¡ç†è€…çœ‹åˆ°å®Œæ•´è“å›¾</p>
<p>ä¸è¿‡å°±å›½å†…ç›®å‰å‰ç«¯æŠ€æœ¯ç®¡ç†è€…å’Œäº§å“ç»ç†çš„æ°´å“ï¼Œä½ ç»™ä»–ä»¬çœ‹ uml è“å›¾ï¼Œæˆ‘æ‹…å¿ƒä»–ä»¬ä¹Ÿçœ‹ä¸æ‡‚ï¼Œæ‰€ä»¥è¿™éƒ¨åˆ†ä¸ç”¨å¤ªåœ¨æ„ï¼Œæ„Ÿè§‰æœ‰åœ°æ–¹ä¾èµ–æ‹¿ä¸å‡†ï¼Œåªæ˜¾ç¤ºè¿™ä¸ªé¢†åŸŸçš„è“å›¾å°±å¥½</p>
<p>å…¶æ¬¡ï¼Œæµ‹è¯•è¾¹ç•Œæ¸…æ™°ï¼Œä¸”æ˜“äºæ¨¡æ‹Ÿ</p>
<p>è§†å›¾ä½ ä¸ç”¨æµ‹è¯•ï¼Œå› ä¸ºæ²¡æœ‰è§†å›¾é€»è¾‘ï¼Œä»€ä¹ˆæ—¶å€™éœ€è¦è§†å›¾æµ‹è¯•ï¼Ÿæ¯”å¦‚ <code>Form</code> å’Œ <code>FormItem</code> ç­‰å‡ºç°åµŒå¥—æ³¨å…¥çš„åœ°æ–¹ï¼Œéœ€è¦è¿›è¡Œè§†å›¾æµ‹è¯•ï¼Œè¿™éƒ¨åˆ†è€¦åˆå‡ºç°çš„æ¦‚ç‡éå¸¸å°ï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯ç¬¬ä¸‰æ–¹æ¡†æ¶çš„å·¥ä½œ</p>
<p>ä½ åªéœ€è¦æµ‹è¯•è¿™äº› <code>useFunction</code> å°±å¥½ï¼Œå¹¶ä¸”æä¾›ä¸¤ä¸ªä¸ªæ¡†ï¼Œæ¯”å¦‚ç©ºç»„ä»¶ç›´æ¥ <code>use</code>ï¼ŒåµŒå¥—ç»„ä»¶å…ˆ <code>provide</code> å† <code>useContext</code>ï¼Œç„¶åç›´æ¥åªæ¨¡æ‹Ÿ <code>useFunction</code> è¾¹ç•Œï¼Œå¹¶æä¾›æµ‹è¯•ï¼Œå¤§å®¶å¯ä»¥å°è¯•ä¸€ä¸‹ï¼Œä»¥å‰è§‰å¾—æµ‹è¯•ç¥çƒ¦ï¼Œç°åœ¨å¯ä»¥è¯•è¯•åœ¨æ¸…æ™°é¢†åŸŸè¾¹ç•Œä¸‹ï¼Œæµ‹è¯•å¯ä»¥æœ‰å¤šæ„‰æ‚¦</p>
<p>æœ€å</p>
<p>è°å†æçŠ¶æ€ç®¡ç†æˆ‘å’Œè°æ€¥ï¼</p>
<p>ä½ çœ‹çœ‹è¿™ä¸ªåº”ç”¨ï¼Œå“ªé‡Œæœ‰çŠ¶æ€ç®¡ç†æ’æ‰‹çš„åœ°æ–¹ï¼Ÿä»»ä½•çŠ¶æ€ç®¡ç†åº“éƒ½ä¸è¡Œï¼Œå®ƒæ˜¯ä¸Šä¸ªæ—¶ä»£çš„é®ç¾å¸ƒ</p>
<hr>
<h1 id="æœåŠ¡é—´é€šè®¯ç»“æ„"><a href="#æœåŠ¡é—´é€šè®¯ç»“æ„" class="headerlink" title="æœåŠ¡é—´é€šè®¯ç»“æ„"></a>æœåŠ¡é—´é€šè®¯ç»“æ„</h1><h2 id="å…¨å±€å•ä¸€æœåŠ¡ï¼ˆç±»-Redux-æ–¹æ¡ˆï¼‰"><a href="#å…¨å±€å•ä¸€æœåŠ¡ï¼ˆç±»-Redux-æ–¹æ¡ˆï¼‰" class="headerlink" title="å…¨å±€å•ä¸€æœåŠ¡ï¼ˆç±» Redux æ–¹æ¡ˆï¼‰"></a>å…¨å±€å•ä¸€æœåŠ¡ï¼ˆç±» <code>Redux</code> æ–¹æ¡ˆï¼‰</h2><p>ä½†æ˜¯ï¼Œå•ä¸€æœåŠ¡æ˜¯ä¸å¾—å·²è€Œä¸ºä¹‹ï¼Œè€ç‰ˆæœ¬æ²¡æœ‰é€»è¾‘å¤ç”¨å¯¼è‡´çš„</p>
<p>åœ¨è¿™ç§æ–¹å¼ä¸‹ï¼Œä½ çš„è°ƒè¯•å°†å˜å¾—æ— æ¯”å¤æ‚ï¼Œä»»ä½•ä¸€å¤„å˜æ›´å°†ç‰µæ‰¯æ‰€æœ‰æœ¬è¯¥å°è£…ä¸ºæ¨¡å—çš„ç»„ä»¶</p>
<p>æ‰€ä»¥å¿…é¡»é…åˆç›¸åº”çš„è°ƒè¯•å·¥å…·</p>
<p>æ‰€æœ‰å¤šäººåä½œé¡¹ç›®ï¼Œé‡‡ç”¨æ­¤ç§æ–¹å¼ï¼Œæœ€åçš„ç»“æœåªæœ‰é¡¹ç›®ä¸å¯ç»´æŠ¤ä¸€æ¡è·¯ï¼</p>
<h2 id="ä¸­å°-å…¶ä»–æœåŠ¡ï¼ˆåŒå±‚ç»“æ„ï¼‰"><a href="#ä¸­å°-å…¶ä»–æœåŠ¡ï¼ˆåŒå±‚ç»“æ„ï¼‰" class="headerlink" title="ä¸­å°+å…¶ä»–æœåŠ¡ï¼ˆåŒå±‚ç»“æ„ï¼‰"></a>ä¸­å°+å…¶ä»–æœåŠ¡ï¼ˆåŒå±‚ç»“æ„ï¼‰</h2><p>ç”±ä¸€ä¸ªï¼Œ<code>appService</code>æä¾›åŸºç¡€æœåŠ¡ï¼Œå¹¶ç®¡ç†æœåŠ¡é—´çš„è°ƒåº¦ï¼Œæ­¤ç§æ–¹å¼æ¯”ç¬¬ä¸€ç§è¦å¥½å¾ˆå¤šï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰ä¸ªé—®é¢˜ï¼Œé¡¶å±‚å¤„ç†æœåŠ¡å…³ç³»ï¼Œæ°¸è¿œæ¯”æœåŠ¡é—´å¤„ç†æœåŠ¡å…³ç³»æ¥çš„å¤æ‚ï¼Œå…·ä½“é—®é¢˜è¯¦è§ä¸Šæ–‡â€œé¡¶å±‚æ³¨å…¥â€</p>
<h2 id="æ ‘å½¢ç»“æ„æ¨¡å—"><a href="#æ ‘å½¢ç»“æ„æ¨¡å—" class="headerlink" title="æ ‘å½¢ç»“æ„æ¨¡å—"></a>æ ‘å½¢ç»“æ„æ¨¡å—</h2><p>è¿™æ˜¯ç†è®ºæœ€ä¼˜çš„ç»“æ„ï¼Œå®ƒçš„ä¼˜åŠ¿ä¸å†èµ˜è¿°ï¼Œä¸Šæ–‡æœ‰æåˆ°</p>
<p>åŠ£åŠ¿æœ‰ä¸€ä¸ªï¼š</p>
<p>è·¨æ¨¡å—å±‚çº§çš„å˜æ›´ï¼Œå®¹æ˜“å½¢æˆå¾ªç¯ä¾èµ–ï¼ˆä¹Ÿä¸å«åŠ£åŠ¿ï¼Œå› ä¸ºæ­¤ç§å˜æ›´å¯¹äºå…¶ä»–æ–¹å¼æ¥è¯´ï¼Œæ˜¯ç¾éš¾ï¼‰</p>
<p>ç†æ¸…è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘ï¼Œæœ‰å¿…è¦åˆ’å‡ºåŠŸèƒ½ç»“æ„å›¾ï¼Œå†å¼€å§‹å¼€å‘ï¼Œæ˜¯ä¸ªå¥½ä¹ æƒ¯ï¼ŒåŒæ—¶ï¼ŒåŠŸèƒ½å±‚çº§å‘ç”Ÿæ”¹å˜ï¼Œåº”è¯¥æ•é”æ„è¯†åˆ°ï¼ŒåŠæ—¶æå‡æœåŠ¡çš„æ¨¡å—å±‚çº§å³å¯</p>
<hr>
<h1 id="ç¼–ç¨‹èŒƒå¼"><a href="#ç¼–ç¨‹èŒƒå¼" class="headerlink" title="ç¼–ç¨‹èŒƒå¼"></a>ç¼–ç¨‹èŒƒå¼</h1><p>é¦–å…ˆï¼Œç¼–ç¨‹èŒƒå¼é™¤äº†å®ç°æ–¹å¼ä¸åŒä»¥å¤–ï¼Œå…¶åŒºåˆ«çš„æ ¹æºåœ¨äº â€“ <strong>å…³æ³¨ç‚¹ä¸åŒ</strong></p>
<ul>
<li>å‡½æ•°çš„å…³æ³¨ç‚¹åœ¨äº â€”â€” å˜åŒ–</li>
<li>é¢å‘å¯¹è±¡çš„å…³æ³¨ç‚¹åœ¨äº â€”â€” ç»“æ„</li>
</ul>
<p>å¯¹äºå‡½æ•°ï¼Œå› ä¸ºç»“æ„æ–¹ä¾¿äºå¤„ç†å˜åŒ–ï¼Œå³è¾“å…¥è¾“å‡ºæ˜¯å¤©ç„¶å…³æ³¨ç‚¹ï¼Œæ‰€ä»¥ â€”â€”</p>
<p>ç®¡ç†<code>çŠ¶æ€</code>å’Œ<code>å‰¯ä½œç”¨</code>å¾ˆé‡è¦</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">c</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> b = <span class="number">2</span>;</span><br><span class="line">  a = <span class="number">2</span>;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">3</span>;</span><br><span class="line">  c = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">return</span> &#123; a, b, c &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œæ•…æ„ç”¨ var æ¥å£°æ˜å˜é‡ï¼Œè®©å¤§å®¶åˆæ›´æ·±çš„ä½“ä¼š</p>
<p>åœ¨å‡½æ•°ä¸­å˜æ›´å‡½æ•°å¤–çš„å˜é‡ â€”â€” <strong>ç ´åäº†å‡½æ•°çš„å°è£…æ€§</strong>ğŸš«</p>
<p>è¿™ç§ç ´åæå…¶å±é™©ï¼Œæ¯”å¦‚ä¸Šä¾‹ï¼Œå¦‚æœå…¶ä»–å‡½æ•°ä¿®æ”¹äº† aï¼Œåœ¨ é‡æ–° èµ‹å€¼ä¹‹å‰ï¼Œä½ çŸ¥é“ a æ˜¯å¤šå°‘ä¹ˆï¼Ÿå¦‚æœå‡½æ•°å¾ˆé•¿ï¼Œä½ å¦‚ä½•ç¡®å®šæœ¬åœ°å˜é‡ a æ˜¯å¦è¦†ç›–å¤–éƒ¨å˜é‡ï¼Ÿ</p>
<p>æ— å°è£…çš„å‡½æ•°ï¼Œä¸å¯èƒ½æœ‰<code>å¯è£…é…æ€§</code>å’Œ<code>å¯è°ƒè¯•æ€§</code></p>
<p>æ‰€ä»¥ï¼Œä½¿ç”¨å‡½æ•°å°è£…é€»è¾‘ï¼Œä¸èƒ½å¼•å…¥ä»»ä½•å‰¯ä½œç”¨ï¼æ³¨æ„ï¼Œè¿™ä¸ªæ˜¯å¼ºåˆ¶çš„ï¼Œåœ¨ä»»ä½•å¤šäººåä½œï¼Œå¤šæ¨¡å—å¤šèµ„æºçš„é¡¹ç›®ä¸­ â€”â€”</p>
<p><strong>å°è£…æ˜¯ç¬¬ä¸€è¦åŠ¡ï¼Œæ›´æ˜¯åŸºæœ¬è¦æ±‚</strong>â—</p>
<p>æ‰€ä»¥ï¼Œä½ å¿…é¡»å°†æ•°æ®ï¼ˆæˆ–è€…è¯´çŠ¶æ€ï¼‰å…¨éƒ¨åŒ…è£¹åœ¨å‡½æ•°å†…éƒ¨ï¼Œä¸å¯ä»¥åœ¨å‡½æ•°å†…ä¿®æ”¹ä»»ä½•å‡½æ•°ä»¥å¤–çš„æ•°æ®ï¼</p>
<p>æ‰€ä»¥ï¼Œå‡½æ•°å¤©ç„¶å­˜åœ¨ä¸€ä¸ªç¼ºç‚¹ â€”â€” å°è£…æ€§éœ€è¦äººä¸ºä¿è¯ï¼ˆå³ä½ éœ€è¦è‡ªå·±è¦æ±‚è‡ªå·±ï¼Œå†™å‡ºæ— å‰¯ä½œç”¨å‡½æ•°ï¼‰</p>
<p>å½“ç„¶ï¼Œè¿˜å­˜åœ¨å¾ˆå¤šä¼˜ç‚¹ â€”â€” åªéœ€è¦é’ˆå¯¹è¾“å…¥è¾“å‡ºæµ‹è¯•ï¼Œæ›´åŠ ç¬¦åˆç‰©ä½“å®é™…è¿è¡Œæƒ…å†µï¼ˆå˜åŒ–æ˜¯å“²å­¦åŸºç¡€ï¼‰</p>
<p>è¿™éƒ¨åˆ†æ²¡æœ‰åŠ é‡ç‚¹ç¬¦å·ï¼Œæ˜¯å› ä¸ºå®ƒä¸é‡è¦ â€”â€” å¯¹ä¸€ä¸ªæ€æƒ³æ–¹æ³•æä¼˜ç¼ºç‚¹ï¼Œåªæœ‰æŒ‡å¯¼æ„ä¹‰ï¼Œå› ä¸ºæ€æƒ³æ–¹æ³•å¯ä»¥ç»¼åˆè¿ç”¨ï¼Œä¸å—é™åˆ¶</p>
<p>å†æ¥çœ‹çœ‹é¢ç›¸å¯¹è±¡ï¼Œæ¥çœ‹çœ‹ç±»ç»“æ„ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span></span>&#123;</span><br><span class="line">  a = <span class="number">1</span></span><br><span class="line">  b = <span class="number">2</span></span><br><span class="line">  c = <span class="number">3</span></span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.changeA()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">changeA</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.a = <span class="number">2</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªç»“æ„ä¸€çœ¼çœ‹å»å°±å…·æœ‰ â€”â€” è‡ªè§£é‡Šæ€§ï¼Œè‡ªå°è£…æ€§</p>
<p>è¿˜æœ‰ä¸€ä¸ªæ¶‰åŠåº”ç”¨é¢†åŸŸçš„ä¼˜åŠ¿ â€”â€” å¯¹è§‚å¿µç³»ç»Ÿçš„æ¨¡æ‹Ÿ â€”â€” è¿™ä¸ªè¯ä¸æ‰“ç€é‡ç¬¦ï¼Œä¸éœ€è¦å¤ªå…³å¿ƒï¼Œç¿»è¯‘è¿‡æ¥å°±æ˜¯ï¼Œå¯ä»¥ç›´è¯‘äººè„‘ä¸­çš„è§‚å¿µï¼ˆåŠ¨ç‰©ï¼Œäººï¼Œè½¦ç­‰ç­‰ï¼‰</p>
<p>ä½†å®ƒä¹Ÿæœ‰éå¸¸ä¸¥é‡çš„é—®é¢˜ â€”â€” åˆå§‹åŒ–ï¼Œè‡ªè§£è€¦éº»çƒ¦ï¼Œç»„åˆéº»çƒ¦</p>
<p>éœ€è¦è¿ç”¨åˆ°å¤§é‡çš„â€™æ„å»ºâ€™ï¼Œâ€™è¿è¡Œâ€™è®¾è®¡æ¨¡å¼ï¼</p>
<p>å¯¹çš„ï¼Œè®¾è®¡æ¨¡å¼çš„é‚£äº›åå­—å°±æ˜¯æ€ä¹ˆæ¥çš„</p>
<p>å…¶å®ï¼Œä½ ä»”ç»†ä¸€æƒ³ï¼Œå°±èƒ½æ˜ç™½ä¸ºä»€ä¹ˆä¼šè¿™æ · â€”â€”</p>
<p>å¦‚æœä½ å…³æ³¨å˜åŒ–ï¼Œæƒ³è¦å¯¹çœŸå®ä¸–ç•Œç›´æ¥æ¨¡æ‹Ÿï¼Œä½ å°±éœ€è¦å¤„ç†é™æ€æ•°æ®ï¼Œéœ€è¦è‡ªå·±å¯¹ä¸€ä¸ªé¢†åŸŸè¿›è¡Œäººä¸ºè§£é‡Š<br>å¦‚æœä½ å…³æ³¨ç»“æ„ï¼Œæƒ³è¦å¯¹äººçš„è§‚å¿µè¿›è¡Œæ¨¡æ‹Ÿï¼Œä½ å°±éœ€è¦å¤„ç†è¿è¡Œæ—¶é—®é¢˜ï¼Œéœ€è¦è‡ªå·±å¤„ç†ä¸€ä¸ªè¿è¡Œæ—¶å¯¹è±¡çš„ç”Ÿæˆé—®é¢˜</p>
<p>é±¼ä¸ç†ŠæŒï¼Œä¸å¯å…¼å¾—ï¼ŒæŒ‰ä½äº†è¿™å¤´ï¼Œé‚£å¤´å°±ä¼šç¿˜èµ·æ¥ï¼Œä½ æŒ‰ä½äº†é‚£å¤´ï¼Œè¿™å¤´å°±ä¼šç¿˜èµ·æ¥</p>
<p>æƒ³è¦åªé€šè¿‡ä¸€ä¸ªç¼–ç¨‹èŒƒå¼è§£å†³æ‰€æœ‰é—®é¢˜ï¼Œå°±åƒç”¨æ‰‹å»æŠ“æ²™å­ï¼Œæœ€åä½ ä»€ä¹ˆéƒ½å¾—ä¸åˆ°</p>
<h2 id="æé™çš„å‡½æ•°å¼ï¼Œé¢å‘å¯¹è±¡"><a href="#æé™çš„å‡½æ•°å¼ï¼Œé¢å‘å¯¹è±¡" class="headerlink" title="æé™çš„å‡½æ•°å¼ï¼Œé¢å‘å¯¹è±¡"></a>æé™çš„å‡½æ•°å¼ï¼Œé¢å‘å¯¹è±¡</h2><p>é€šè¿‡å‡½æ•°å’Œå¯¹è±¡ï¼ˆæ³¨æ„æ˜¯å¯¹è±¡ï¼Œç±»æ˜¯æŠ½è±¡çš„ï¼Œè§‚å¿µä¸­çš„å¯¹è±¡ï¼‰çš„åˆ†æï¼Œå¾ˆå®¹æ˜“å‘ç°ä»–ä»¬çš„ä¼˜åŠ¿</p>
<p>å‡½æ•° â€”â€” æµ‹è¯•ç®€å•ï¼Œæ¨¡æ‹ŸçœŸå®ï¼ˆæ•ˆç‡é«˜ï¼‰</p>
<p>å¯¹è±¡ â€”â€” è‡ªå°è£…æ€§ï¼Œæ¨¡æ‹Ÿè§‚å¿µï¼ˆç»§æ‰¿å¤šæ€ï¼‰</p>
<p>å°†ä¸¤è€…å‘æ‰¬å…‰å¤§ï¼Œæ›´åŠ æé™åœ°ä½¿ç”¨ï¼Œä½ ä¼šå¾—åˆ°ä»¥ä¸‹è¡ç”ŸèŒƒå¼ï¼š</p>
<p>ç®¡é“/æµ</p>
<p>æ—¢ç„¶å‡½æ•°åªéœ€è¦å¯¹è¾“å…¥è¾“å‡ºè¿›è¡Œæµ‹è¯•ï¼Œé‚£ä¹ˆï¼Œæˆ‘å°†æ— æ•°å‡½æ•°ç”¨å‡½æ•°ä¸²è”èµ·æ¥ï¼Œå°±å½¢æˆäº†åªæœ‰ç»Ÿä¸€è¾“å…¥è¾“å‡ºçš„ç»“æ„</p>
<p>å¬ä¸æ‡‚ï¼Ÿæ¢ä¸ªè¯´æ³• â€”â€”</p>
<p>åªéœ€è¦ e2e æµ‹è¯•ï¼Œä¸éœ€è¦å•å…ƒæµ‹è¯•ï¼</p>
<p>å¦‚æœæˆ‘åŠ ä¸Šç±»å‹æ ¡éªŒï¼Œå°±å¯ä»¥æ„é€ å‡º â€”â€” <strong>ç†æƒ³æ—  bug ç³»ç»Ÿ</strong></p>
<p>è¿™æ ·çš„è¯ï¼Œä½ å°±åªå‰©è°ƒè¯•ï¼Œæ²¡æœ‰æµ‹è¯•ï¼ˆå¦‚æœé¡¶å±‚åŠ ä¸ªæ ¡éªŒå–ä»£ e2e çš„è¯ï¼‰</p>
<p>è€Œä¸”ï¼Œè¿˜æœ‰æ¨¡å¼è¯†åˆ«ï¼Œå¼‚æ­¥äº²å’Œæ€§ç­‰å¾ˆå¤šå¥½å¤„ï¼Œç”šè‡³å¯ä»¥è‡ªå»ºè®¾è®¡è¯­è¨€ï¼ˆæ¯”å¦‚éº»çœè€æ•™æã€Šå¦‚ä½•è®¾è®¡è®¡ç®—æœºè¯­è¨€ã€‹å°±æ˜¯ä»¥ lisp ä½œä¸ºæ ‡å‡†ï¼‰</p>
<p>åœ¨ js ä¸­ï¼Œ Cycle.js å’Œ Rxjs å°±æ˜¯æé™çš„ç®¡é“é£æ ¼å‡½æ•°å¼ï¼Œè¿˜æœ‰å¤§å®¶ç†Ÿæ‚‰å¹¶ä¸”è®¨åŒçš„ Node.js çš„ Stream ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå³ä¾¿ä»–æ˜¯ç”¨ ç±» å®ç°çš„ï¼Œéª¨å­é‡Œä¹Ÿæ˜¯æµ“æµ“çš„å‡½æ•°å¼</p>
<p>åˆ†æä¸€ä¸‹è¿™æ ·çš„ç³»ç»Ÿï¼Œä½ ä¼šå‘ç° â€”â€”</p>
<p>å®ƒé¦–å…ˆå…³æ³¨åº•å±‚é€»è¾‘ â€”â€” ä¹Ÿå°±æ˜¯ or/c , is-aï¼Œand/cï¼Œnot/c è¿™æ ·çš„å‡½æ•°ï¼Œæœ€åå†ç»„è£…</p>
<p>æŒ‰ç…§èŒƒç•´å­¦çš„è¯­è¨€ï¼ˆå°±æ˜¯å‡½æ•°å¼çš„æ•°å­¦è§£é‡Šï¼Œä¸æƒ³çœ‹è¿™ä¸ªå¯ä»¥ä¸çœ‹ï¼Œåªæ˜¯è¡¥å……è¯´æ˜ï¼‰ï¼š</p>
<p><img src="https://pic3.zhimg.com/80/v2-075c3b7e4f9e34c6f81a0d865f53096a_720w.jpg" alt="èŒƒç•´å­¦"></p>
<p>u of i2ï¼Œi2 of g çš„è®²æ³•ï¼Œä¸å®ƒçš„çœŸå®è¿è¡Œæ–¹å‘ï¼Œæ˜¯ç›¸åçš„ï¼</p>
<p>å‡½æ•°çš„ç»„åˆæ–¹å¼ï¼Œä¸å¼€å‘ç›®æ ‡çš„æ„å»ºæ–¹å¼ï¼Œä¹Ÿæ˜¯ç›¸åçš„ï¼</p>
<p>å®ƒçš„æ„å»ºæ–¹æ³•å«åš â€”â€” <strong>è‡ªåº•å‘ä¸Š</strong></p>
<p>è¿™ä¹Ÿæ˜¯ä¸ºå•¥ä½ åœ¨å¾ˆå¤š JS çš„åº“ä¸­å‘ç°äº†å¥½å¤šé›¶é›¶ç¢ç¢çš„ä¸œè¥¿ï¼Œè¿˜æœ‰ä¸ºä½•ä¼šæœ‰ lodashï¼Œramda ç­‰ç²’åº¦éå¸¸å°çš„åº“äº†</p>
<p>åœ¨æé™å‡½æ•°å¼ç¼–ç¨‹ä¸‹ â€”â€”</p>
<p>æˆ‘å…ˆåšå‡ºæ¥ï¼Œå†çœ‹èƒ½å¹²ä»€ä¹ˆï¼Œæ¯”å…ˆç¡®å®šå¹²ä»€ä¹ˆï¼Œå†åšï¼Œæ›´é‡è¦ï¼</p>
<p>å› ä¸ºè¿™éƒ¨åˆ†ï¼Œå¯ä»¥ç¬¬ä¸‰æ–¹ç”šè‡³å®˜æ–¹è‡ªå·±æä¾›ï¼</p>
<p>æ‰€ä»¥ï¼Œ<strong>å‡½æ•°å¼æ˜¯åº“çš„ç¬¬ä¸€ä¼˜å…ˆçº§æ„å»ºèŒƒå¼</strong>ï¼å› ä¸ºä½œä¸ºåº“çš„æä¾›è€…ï¼Œä½ æ ¹æœ¬ä¸å¯èƒ½é¢„æµ‹ç”¨æˆ·ä¼šç”¨è¿™ä¸ªåº“æ¥å¹²ä»€ä¹ˆ</p>
<h2 id="é¢†åŸŸæ¨¡å—"><a href="#é¢†åŸŸæ¨¡å—" class="headerlink" title="é¢†åŸŸæ¨¡å—"></a>é¢†åŸŸæ¨¡å—</h2><p>å‡½æ•°å¼å¯ä»¥å°†å…¶ä¼˜åŠ¿é€šè¿‡ç®¡é“å‘æŒ¥åˆ°æè‡´ï¼Œé¢å‘å¯¹è±¡ä¸€æ ·å¯ä»¥å°†å…¶ä¼˜åŠ¿å‘æŒ¥åˆ°æè‡´ï¼Œè¿™ä¾¿æ˜¯é¢†åŸŸæ¨¡å—</p>
<p>é¢†åŸŸï¼Œå°±æ˜¯ä¸€ç³»åˆ—ç›¸åŒç›®çš„ï¼Œç›¸åŒåŠŸèƒ½çš„èµ„æºçš„é›†åˆ</p>
<p>æ¯”å¦‚ï¼Œå­¦æ ¡ï¼Œå…¬å¸ï¼Œè¿™ä¸¤ä¸ªç±»ï¼Œå¦‚æœåˆ†åˆ«å°è£…äº†å¤§é‡çš„å…¶ä»–ç±»ä»¥åŠç›¸å…³èµ„æºï¼Œå…±åŒæ„æˆä¸€ä¸ªæ•´ä½“ï¼Œè‡ªè¡Œç®¡ç†ï¼Œè‡ªè¡Œæµ‹è¯•ï¼Œç”šè‡³è‡ªè¡Œæ„å»ºå‘å¸ƒï¼Œå¯¹å¤–æä¾›ç»Ÿä¸€çš„æ¥å£ï¼Œé‚£è¿™å°±æ˜¯é¢†åŸŸ</p>
<p>è¿™ä¹ˆè¯´ï¼Œå¦‚æœå®ç°äº†ä¸€ä¸ªç±»å’Œå…¶ç›¸å…³èµ„æºçš„è‡ªè¡Œç®¡ç†ï¼Œè‡ªè¡Œæµ‹è¯•ï¼Œè¿™å°±æ˜¯ â€”â€” <strong>DDD</strong></p>
<p>å¦‚æœå®ç°äº†å¯¹å…¶çš„è‡ªè¡Œæ„å»ºå‘å¸ƒï¼Œè¿™å°±æ˜¯ â€”â€” <strong>å¾®æœåŠ¡</strong></p>
<p>è¿™ç§æ¨¡å‹ç»™äº†åº”ç”¨è§„æ¨¡åŒ–çš„èƒ½åŠ› â€”â€” æ¨ªå‘ï¼Œçºµå‘æ‰©å±•èƒ½åŠ›</p>
<p>è¿˜æœ‰é«˜å¯ç”¨ï¼Œå³ç±»çš„ç»„åˆé—´çš„æ¾æ•£è€¦åˆèŒƒå¼</p>
<p>å¯¹äºè¿™æ ·çš„èŒƒå¼ï¼Œä½ é¦–å…ˆæ€è€ƒçš„æ˜¯ â€”â€” ä½ è¦åšä»€ä¹ˆï¼</p>
<p>è¿™å°±æ˜¯ â€”â€”</p>
<p>**è¿™ç§æ¨¡å‹ç»™äº†åº”ç”¨è§„æ¨¡åŒ–çš„èƒ½åŠ› â€”â€” æ¨ªå‘ï¼Œçºµå‘æ‰©å±•èƒ½åŠ›</p>
<p>è¿˜æœ‰é«˜å¯ç”¨ï¼Œå³ç±»çš„ç»„åˆé—´çš„æ¾æ•£è€¦åˆèŒƒå¼</p>
<p>å¯¹äºè¿™æ ·çš„èŒƒå¼ï¼Œä½ é¦–å…ˆæ€è€ƒçš„æ˜¯ â€”â€” ä½ è¦åšä»€ä¹ˆï¼</p>
<p>è¿™å°±æ˜¯ â€”â€” <strong>è‡ªé¡¶å‘ä¸‹</strong></p>
<ul>
<li>æˆ‘è¦åšä»€ä¹ˆåº”ç”¨ï¼Ÿ</li>
<li>è¿™ä¸ªåº”ç”¨æœ‰å“ªäº›åŠŸèƒ½ï¼Ÿ</li>
<li>æˆ‘è¯¥æ€ä¹ˆç»„ç»‡æˆ‘çš„èµ„æºå’Œä»£ç ï¼Ÿ</li>
<li>è¯¥æ€ä¹ˆå’Œå…¶ä»–èŒèƒ½åˆä½œï¼Ÿ</li>
<li>å·¥æœŸéœ€è¦å¤šä¹…ï¼Ÿ</li>
</ul>
<p>ç°å®å‘Šè¯‰ä½ ï¼Œå•ç”¨ä»»ä½•ä¸€ç§éƒ½ä¸è¡Œ<br>å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¸æ­¢æœ‰è‡ªåº•å‘ä¸Šå°è£…çš„å·¥å…·ï¼Œè¿˜æœ‰è‡ªé¡¶å‘ä¸‹è®¾è®¡çš„ç»“æ„</p>
<p>äº§å“ç»ç†ä¸ä¼šæŠŠè¦ç”¨å¤šå°‘ä¸ª isObject åˆ¤æ–­å‘Šè¯‰ä½ ï¼Œä»–åªä¼šå‘Šè¯‰ä½ åº”ç”¨æœ‰å“ªäº›åŠŸèƒ½</p>
<p>åŒç†ï¼Œå†ä¸°å¯Œç»†è‡´çš„åŠŸèƒ½åˆ’åˆ†ï¼Œæ²¡æœ‰åº•å±‚ä¸€ä¸ªä¸ªå·¥å…·å‡½æ•°ï¼Œä¹Ÿå®Œæˆä¸äº†ä»»ä½•å·¥ä½œ</p>
<p>è¿™ä¸ªä¸–ç•Œçš„ç¡®å¤„åœ¨å˜åŒ–ä¹‹ä¸­ï¼Œä¸–ç•Œçš„æœ¬è´¨å°±æ˜¯å˜åŒ–ï¼Œå°±æ˜¯å‡½æ•°ï¼Œä½†æ˜¯è½¯ä»¶æ˜¯äº¤ç»™äººç”¨ï¼Œäº¤ç»™äººå¼€å‘çš„</p>
<p><strong>è§‚å¿µç³»ç»Ÿå’Œå®é™…è¿è¡Œï¼Œç¼ºä¸€ä¸å¯ï¼</strong></p>
<p>å‡¡æ˜¯åŠ¨ä¸åŠ¨å°±è·Ÿä½ è¯´æŸæŸæ¡†æ¶å‡½æ•°å¼ï¼ŒæŸæŸåº”ç”¨è¦ç”¨å‡½æ•°å¼å¼€å‘çš„äººï¼Œå¤§å¤šéƒ½å­¦è‰ºä¸ç²¾ï¼Œæ ¹æœ¬æ²¡æœ‰ç†è§£è¿™äº›æ¦‚å¿µçš„æœ¬è´¨</p>
<p>äººç±»ç¼–ç¨‹å†å²å¦‚æ­¤ä¹…è¿œï¼ŒçœŸæ­£çš„é¢å‘ç”¨æˆ·çš„çº¯ç²¹å‡½æ•°å¼æ—  bug ç³»ç»Ÿï¼Œè¿˜æ²¡æœ‰å‡ºç°è¿‡â€¦â€¦</p>
<p>å½“ç„¶ï¼Œå…¶åœ¨äººå·¥æ™ºèƒ½ï¼Œç§‘ç ”ç­‰é¢†åŸŸæœ‰æ— å¯æ›¿ä»£çš„ä½œç”¨ã€‚ä¸è¿‡ï¼Œæ˜¯äººï¼Œå°±æœ‰ç»„ç»‡ï¼Œæœ‰å…¬å¸ï¼Œè¿›è€Œæœ‰èŒèƒ½åˆ’åˆ†ï¼Œå¤§å®¶åªä¼šé€šè¿‡è§‚å¿µç³»ç»Ÿè¿›è¡Œäº¤æµ â€”â€” ä½ æ‰€è¯´çš„æ¯ä¸€ä¸ªè¯æ±‡ï¼Œéƒ½æ˜¯è§‚å¿µï¼Œéƒ½æ˜¯ç±»ï¼</p>
<h2 id="React-æå€¡å‡½æ•°å¼"><a href="#React-æå€¡å‡½æ•°å¼" class="headerlink" title="React æå€¡å‡½æ•°å¼"></a>React æå€¡å‡½æ•°å¼</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">OOStyle</span></span>&#123;</span><br><span class="line">  name: string</span><br><span class="line">  password: string</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">  <span class="keyword">get</span> <span class="title">nameStr</span>()&#123;&#125;</span><br><span class="line">  <span class="function"><span class="title">changePassword</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">OOStyleFactory</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> OOStyle(<span class="comment">/* ... */</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ˜¯é¢å‘å¯¹è±¡é£æ ¼çš„å†™æ³•ï¼ˆæ³¨æ„ï¼Œåªæ˜¯é£æ ¼ï¼Œä¸æ˜¯æŒ‡åªæœ‰è¿™ä¸ªæ˜¯é¢å‘å¯¹è±¡ï¼‰</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">funcStyle</span>(<span class="params">name,password</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    name,</span><br><span class="line">    password,</span><br><span class="line">    <span class="function"><span class="title">getName</span>(<span class="params"></span>)</span>&#123;&#125;,</span><br><span class="line">    <span class="function"><span class="title">changePassword</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªæ˜¯å‡½æ•°é£æ ¼çš„å†™æ³•ï¼ˆæ³¨æ„ï¼Œè¿™åªæ˜¯é£æ ¼ï¼Œè¿™åŒæ—¶ä¹Ÿæ˜¯é¢å‘å¯¹è±¡ï¼‰</p>
<p>è¿™ä¸¤ç§é£æ ¼çš„é€»è¾‘æ˜¯ä¸€æ ·çš„ï¼Œå”¯ä¸€çš„åŒºåˆ«ï¼Œåªåœ¨äº<code>å¯è¯»æ€§</code></p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ä¸è¦ç†è§£é”™ï¼Œè¿™é‡Œçš„å¯è¯»æ€§ï¼Œè¿˜åŒ…æ‹¬å¯¹äºç¨‹åºè€Œè¨€çš„å¯è¯»æ€§ï¼Œå³ï¼š</span><br><span class="line">è‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£ï¼Œè‡ªåŠ¨ç”Ÿæˆä»£ç ç»“æ„</span><br><span class="line">æˆ–è€…ç”±äº§å“è®¾è®¡ç›´æ¥å¯¼å‡ºä»£ç æ¡†æ¶ç­‰åŠŸèƒ½</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯å‡½æ•°é£æ ¼ç‰ºç‰²äº†å¯è¯»æ€§ï¼Œå¾—åˆ°äº†çµæ´»æ€§è¿™ä¸€ç‚¹ï¼Œä¹Ÿæ˜¯å€¼å¾—è€ƒè™‘çš„</p>
<p>ç¼–ç¨‹å…¶å®æ˜¯ä¸ªæƒè¡¡è¿‡ç¨‹ï¼Œå¯¹äºæˆ‘æ¥è¯´ï¼Œæˆ‘æ„¿æ„</p>
<ul>
<li>åœ¨å¤„ç†å¤æ‚ç»“æ„æ—¶ä½¿ç”¨ é¢å‘å¯¹è±¡ é£æ ¼</li>
<li>åœ¨å¤„ç†å¤æ‚é€»è¾‘æ—¶ï¼Œä½¿ç”¨ å‡½æ•° é£æ ¼<br>å„å–æ‰€é•¿ï¼Œæ‰æ˜¯æœ€ä½³æ–¹æ¡ˆï¼</li>
</ul>
<h3 id="Redux"><a href="#Redux" class="headerlink" title="Redux"></a>Redux</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// redux reducer</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">todoApp</span>(<span class="params">state, action</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> state === <span class="string">&#x27;undefined&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> initialState</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¿™é‡Œæš‚ä¸å¤„ç†ä»»ä½• actionï¼Œ</span></span><br><span class="line">  <span class="comment">// ä»…è¿”å›ä¼ å…¥çš„ stateã€‚</span></span><br><span class="line">  <span class="keyword">return</span> state</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™å…¶å®å°±æ˜¯ç”¨å‡½æ•°é£æ ¼å®ç°çš„ é¢å‘å¯¹è±¡ å°è£…ï¼Œæ²¡æœ‰è¿™ä¸€æ­¥ï¼Œä½ æ— æ³•è¿›è¡Œé¡¶å±‚è®¾è®¡ï¼</p>
<p>ç”¨ç±»çš„å†™æ³•æ¥è½¬æ¢ä¸€ä¸‹ <code>redux</code> çš„å†™æ³•ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MonistRedux</span></span>&#123;</span><br><span class="line">  <span class="comment">// initialï¼Œæƒ³è¦ä¸å˜æ€§å¯ä»¥å°† name,password ç»„åˆä¸º state</span></span><br><span class="line">  name = <span class="string">&#x27;&#x27;</span></span><br><span class="line">  password = <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="comment">// æƒ°æ€§åˆå§‹åŒ–ï¼ˆé…åˆå·¥å‚ï¼‰</span></span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.name = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="built_in">this</span>.password = <span class="string">&#x27;&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// action</span></span><br><span class="line">  <span class="function"><span class="title">changeName</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="åªæœ‰-å‡½æ•°-çš„å°è£…æ€§æ‰å—å‰¯ä½œç”¨é™åˆ¶"><a href="#åªæœ‰-å‡½æ•°-çš„å°è£…æ€§æ‰å—å‰¯ä½œç”¨é™åˆ¶" class="headerlink" title="åªæœ‰ å‡½æ•° çš„å°è£…æ€§æ‰å—å‰¯ä½œç”¨é™åˆ¶"></a>åªæœ‰ å‡½æ•° çš„å°è£…æ€§æ‰å—å‰¯ä½œç”¨é™åˆ¶</h3><p>æ³¨æ„è¿™ä¸€ç‚¹ï¼ŒReact ç¨‹åºå‘˜éå¸¸å®¹æ˜“çŠ¯çš„é”™è¯¯ï¼Œå°±æ˜¯åˆ°äº† class é‡Œé¢è¿˜åœ¨æƒ³çº¯åº¦çš„é—®é¢˜ï¼Œæ¨ä¸å¾—å°†æ¯ä¸ªæˆå‘˜å‡½æ•°éƒ½å˜æˆçº¯å‡½æ•°</p>
<p>æ²¡å¿…è¦ä»¥è¯å®³æ„ï¼Œéœ€è¦èæ±‡è´¯é€š</p>
<p>åŒæ ·ï¼Œä»¥ä¸Šä¾‹å­ä¹Ÿè¯´æ˜ï¼Œå¦‚æœä½ çš„æŠ€æœ¯æ ˆæä¾›ç›´æ¥ç”Ÿæˆå¯¹è±¡çš„æ–¹æ¡ˆ â€”â€” <strong>ä½ å¯ä»¥åªç”¨å‡½æ•°ç›´æ¥å®Œæˆé¢å‘å¯¹è±¡å’Œå‡½æ•°å¼çš„è®¾è®¡</strong></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ImAClass</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘å°±è¯´è¿™ä¸ªæ˜¯ç±»ï¼ä¸ºä»€ä¹ˆä¸è¡Œï¼Ÿ</p>
<p>ä»–è¦æˆå‘˜å˜é‡æœ‰æˆå‘˜å˜é‡ï¼Œè¦æˆå‘˜å‡½æ•°æœ‰æˆå‘˜å‡½æ•°ï¼Œå°è£…ï¼Œå¤šæ€ï¼Œå“ªä¸ªç‰¹æ€§æ²¡æœ‰ï¼Ÿ</p>
<p>ä»€ä¹ˆï¼Ÿç»§æ‰¿ï¼Ÿè¿™å¹´å¤´è¿˜æœ‰æé¢å‘å¯¹è±¡çš„æç»§æ‰¿ï¼Ÿç»„åˆä¼˜äºç»§æ‰¿æ˜¯å¸¸è¯†ï¼</p>
<p>æŠ›å¼ƒäº†ç»§æ‰¿ï¼Œä½ éœ€è¦<code>this</code>ä¹ˆï¼Ÿä½ ä¸éœ€è¦ï¼Œæœ¬æ¥ä½ å°±ä¸éœ€è¦<code>this</code>ï¼ˆé™¤äº†è£…é¥°å™¨ç­‰é™„åŠ é€»è¾‘ï¼Œä½†æ˜¯å‡½æ•°æœ¬èº«å°±èƒ½å¤Ÿå®ç°é™„åŠ é€»è¾‘ â€”â€” é«˜é˜¶å‡½æ•°ï¼‰</p>
<p>åŒæ ·ï¼Œä½ ä¹Ÿå¯ä»¥ç»¼åˆé¢å‘å¯¹è±¡å’Œå‡½æ•°å¼çš„ç‰¹ç‚¹ï¼Œå„å–æ‰€é•¿ï¼Œå¯¹ä½ çš„é¡¹ç›®è¿›è¡Œé¡¶å±‚æ„å»ºå’Œåº•å±‚å®ç°</p>
<p>è¿™ä¹Ÿæ˜¯å¾ˆæ–¹ä¾¿çš„</p>
<h2 id="Hooksï¼ŒCompositionï¼ŒngModule"><a href="#Hooksï¼ŒCompositionï¼ŒngModule" class="headerlink" title="Hooksï¼ŒCompositionï¼ŒngModule"></a>Hooksï¼ŒCompositionï¼ŒngModule</h2><p>æˆ‘ä»¬æ¥çœ‹çœ‹ä¸Šé¢çš„é‚£ä¸ªå‡½æ•°é£æ ¼çš„ç±»</p>
<p>åƒä¸åƒä»€ä¹ˆä¸œè¥¿ï¼Ÿ</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useThisClass</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [val1,setVal1] = useState(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">const</span> [val2,setVal2] = useState(<span class="number">0</span>)</span><br><span class="line">  useEffect(<span class="function">()=&gt;</span>&#123;&#125;,[])</span><br><span class="line">  <span class="keyword">const</span> otherObject = useOtherClass()</span><br><span class="line">  <span class="keyword">return</span> &#123;val1,setVal1,val2,setVal2,otherObject&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Hooks æ­å–œå„ä½ï¼Œç”¨å¾—å¼€å¿ƒï¼</p>
<p>ä»¥ React ä¸ºä¾‹ï¼Œè€ä¸€ä»£çš„ React åœ¨ ç»„ä»¶ç»“æ„ä¸Šæ˜¯ç®¡é“ï¼Œä¹Ÿå°±æ˜¯å•å‘æ•°æ®æµï¼Œä½†æ˜¯å¯¹äºæˆ‘ä»¬è¿™äº›ä½¿ç”¨è€…æ¥è¯´ï¼Œæˆ‘ä»¬å†™çš„é€»è¾‘ï¼ŒåŸºæœ¬ä¸Šæ˜¯æ”¾å…»çŠ¶æ€ï¼Œæ ¹æœ¬æ²¡æœ‰æ¥å…¥ React çš„ä½“ç³»ï¼Œå®Œå…¨æ¸¸ç¦»åœ¨å‡½æ•°å¼é£æ ¼ä»¥å¤–ï¼š</p>
<p><img src="https://pic2.zhimg.com/80/v2-4e499fc0f8b9bfc2ed7b21c2ec1604dd_720w.jpg" alt="è€ä¸€ä»£çš„ React"></p>
<p>æ¢å¥è¯æ¥è¯´ï¼Œåªæœ‰ React å†™çš„ä»£ç æ‰å«å‡½æ•°å¼é£æ ¼ï¼Œä½ å†™çš„é¡¶å¤šå«å‡½æ•°ï¼</p>
<p>ä½ æ²¡æœ‰åŠæ³•æŠŠé€»è¾‘å†™åœ¨ React çš„ç»„ä»¶ä¹‹å¤–ï¼Œæ³¨æ„ï¼Œæ˜¯å®Œå…¨æ²¡æœ‰åŠæ³•ï¼</p>
<p>å¥½åŠï¼Œæˆ‘é€»è¾‘å…¨éƒ¨å†™åœ¨é¡¶å±‚ç»„ä»¶ï¼Œé‚£ä¸å°±è¡Œäº†ï¼Ÿ</p>
<p><img src="https://pic4.zhimg.com/80/v2-07e9326d1abf8af509f2fa86320617cf_1440w.jpg" alt="æ–°ä¸€ä»£çš„ React"></p>
<p>ï¼ˆå…¶ä¸­ <code>s/a</code> æŒ‡çš„æ˜¯ <code>state</code>ï¼Œ<code>action</code>ï¼‰</p>
<p>ä¸ºä»€ä¹ˆè¦æœ‰ <code>state</code>ï¼Œ<code>action</code>ï¼Ÿ</p>
<p>ä¸ºä»€ä¹ˆè¦åœ¨æ¯ä¸ªç»„ä»¶é‡Œç”¨ <code>s/a</code> ï¼Ÿ</p>
<p><code>action</code> å…¶å®æ˜¯ç”¨å‘½ä»¤æ¨¡å¼ï¼Œå°†é€»è¾‘å¤å†™ä¸ºçŠ¶æ€ï¼Œä»¥ä¾¿ <code>Context</code> ä¼ é€’ï¼Œä¸ºä½•ï¼Ÿ</p>
<p>å› ä¸ºç”Ÿå‘½å‘¨æœŸåœ¨ç»„ä»¶é‡Œï¼Œ<code>setState</code>åœ¨ç»„ä»¶çš„<code>this</code>ä¸Š</p>
<p>æ¢å¥è¯è¯´ï¼Œæ¡†æ¶æ²¡æœ‰æä¾›ç»™ä½ ï¼Œå°†ç”¨æˆ·ä»£ç é™„åŠ äºæ¡†æ¶ä¹‹ä¸Šçš„èƒ½åŠ›ï¼</p>
<p>è¿™ä¸ªèƒ½åŠ›ï¼Œå«åš <code>IOC</code> æ§åˆ¶åè½¬ï¼Œå³ æ¡†æ¶å°†åŠŸèƒ½æ§åˆ¶æƒç§»äº¤åˆ°ä½ çš„æ‰‹ä¸Š</p>
<p>ä¸è¦æŠŠè¿™ä¸ªç±» <code>Redux</code>å¼€å‘æ¨¡å¼ä½œä¸ºæœ€è‡ªç„¶çš„å¼€å‘æ–¹å¼ï¼Œå¦åˆ™ä½ ä¼šéå¸¸ç—›è‹¦ï¼</p>
<h2 id="åªæœ‰é›†æˆåº¦ä¸é«˜çš„ç³»ç»Ÿï¼Œæ‰éœ€è¦ä¸­ä»‹æ¨¡å¼ï¼Œæ‰éœ€è¦-MVC"><a href="#åªæœ‰é›†æˆåº¦ä¸é«˜çš„ç³»ç»Ÿï¼Œæ‰éœ€è¦ä¸­ä»‹æ¨¡å¼ï¼Œæ‰éœ€è¦-MVC" class="headerlink" title="åªæœ‰é›†æˆåº¦ä¸é«˜çš„ç³»ç»Ÿï¼Œæ‰éœ€è¦ä¸­ä»‹æ¨¡å¼ï¼Œæ‰éœ€è¦ MVC"></a>åªæœ‰é›†æˆåº¦ä¸é«˜çš„ç³»ç»Ÿï¼Œæ‰éœ€è¦ä¸­ä»‹æ¨¡å¼ï¼Œæ‰éœ€è¦ MVC</h2><p>ä¹‹å‰çš„ <code>React/Vue</code> é›†æˆåº¦ä¸é«˜ï¼Œæ²¡æœ‰ <code>Redux</code> ä½œä¸ºä¸­ä»‹è€… <code>Controller</code>ï¼Œä½ æ— æ³•å°†ç”¨æˆ·æ€ä»£ç åœ¨æ¶æ„å±‚çº§å’Œ <code>React/Vue</code> äº§ç”Ÿè”ç³»ï¼Œå¹¶ä¸”è¿™ä¸ªå±‚çº§å¤©ç„¶åº”è¯¥ç”¨é¢†åŸŸæ¨¡å—çš„æ€æƒ³æ–¹æ³•æ¥å¤„ç†é—®é¢˜</p>
<p>å› ä¸º<strong>æ¡†æ¶æ²¡æœ‰è¿™ä¸ªèƒ½åŠ›</strong>ï¼Œæ‰€ä»¥ä½ æ‰éœ€è¦è¿™äº›å·¥å…·</p>
<p>æ‰€è°“çš„çŠ¶æ€ç®¡ç†ï¼Œæ‰€è°“çš„å•ä¸€ <code>Store</code> ï¼Œéƒ½æ˜¯æ²¡æœ‰<code>IOC</code>çš„å¦¥åä¹‹ä¸¾ï¼Œå¹¶ä¸”æ˜¯åœ¨å®Œå…¨æŠ›å¼ƒé¢å‘å¯¹è±¡æ€æƒ³çš„åŸºç¡€ä¸Šå¼ºè¡Œç”¨å‡½æ•°å¼è¯­è¨€è§£é‡Šçš„åæœï¼Œæ˜¯ä¸€ç§ç•¸å½¢çš„æŠ€æœ¯äº§ç‰©ï¼Œæ˜¯æ¡†æ¶æœªè¾¾åˆ°æœ€ç»ˆå½¢æ€ä¹‹å‰çš„ä¸´æ—¶æ–¹æ¡ˆï¼Œä¸è¦ä½œä¸ºæ ¸å¿ƒæŠ€æœ¯å»å­¦ä¹ ï¼Œè¿™äº›ä¸œè¥¿ä¸æ˜¯æ ¸å¿ƒæŠ€æœ¯ï¼</p>
<p>å›å¤´çœ‹çœ‹ <code>React</code> é‚£äº›æš§æ˜§çš„è¯è¯­ï¼Œæœ‰äº›å€¼å¾—ç©å‘³ï¼š</p>
<ul>
<li><code>Hook</code> ä½¿ä½ åœ¨æ— éœ€ä¿®æ”¹ç»„ä»¶ç»“æ„çš„æƒ…å†µä¸‹å¤ç”¨çŠ¶æ€é€»è¾‘ ï¼ˆæ³¨æ„ï¼æ˜¯çŠ¶æ€é€»è¾‘ï¼Œä¸æ˜¯çŠ¶æ€ï¼Œæ˜¯çŠ¶æ€é€»è¾‘ä¸€èµ·å¤ç”¨ï¼Œä¸æ˜¯çŠ¶æ€å¤ç”¨ï¼‰</li>
<li>æˆ‘ä»¬æ¨èç”¨ è‡ªå®šä¹‰<code>hooks</code> æ¢ç´¢æ›´å¤šå¯èƒ½</li>
<li>æä¾›æ¸è¿›å¼ç­–ç•¥ï¼Œæä¾› <code>useReducer</code> å®ç°å¤§å¯¹è±¡æ“ä½œï¼ˆå¥½çš„é¢†åŸŸå°è£…å“ªæ¥çš„æ“ä½œå¤§å¯¹è±¡ï¼Ÿï¼‰</li>
</ul>
<p>ä»–å†³å£ä¸æ é¢å‘å¯¹è±¡ï¼Œé¢†åŸŸé©±åŠ¨ï¼Œå’Œä¹‹å‰çš„è®¾è®¡å¤±è¯¯ï¼Œæ˜¯å› ä¸ºä»–éœ€è¦é¡¾åŠå½±å“å’Œç¤¾åŒºç”Ÿæ€ï¼Œä½†æ˜¯ä½¿ç”¨è€…ä¸è¦è¢«è¿™äº›æ¬ºéª—ï¼</p>
<p>å½“ä½ æœ‰äº† <code>hooks</code>ï¼Œ<code>Composition</code> ï¼Œ<code>Service/Module</code> çš„æ—¶å€™ï¼Œä½ åº”è¯¥ä¸»åŠ¨æŠ›å¼ƒæ‰€æœ‰ç±»ä¼¼</p>
<ul>
<li>çŠ¶æ€ç®¡ç†</li>
<li>ä¸€å®šè¦å†™çº¯å‡½æ•°</li>
<li>å‰¯ä½œç”¨è¦ä¸€èµ·å¤„ç†</li>
<li>ä¸€å®šè¦ä¿è¯ä¸å˜å½¢</li>
</ul>
<p>è¿™ä¹‹ç±»çš„æ‰€æœ‰è¨€è®ºï¼Œå› ä¸ºåœ¨ä½ æ‰‹ä¸Šï¼Œä¸ä»…ä»…åªæœ‰å‡½æ•°å¼ä¸€ä»¶æ­¦å™¨</p>
<p>ä½ è¿˜æœ‰é¢å‘å¯¹è±¡å’Œé¢†åŸŸé©±åŠ¨</p>
<p>ç”¨é¢†åŸŸé©±åŠ¨è§£å†³é«˜å±‚çº§é—®é¢˜ï¼Œç”¨å‡½æ•°å¼è§£å†³ä½å±‚çº§é—®é¢˜ï¼Œæ‰æ˜¯æœ€ä½³å¼€å‘èŒƒå¼</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå‡½æ•°å¼å’Œé¢å‘å¯¹è±¡ï¼Œæ²¡æœ‰å¥½åï¼Œä»–ä»¬åªæ˜¯ä¸¤ä¸ªå…³æ³¨ç‚¹ä¸åŒçš„æ€æƒ³æ–¹æ³•è€Œå·²</p>
<p>ä½ è¦æ˜¯è¢«è¿™ç§æ€æƒ³æ–¹æ³•å½±å“ï¼Œçœ¼é‡Œåªæœ‰å¯¹é”™ â€”â€”</p>
<h2 id="å®é™…ä¸Šæ˜¯è¢«å¿½æ‚ äº†"><a href="#å®é™…ä¸Šæ˜¯è¢«å¿½æ‚ äº†" class="headerlink" title="å®é™…ä¸Šæ˜¯è¢«å¿½æ‚ äº†"></a>å®é™…ä¸Šæ˜¯è¢«å¿½æ‚ äº†</h2><hr>
<h1 id="ç®¡é“é£æ ¼çš„å‡½æ•°å¼ï¼ˆunidirectional-network-å•é¡¹æ•°æ®æµï¼‰"><a href="#ç®¡é“é£æ ¼çš„å‡½æ•°å¼ï¼ˆunidirectional-network-å•é¡¹æ•°æ®æµï¼‰" class="headerlink" title="ç®¡é“é£æ ¼çš„å‡½æ•°å¼ï¼ˆunidirectional network å•é¡¹æ•°æ®æµï¼‰"></a>ç®¡é“é£æ ¼çš„å‡½æ•°å¼ï¼ˆunidirectional network å•é¡¹æ•°æ®æµï¼‰</h1><p>è¿™æ˜¯å‡½æ•°å¼è¯­è¨€åŸºæœ¬ç‰¹æ€§ï¼Œå°†ä¸€ä¸ªä¸ªç¬¦åˆå°è£…è¦æ±‚çš„å‡½æ•°ä¸²è”èµ·æ¥ï¼Œä½ å°±èƒ½å¾—åˆ°ç»Ÿä¸€<code>è¾“å…¥è¾“å‡º</code></p>
<p>å‡½æ•°å°†æ²¦ä¸ºç®—å¼ï¼Œå•æµ‹ä½œç”¨å°†æ¶ˆå¤±ï¼Œç†æƒ³æ—  bug ç³»ç»Ÿå‘¼ä¹‹æ¬²å‡º</p>
<p>å®ƒä¼šå½¢å¦‚ä»¥ä¸‹ç»“æ„ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">func1( func2 (), func3( func4 (startParams) ) )</span><br></pre></td></tr></table></figure>

<p>æˆ–è€…ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">func1().func2().func3().func4()</span><br></pre></td></tr></table></figure>

<p>çœ‹åˆ°è¿™äº›å½¢æ€ï¼Œå¤§å®¶ä¼šé¦–å…ˆæƒ³åˆ°ä»€ä¹ˆï¼Ÿ</p>
<p>æ²¡é”™ <code>jsx</code> å°±æ˜¯ç¬¬ä¸€ç§ç»“æ„ï¼ˆæ˜¯çš„ï¼Œ<strong>jsx æ˜¯æ­£å®—å‡½æ•°å¼</strong>ï¼Œçº¯ç²¹æ— å‰¯ä½œç”¨ï¼Œæ— éœ€æµ‹è¯•ï¼Œä»…éœ€è¾“å…¥è¾“å‡ºæ ¡éªŒè°ƒè¯•ï¼‰</p>
<p>ä¹Ÿæ²¡é”™ï¼Œ<code>promise.then().then()</code> å°±æ˜¯ç¬¬äºŒç§ï¼Œå°†<strong>å‡½æ•°å¼</strong>å¤„ç†å¹¶å‘ï¼Œå¼‚æ­¥çš„ä¼˜åŠ¿å‘æŒ¥äº†å‡ºæ¥</p>
<p>é‚£ç¬¬äºŒç§å’Œç¬¬ä¸€ç§ï¼Œæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ</p>
<p>åŒºåˆ«å°±æ˜¯ â€”â€”</p>
<h2 id="è°ƒåº¦"><a href="#è°ƒåº¦" class="headerlink" title="è°ƒåº¦"></a>è°ƒåº¦</h2><p>å‡½æ•°æ˜¯è¿è¡Œæ—¶çš„ç»“æ„ï¼Œå¦‚æœ<strong>æ²¡æœ‰åˆ©ç”¨æ¨¡å¼åŒ¹é…</strong>ï¼Œæ¯æ¬¡å‡½æ•°æ‰§è¡Œåªæœ‰ä¸€ä¸ªç»“æœï¼Œé‚£ä¹ˆæ•´ä¸ªä¸²è¡Œå‡½æ•°ç®¡é“çš„è¿”å›ä¹Ÿåªä¼šæœ‰ä¸€ä¸ªç»“æœ</p>
<p>å¦‚æœåˆ©ç”¨äº†å‘¢ï¼Ÿå®ƒå°†ä¼šå‘è·¯ç‰Œä¸€æ ·ï¼ŒæŒ‡ç¤ºç€é€»è¾‘å€’æµåˆ°ç‰¹å®šçš„ <code>lambda</code> å‡½æ•°ä¸­ï¼Œå½¢æˆåˆ†å½¢ç»“æ„</p>
<p>è¯·æ³¨æ„ï¼Œè¿™ä¸ªåˆ†å½¢ç»“æ„ä¸åªæ˜¯ç©ºé—´ä¸Šçš„ï¼Œè¿˜æœ‰æ—¶é—´ä¸Šçš„</p>
<p>è¿™ï¼Œå°±æ˜¯è°ƒåº¦ï¼ï¼ï¼</p>
<p>è¯´çš„å¾ˆæ‚¬å¥¥ï¼Œå¤§å®¶é¢†ä¼šä¸€ä¸‹æ„æ€å°±å¯ä»¥äº†ï¼Œå¦‚æœæƒ³è¦äº†è§£æ›´å¤šï¼Œç›´æ¥å»æˆç†Ÿå·¥å…·å¤„äº†è§£ï¼Œä»–ä»¬æœ‰æ›´å¤šè¯¦ç»†çš„è¯´æ˜ï¼š</p>
<p>å¾®è½¯å‡ºå“çš„ <a target="_blank" rel="noopener" href="https://mcxiaoke.gitbooks.io/rxdocs/content/Intro.html">ReactiveX</a> ï¼ˆè„±èƒäº <code>linq</code>ï¼‰ï¼Œå°±æ˜¯è¿™æ–¹é¢çš„é›†å¤§æˆè€…ï¼Œç½‘ç»œä¸Šæœ‰éå¸¸å¤šçš„è®²è§£ï¼Œè¿˜æœ‰è§†é¢‘æ¼”ç¤º</p>
<h2 id="Hooks-api-å°±æ˜¯-React-çš„è°ƒåº¦æ§åˆ¶æƒ"><a href="#Hooks-api-å°±æ˜¯-React-çš„è°ƒåº¦æ§åˆ¶æƒ" class="headerlink" title="Hooks api å°±æ˜¯ React çš„è°ƒåº¦æ§åˆ¶æƒ"></a>Hooks api å°±æ˜¯ React çš„è°ƒåº¦æ§åˆ¶æƒ</h2><h3 id="useState-æ•´ä¸ªå•é¡¹æ•°æ®æµçš„è°ƒåº¦å‘èµ·è€…"><a href="#useState-æ•´ä¸ªå•é¡¹æ•°æ®æµçš„è°ƒåº¦å‘èµ·è€…" class="headerlink" title="useState æ•´ä¸ªå•é¡¹æ•°æ®æµçš„è°ƒåº¦å‘èµ·è€…"></a>useState æ•´ä¸ªå•é¡¹æ•°æ®æµçš„è°ƒåº¦å‘èµ·è€…</h3><p>React å°†å®ƒçš„è°ƒåº¦æ§åˆ¶æƒï¼Œæ‹±æ‰‹äº¤åˆ°äº†ä½ çš„æ‰‹ä¸Šï¼Œè¿™å°±æ˜¯ hooksï¼Œå®ƒçš„æ„ä¹‰ç»å¯¹ä¸ä»…ä»…åªæ˜¯â€œåœ¨å‡½æ•°å¼ç»„ä»¶ä¸­ä¿®æ”¹çŠ¶æ€â€é‚£ä¹ˆç®€å•</p>
<p>useStateï¼ŒåŠ ä¸Š useReducer (ä¸ªäººä¸æ¨èï¼Œä½†æ˜¯ä¸ useState è¿”å›ç±»å‹ä¸€è‡´)</p>
<p>å±äºï¼š å“åº”å¼å¯¹è±¡ï¼ˆæ³¨æ„ï¼Œè¿™é‡Œçš„å¯¹è±¡æ˜¯ subjectï¼Œä¸æ˜¯ objectï¼Œæœ‰äººèƒ½å¸®å¿™ç¿»è¯‘ä¸€ä¸‹ä¹ˆï¼Ÿï¼‰</p>
<p>dispatch æ˜¯æ•´ä¸ªåº”ç”¨å¼€å§‹æ¸²æŸ“çš„æ ¹æº</p>
<p>æ²¡é”™ï¼Œthis.setState ä¹Ÿæœ‰åŒæ ·åŠŸèƒ½ï¼ˆä½†æ˜¯ä»…ä»…æ˜¯ç»„ä»¶å†…ï¼‰</p>
<h3 id="useEffect-æ•´ä¸ªå•é¡¹æ•°æ®æµè°ƒåº¦çš„æŒ‡æŒ¥è€…"><a href="#useEffect-æ•´ä¸ªå•é¡¹æ•°æ®æµè°ƒåº¦çš„æŒ‡æŒ¥è€…" class="headerlink" title="useEffect æ•´ä¸ªå•é¡¹æ•°æ®æµè°ƒåº¦çš„æŒ‡æŒ¥è€…"></a>useEffect æ•´ä¸ªå•é¡¹æ•°æ®æµè°ƒåº¦çš„æŒ‡æŒ¥è€…</h3><p>useEffect <strong>æ˜¯åˆ†å½¢æŒ‡ç¤ºå™¨</strong></p>
<p>åœ¨ Rxjs ä¸­ è¢«ç§°ä½œ æ“ä½œå‡½æ•°ï¼ˆoperational functionï¼‰ï¼Œå°†ä½ çš„æŸéƒ¨åˆ†å˜æ›´ï¼Œè¡å°„åˆ°å¦ä¸€å¤„å˜æ›´</p>
<p>åœ¨è¿™ä¸ª api ä¸­ï¼Œå¤§é‡æ¨¡å¼åŒ¹é…å¾—ä»¥æ­£å¸¸å·¥ä½œ</p>
<h3 id="useMemo-æ•´ä¸ªå•é¡¹æ•°æ®æµè°ƒåº¦çš„æ§åˆ¶è€…"><a href="#useMemo-æ•´ä¸ªå•é¡¹æ•°æ®æµè°ƒåº¦çš„æ§åˆ¶è€…" class="headerlink" title="useMemo æ•´ä¸ªå•é¡¹æ•°æ®æµè°ƒåº¦çš„æ§åˆ¶è€…"></a>useMemo æ•´ä¸ªå•é¡¹æ•°æ®æµè°ƒåº¦çš„æ§åˆ¶è€…</h3><p>æœ€åï¼ŒuseMemo</p>
<p>å®ƒèƒ½å¤Ÿé€šè¿‡åªåˆ¤æ–­å“åº”å€¼æ˜¯å¦æ”¹å˜ï¼Œè€Œè¾“å‡ºæ§åˆ¶</p>
<p>å½“ç„¶ï¼Œä½ å¯ä»¥ç”¨ if è¯­å¥åœ¨ useEffect ä¸­åˆ¤æ–­æ˜¯å¦æ”¹å˜æ¥å®ç°ï¼Œä½†æ˜¯ â€”â€” <strong>æ¨¡å¼åŒ¹é…å°±æ˜¯ä¸ºäº†ä¸å†™ if å•Š~</strong></p>
<p>å•ç‹¬æå‡º useMemoï¼Œæ˜¯ä¸ºäº†å°† è®¾è®¡éƒ¨åˆ† å’Œ è¿è¡Œæ—¶è°ƒåº¦æ§åˆ¶ éƒ¨åˆ†åˆ†ç¦»ï¼Œå³é™æ€å’ŒåŠ¨æ€åˆ†ç¦»</p>
<p>è°ƒåº¦æ°¸è¿œæ˜¯ä½ çœŸæ­£å¼€å§‹å†™å‡½æ•°å¼ä»£ç ï¼Œæœ€åº”è¯¥è€ƒè™‘çš„ä¸œè¥¿ï¼Œå®ƒæ˜¯ç²¾å</p>
<p>çº ç»“ä»€ä¹ˆæ˜¯ä»€ä¹ˆå¹¶ä¸é‡è¦ï¼Œå³ä¾¿ <code>useMemo = useEffect + if + useState</code>ï¼Œè¿™äº›ä¹Ÿä¸æ˜¯ä½ ç”¨è¿™éƒ¨åˆ† api çš„æ—¶å€™åº”è¯¥è€ƒè™‘çš„é—®é¢˜</p>
<h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>ä½ æ˜ç™½è¿™äº›ï¼Œå†åŠ ä¸Š hooks ä¹¦å†™æ—¶çš„è¦æ±‚ï¼š</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä¸è¦åœ¨å¾ªç¯ï¼Œæ¡ä»¶æˆ–åµŒå¥—å‡½æ•°ä¸­è°ƒç”¨ Hookï¼Œç¡®ä¿æ€»æ˜¯åœ¨ä½ çš„ React å‡½æ•°çš„æœ€é¡¶å±‚è°ƒç”¨ä»–ä»¬ã€‚éµå®ˆè¿™æ¡è§„åˆ™ï¼Œä½ å°±èƒ½ç¡®ä¿ Hook åœ¨æ¯ä¸€æ¬¡æ¸²æŸ“ä¸­éƒ½æŒ‰ç…§åŒæ ·çš„é¡ºåºè¢«è°ƒç”¨ã€‚è¿™è®© React èƒ½å¤Ÿåœ¨å¤šæ¬¡çš„useStateå’ŒuseEffectè°ƒç”¨ä¹‹é—´ä¿æŒ hook çŠ¶æ€çš„æ­£ç¡®ã€‚</span><br></pre></td></tr></table></figure>

<p>ä½ å°±èƒ½æ˜ç™½ï¼Œä¸ºä»€ä¹ˆå¾ˆå¤šäººè¯´ <code>React hooks</code> å’Œ <code>Rx</code> æ˜¯åŒä¸€ä¸ªä¸œè¥¿äº†</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä½†æ˜¯è¯·æ³¨æ„ï¼ŒReact åªæ˜¯å°†å®ƒè‡ªå·±çš„è°ƒåº¦æ§åˆ¶æƒäº¤ç»™ä½ ï¼Œä½ è‹¥æ˜¯è‡ªå·±å†ç”¨ rx ç­‰è°ƒåº¦æ¡†æ¶ï¼Œä¸”ä¸è¯´ requestAnimationFrame çš„è°ƒåº¦é¢‘é“Reactå äº†ï¼Œä¸¤ä¸ªè°ƒåº¦æœºåˆ¶ï¼Œå¼¥åˆèµ·æ¥ä¼šéå¸¸éº»çƒ¦ï¼Œå°å¿ƒå‡ºç°ä¸å¯è°ƒå¼çš„å¤§bug</span><br></pre></td></tr></table></figure>

<p>å‡½æ•°å¼åœ¨å¤„ç†ä¸šåŠ¡é€»è¾‘ä¸Šï¼Œæœ‰ç€éå¸¸ææ€–çš„é”‹åˆ©ç¨‹åº¦ï¼Œå­¦å¥½äº†ç™¾åˆ©è€Œæ— ä¸€å®³</p>
<p>ä½†æ˜¯è¯·æ³¨æ„ï¼Œå‡½æ•°å¼ä½œä¸ºå¯¹è®¡ç®—è¿‡ç¨‹çš„ä¸€èˆ¬æŠ½è±¡ï¼Œåªåœ¨ç»„ä»¶æœåŠ¡å±‚çº§ä»¥ä¸‹å‘æŒ¥ä½œç”¨ï¼Œç”¨å®ƒå¤„ç†é€šè®¯ï¼Œç®—æ³•ï¼Œå¼‚æ­¥ï¼Œå¹¶å‘éƒ½æ˜¯ä¸Šä¸Šä¹‹é€‰</p>
<p>ä½†æ˜¯åœ¨è½¯ä»¶æ¶æ„å±‚é¢ï¼Œå‡½æ•°å¼æ²¡æœ‰ä»»ä½•ä¼˜åŠ¿ï¼Œç»„ä»¶å±‚çº§ä»¥ä¸Šï¼Œæ°¸è¿œç”¨é¢å‘å¯¹è±¡çš„æ€ç»´å®¡è§†ï¼Œæ˜¯ä¸ªéå¸¸å¥½çš„ä¹ æƒ¯~</p>
<hr>
<h1 id="ç»„ä»¶æ˜æ˜å°±åªæ˜¯é€»è¾‘å’ŒçŠ¶æ€ï¼ˆæœåŠ¡ï¼‰è°ƒé…çš„åœ°æ–¹ï¼Œå®ƒå‹æ ¹å°±ä¸åº”è¯¥æœ‰é€»è¾‘"><a href="#ç»„ä»¶æ˜æ˜å°±åªæ˜¯é€»è¾‘å’ŒçŠ¶æ€ï¼ˆæœåŠ¡ï¼‰è°ƒé…çš„åœ°æ–¹ï¼Œå®ƒå‹æ ¹å°±ä¸åº”è¯¥æœ‰é€»è¾‘" class="headerlink" title="ç»„ä»¶æ˜æ˜å°±åªæ˜¯é€»è¾‘å’ŒçŠ¶æ€ï¼ˆæœåŠ¡ï¼‰è°ƒé…çš„åœ°æ–¹ï¼Œå®ƒå‹æ ¹å°±ä¸åº”è¯¥æœ‰é€»è¾‘"></a>ç»„ä»¶æ˜æ˜å°±åªæ˜¯é€»è¾‘å’ŒçŠ¶æ€ï¼ˆæœåŠ¡ï¼‰è°ƒé…çš„åœ°æ–¹ï¼Œå®ƒå‹æ ¹å°±ä¸åº”è¯¥æœ‰é€»è¾‘</h1><p>æŠŠé€»è¾‘æ”¾åˆ°æœåŠ¡é‡Œ</p>
<ul>
<li>åšæŒåœ¨ç»„ä»¶ä¸­åªåŒ…å«ä¸è§†å›¾ç›¸å…³çš„é€»è¾‘ã€‚æ‰€æœ‰å…¶å®ƒé€»è¾‘éƒ½åº”è¯¥æ”¾åˆ°æœåŠ¡ä¸­ã€‚</li>
<li>åšæŒæŠŠå¯å¤ç”¨çš„é€»è¾‘æ”¾åˆ°æœåŠ¡ä¸­ï¼Œä¿æŒç»„ä»¶ç®€å•ï¼Œèšç„¦äºå®ƒä»¬é¢„æœŸç›®çš„ã€‚</li>
<li>ä¸ºä½•ï¼Ÿå½“é€»è¾‘è¢«æ”¾ç½®åˆ°æœåŠ¡é‡Œï¼Œå¹¶ä»¥å‡½æ•°çš„å½¢å¼æš´éœ²æ—¶ï¼Œå¯ä»¥è¢«å¤šä¸ªç»„ä»¶é‡å¤ä½¿ç”¨ã€‚</li>
<li>ä¸ºä½•ï¼Ÿåœ¨å•å…ƒæµ‹è¯•æ—¶ï¼ŒæœåŠ¡é‡Œçš„é€»è¾‘æ›´å®¹æ˜“è¢«éš”ç¦»ã€‚å½“ç»„ä»¶ä¸­è°ƒç”¨é€»è¾‘æ—¶ï¼Œä¹Ÿå¾ˆå®¹æ˜“è¢«æ¨¡æ‹Ÿã€‚</li>
<li>ä¸ºä½•ï¼Ÿä»ç»„ä»¶ç§»é™¤ä¾èµ–å¹¶éšè—å®ç°ç»†èŠ‚ã€‚</li>
<li>ä¸ºä½•ï¼Ÿä¿æŒç»„ä»¶è‹—æ¡ã€ç²¾ç®€å’Œèšç„¦ã€‚</li>
</ul>
<hr>
<h1 id="React-DDD-ä¸‹å¦‚ä½•å¤„ç†ç±»å‹é—®é¢˜ï¼Ÿ"><a href="#React-DDD-ä¸‹å¦‚ä½•å¤„ç†ç±»å‹é—®é¢˜ï¼Ÿ" class="headerlink" title="React DDD ä¸‹å¦‚ä½•å¤„ç†ç±»å‹é—®é¢˜ï¼Ÿ"></a>React DDD ä¸‹å¦‚ä½•å¤„ç†ç±»å‹é—®é¢˜ï¼Ÿ</h1><h2 id="æ³›å‹çº¦æŸ-InjectionToken"><a href="#æ³›å‹çº¦æŸ-InjectionToken" class="headerlink" title="æ³›å‹çº¦æŸ InjectionToken"></a>æ³›å‹çº¦æŸ InjectionToken</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line"> * æ³›å‹çº¦æŸï¼Œå¯¹æ³¨å…¥æ•°æ®çš„ç±»å‹æ¨æ–­æ”¯æŒ</span><br><span class="line"> *</span><br><span class="line"> * @export</span><br><span class="line"> * @template T</span><br><span class="line"> * @param &#123;(...args: any) &#x3D;&gt; T&#125; useFunc</span><br><span class="line"> * @param &#123;(T | undefined)&#125; [initialData&#x3D;undefined]</span><br><span class="line"> * @returns</span><br><span class="line"> *&#x2F;</span><br><span class="line">export default function getServiceToken&lt;T&gt;(</span><br><span class="line">  useFunc: (...args: any) &#x3D;&gt; T,</span><br><span class="line">  initialData: T | undefined &#x3D; undefined</span><br><span class="line">) &#123;</span><br><span class="line">  return createContext(initialData as T);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·ï¼Œä½ çš„ <code>useContext</code> å°±èƒ½æœ‰å®Œæ•´ç±»å‹æ”¯æŒäº†</p>
<h2 id="è™šæ‹Ÿæ•°æ®æ³›å‹çº¦æŸ"><a href="#è™šæ‹Ÿæ•°æ®æ³›å‹çº¦æŸ" class="headerlink" title="è™šæ‹Ÿæ•°æ®æ³›å‹çº¦æŸ"></a>è™šæ‹Ÿæ•°æ®æ³›å‹çº¦æŸ</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line"> * è·å¾—è™šæ‹Ÿçš„æœåŠ¡æ•°æ®</span><br><span class="line"> *</span><br><span class="line"> * @export</span><br><span class="line"> * @template T</span><br><span class="line"> * @param &#123;(...args: any) &#x3D;&gt; T&#125; useFunc</span><br><span class="line"> * @param &#123;(T | undefined)&#125; [initialData&#x3D;undefined]</span><br><span class="line"> * @returns</span><br><span class="line"> *&#x2F;</span><br><span class="line">export function getMockService&lt;T&gt;(</span><br><span class="line">  useFunc: (...args: any) &#x3D;&gt; T,</span><br><span class="line">  initialData: T | undefined &#x3D; undefined</span><br><span class="line">) &#123;</span><br><span class="line">  return initialData as T;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ç±»æœåŠ¡"><a href="#ç±»æœåŠ¡" class="headerlink" title="ç±»æœåŠ¡"></a>ç±»æœåŠ¡</h2><p>ç±»æœåŠ¡åœ¨åŠŸèƒ½ä¸Šï¼Œå…¶å®å’Œå‡½æ•°æœåŠ¡æ˜¯ä¸€æ ·çš„</p>
<p>å‡½æ•°è¿”å›å¯¹è±¡ï¼Œæœ¬èº«ä¹Ÿæ˜¯æ„é€ æ–¹å¼ä¹‹ä¸€ï¼Œå±äº js ç‰¹è‰² ï¼ˆè¿”å›æ•°ç»„çš„è¯ï¼Œæœ¬è´¨ä¹Ÿæ˜¯å¯¹è±¡ï¼‰</p>
<p>æ‰€ä»¥åŠŸèƒ½ä¸Šæ¥è¯´ï¼Œå‡½æ•°æœåŠ¡å®Œå…¨å¯ä»¥è¦†ç›–ç±»æœåŠ¡ï¼Œå®ç°é¢å‘å¯¹è±¡</p>
<p>ä½†æ˜¯ï¼Œéœ€æ±‚å¯ä¸æ­¢æœ‰åŠŸèƒ½ä¸€è¯´ï¼š</p>
<ul>
<li>éœ€è¦æœ‰æ›´å¥½è‡ªè§£é‡Šæ€§</li>
<li>éœ€è¦æ›´å¥½è‡ªå°è£…æ€§</li>
<li>éœ€è¦æ›´å¥½çš„å¯è¯»æ€§ï¼ˆè‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£ï¼Œè‡ªåŠ¨åˆ†æï¼‰</li>
</ul>
<p>ç±»å‹è‡ªåŠ¨åŒ–ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function getClassContext&lt;T&gt;(constructor: new (...args: any) &#x3D;&gt; T) &#123;</span><br><span class="line">  return createContext((undefined as unknown) as T);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å®ç°ä¸€ä¸ªç±»"><a href="#å®ç°ä¸€ä¸ªç±»" class="headerlink" title="å®ç°ä¸€ä¸ªç±»"></a>å®ç°ä¸€ä¸ªç±»</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line"> * some service</span><br><span class="line"> *</span><br><span class="line"> * @export</span><br><span class="line"> * @class SomeService</span><br><span class="line"> *&#x2F;</span><br><span class="line">export class SomeService &#123;</span><br><span class="line">  static Context &#x3D; getClassContext(SomeService);</span><br><span class="line">  name: string;</span><br><span class="line">  setName: Dispatch&lt;SetStateAction&lt;string&gt;&gt;;</span><br><span class="line">  constructor() &#123;</span><br><span class="line">    &#x2F;&#x2F; eslint-disable-next-line react-hooks&#x2F;rules-of-hooks</span><br><span class="line">    const [name, setName] &#x3D; useState(&quot;&quot;);</span><br><span class="line">    this.name &#x3D; name;</span><br><span class="line">    this.setName &#x3D; setName;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ä½¿ç”¨è¿™ä¸ªç±»"><a href="#ä½¿ç”¨è¿™ä¸ªç±»" class="headerlink" title="ä½¿ç”¨è¿™ä¸ªç±»"></a>ä½¿ç”¨è¿™ä¸ªç±»</h2><p>æœ€åï¼Œè‡ªåŠ¨åˆ†æç±»çš„ç»“æ„ï¼š</p>
<p>å¯è‡ªåŠ¨æ–‡æ¡£åŒ–ï¼Œåœ¨é…åˆå…¶ä»–å·¥å…·å®ç°æ¡†æ¶å¤–éœ€æ±‚æ—¶ï¼Œèƒ½å¤Ÿå¸¦ç»™ä½ æ–¹ä¾¿çš„ä½¿ç”¨ä½“éªŒ</p>
<p>ä½†æ˜¯æ³¨æ„ï¼Œç›®å‰å®˜æ–¹æ˜¯ç¦æ­¢åœ¨ class ä¸­ä½¿ç”¨ hooks çš„</p>
<p>éœ€è¦ç¦ç”¨æç¤º</p>
<h2 id="åŒæ—¶ï¼Œéœ€è¦ä¿è¯åœ¨-constructor-ä¸­ä½¿ç”¨-hooks"><a href="#åŒæ—¶ï¼Œéœ€è¦ä¿è¯åœ¨-constructor-ä¸­ä½¿ç”¨-hooks" class="headerlink" title="åŒæ—¶ï¼Œéœ€è¦ä¿è¯åœ¨ constructor ä¸­ä½¿ç”¨ hooks"></a>åŒæ—¶ï¼Œéœ€è¦ä¿è¯åœ¨ constructor ä¸­ä½¿ç”¨ hooks</h2><hr>
<h1 id="React-DDD-ä¸‹çš„ä¸€äº›å¸¸è§é—®é¢˜-FAQ"><a href="#React-DDD-ä¸‹çš„ä¸€äº›å¸¸è§é—®é¢˜-FAQ" class="headerlink" title="React DDD ä¸‹çš„ä¸€äº›å¸¸è§é—®é¢˜ FAQ"></a>React DDD ä¸‹çš„ä¸€äº›å¸¸è§é—®é¢˜ FAQ</h1><h2 id="React-DDD-ä¸‹ï¼Œclass-é£æ ¼ç»„ä»¶èƒ½ç”¨ä¹ˆï¼Ÿ"><a href="#React-DDD-ä¸‹ï¼Œclass-é£æ ¼ç»„ä»¶èƒ½ç”¨ä¹ˆï¼Ÿ" class="headerlink" title="React DDD ä¸‹ï¼Œclass é£æ ¼ç»„ä»¶èƒ½ç”¨ä¹ˆï¼Ÿ"></a>React DDD ä¸‹ï¼Œclass é£æ ¼ç»„ä»¶èƒ½ç”¨ä¹ˆï¼Ÿ</h2><p>æœ€å¥½ä¸è¦ç”¨ï¼Œå› ä¸º class é£æ ¼ç»„ä»¶çš„é€»è¾‘æ— æ³•æå–ï¼Œæ— æ³•è¿æ¥åˆ°ç»Ÿä¸€çš„æœåŠ¡æ³¨å…¥æ ‘ä¸­ï¼Œå› æ­¤<strong>ä¼šç ´ååº”ç”¨çš„å•ä¸€æ•°æ®åŸåˆ™ï¼Œç ´åå°è£…å¤ç”¨æ€§</strong></p>
<p>æ‰€ä»¥å°½é‡ä¸è¦ä½¿ç”¨ï¼Œè‡³äºç›®å‰ <code>getSnapshotBeforeUpdate</code>ï¼Œ<code>getDerivedStateFromError</code> å’Œ <code>componentDidCatch</code> çš„ç­‰ä»·å†™æ³• <code>Hooks</code> å°šæœªåŠ å…¥ï¼Œè¿™å…¶å®å¹¶ä¸æ˜¯å¤§é—®é¢˜ï¼Œå› ä¸ºåœ¨ç®¡é“é£æ ¼ä¸­ï¼Œé”™è¯¯ä¼˜å…ˆè¡¨å¾ä¸ºçŠ¶æ€ï¼Œæ¯”å¦‚ <code>useRequest</code> ä¸­çš„ <code>error</code></p>
<h2 id="React-DDD-æ˜¯ç›¸æ¯”-ä¹‹å‰çš„-ç±»-redux-åˆ†å±‚æ˜¯æ›´ç®€å•è¿˜æ˜¯æ›´éš¾ï¼Ÿ"><a href="#React-DDD-æ˜¯ç›¸æ¯”-ä¹‹å‰çš„-ç±»-redux-åˆ†å±‚æ˜¯æ›´ç®€å•è¿˜æ˜¯æ›´éš¾ï¼Ÿ" class="headerlink" title="React DDD æ˜¯ç›¸æ¯” ä¹‹å‰çš„ ç±» redux åˆ†å±‚æ˜¯æ›´ç®€å•è¿˜æ˜¯æ›´éš¾ï¼Ÿ"></a>React DDD æ˜¯ç›¸æ¯” ä¹‹å‰çš„ ç±» redux åˆ†å±‚æ˜¯æ›´ç®€å•è¿˜æ˜¯æ›´éš¾ï¼Ÿ</h2><p>ç®€å•å¤ªå¤šäº†ï¼Œæ•´ä¸ª <code>React DDD</code> çš„ä½“ç³»åªéœ€è¦ useXxx è¡¨ç¤ºæœåŠ¡ Xxx è¡¨ç¤ºç»„ä»¶ï¼Œåªéœ€è¦ç”¨å‡ ä¸ª hooks apiï¼Œé€šè¿‡æ³¨å…¥æä¾›ä¸Šä¸‹æ–‡ï¼Œä¸éœ€è¦é«˜é˜¶ç»„ä»¶ï¼Œå¥½çš„æ¨¡å¼ä¹Ÿä¸éœ€è¦ render propsï¼Œæ›´ä¸éœ€è¦å¤ªè¿‡é‡è§†æ€§èƒ½è°ƒä¼˜ï¼ˆåˆ«æ‹…å¿ƒæ€§èƒ½é—®é¢˜ï¼Œé™¤äº†é«˜æ¶ˆè€—è¿ç®—æƒ°æ€§åŠ è½½ä»¥å¤–ï¼‰ï¼Œä½ åªæ˜¯æ— æ³•åœ¨ç»„ä»¶å±‚çº§å¤„ç†é”™è¯¯è€Œå·²ï¼Œä¸ªäººè®¤ä¸ºï¼Œé”™è¯¯è¿˜æ˜¯åœ¨ç”¨æˆ·ç«¯å¤„ç†å§</p>
<p>å°¤å…¶æ˜¯åœ¨ Typescript ä¸‹ï¼Œä½ ä»£ç çš„å‡ ä¹ä»»ä½•ä¸€å¤„éƒ½æœ‰å®Œæ•´çš„ç±»å‹æç¤ºï¼Œä¸éœ€è¦ä½ å»é™„åŠ ç±»å‹å£°æ˜æˆ–è€…æŒ‡å®š interface</p>
<p>ä½†æ˜¯ï¼Œå®ƒä¼šå°†ä¸šåŠ¡é—®é¢˜æå‰æš´éœ²ï¼Œåœ¨æ²¡æœ‰æƒ³å¥½ä¸šåŠ¡é€»è¾‘å…³ç³»çš„æƒ…å†µä¸‹ï¼Œè¯·ä¸è¦ä¸‹æ‰‹å†™ä»£ç ï¼Œä½†æ˜¯è¿™ä¹Ÿä¸æ˜¯å®ƒçš„ç¼ºç‚¹ï¼Œå› ä¸ºåœ¨é€»è¾‘é”™ä¹±çš„æƒ…å†µä¸‹ï¼Œåˆ†å±‚ç›´æ¥ä¼šå˜å¾—ä¸å¯ç»´æŠ¤</p>
<h2 id="React-DDD-éœ€è¦ç”¨åˆ°ä»€ä¹ˆå·¥å…·ä¹ˆï¼Ÿ"><a href="#React-DDD-éœ€è¦ç”¨åˆ°ä»€ä¹ˆå·¥å…·ä¹ˆï¼Ÿ" class="headerlink" title="React DDD éœ€è¦ç”¨åˆ°ä»€ä¹ˆå·¥å…·ä¹ˆï¼Ÿ"></a>React DDD éœ€è¦ç”¨åˆ°ä»€ä¹ˆå·¥å…·ä¹ˆï¼Ÿ</h2><p>ä¸éœ€è¦ï¼Œç›´æ¥ä½¿ç”¨ <code>React hooks</code> å°±å¥½ï¼Œæ²¡æœ‰å…¶ä»–å·¥å…·éœ€æ±‚</p>
<h2 id="React-DDD-æ€§èƒ½ä¼šæœ‰é—®é¢˜ä¹ˆï¼Ÿ"><a href="#React-DDD-æ€§èƒ½ä¼šæœ‰é—®é¢˜ä¹ˆï¼Ÿ" class="headerlink" title="React DDD æ€§èƒ½ä¼šæœ‰é—®é¢˜ä¹ˆï¼Ÿ"></a>React DDD æ€§èƒ½ä¼šæœ‰é—®é¢˜ä¹ˆï¼Ÿ</h2><p>ä¸ä¼šï¼ŒReact DDD çš„æ–¹æ¡ˆæ€§èƒ½æ¯” class é£æ ¼ç»„ä»¶ + ç±» redux åˆ†å±‚è¦å¼ºå¾—å¤šï¼Œè€Œä¸”ä½ å¯ä»¥ç²¾ç»†åŒ–æ§åˆ¶ç»„ä»¶çš„è°ƒåº¦å’Œå“åº”å¼ï¼Œä¸‹é™æ¯” redux ä¸Šé™è¿˜è¦é«˜ï¼Œä¸Šé™å‡ ä¹å¯ä»¥æ‘¸åˆ°æ¡†æ¶æé™</p>
<h2 id="React-DDD-é€‚åˆå¤§ä½“é‡é¡¹ç›®ä¹ˆï¼Ÿ"><a href="#React-DDD-é€‚åˆå¤§ä½“é‡é¡¹ç›®ä¹ˆï¼Ÿ" class="headerlink" title="React DDD é€‚åˆå¤§ä½“é‡é¡¹ç›®ä¹ˆï¼Ÿ"></a>React DDD é€‚åˆå¤§ä½“é‡é¡¹ç›®ä¹ˆï¼Ÿ</h2><p>æ˜¯çš„ï¼Œä»æœ€å°ä½“é‡é¡¹ç›®ï¼Œåˆ°è¶…å¤§ä½“é‡é¡¹ç›®ï¼ŒReact DDD éƒ½å¾ˆé€‚åˆï¼ŒåŸå› åœ¨äºå›å½’é¢å‘å¯¹è±¡ï¼Œæ‰¿è®¤é¢å‘å¯¹è±¡å¯¹é¡¶å±‚è®¾è®¡æœ‰ä¼˜åŠ¿çš„åŒæ—¶ï¼Œä¸šåŠ¡é€»è¾‘é‡‡ç”¨æé™å‡½æ•°å¼å¼€å‘</p>
<p>æ— è®ºåœ¨æ¶æ„ä¸Šï¼Œè¿˜æ˜¯ä¸šåŠ¡é€»è¾‘å®ç°ä¸Šï¼Œéƒ½ä¼šå°†æ•ˆç‡ï¼Œå¯å¤ç”¨æ€§ï¼Œå°è£…åº¦ï¼Œé›†æˆåº¦ï¼Œå¯è°ƒå¼ï¼Œå¯æµ‹è¯•æ€§ç›´æ¥æ‹‰æ»¡ï¼Œæ‰€ä»¥ä¸ç”¨æ‹…å¿ƒ</p>
<h2 id="React-DDD-æ•ˆç‡é«˜ä¹ˆï¼Ÿ"><a href="#React-DDD-æ•ˆç‡é«˜ä¹ˆï¼Ÿ" class="headerlink" title="React DDD æ•ˆç‡é«˜ä¹ˆï¼Ÿ"></a>React DDD æ•ˆç‡é«˜ä¹ˆï¼Ÿ</h2><p>å®ƒä¸æ˜¯é«˜ä¸é«˜çš„é—®é¢˜ï¼Œå®ƒæ˜¯ç›´æ¥å¯ä»¥å°†å¤§éƒ¨åˆ†ä¸šåŠ¡æ•ˆç‡ç›´æ¥æé«˜åå€çš„å¤§æ€å™¨ï¼Œè€Œä¸”è¿˜æœ‰å¾ˆå¤šç¬¬ä¸‰æ–¹åº“å¯ä»¥è¢«ç›´æ¥ä½¿ç”¨ï¼Œè®©ç¬¬ä¸‰æ–¹å¸®ä½ å¤„ç†é€»è¾‘ï¼Œæ¯”å¦‚ ahooksï¼Œswr ç­‰ç­‰</p>
<p>äºæ­¤åŒæ—¶ï¼Œå®ƒç›´æ¥è·Ÿä¸šç•Œä¸»æµå·¥ç¨‹åŒ–æ¨¡å¼å¯¹æ¥ï¼Œæœ‰é¢†åŸŸæ¨¡å—çš„åŠ æŒï¼Œå¤šäººåä½œå°†å˜å¾—æ›´åŠ æœ‰æ•ˆç‡ï¼Œä¹Ÿèƒ½å½¢æˆç‰¹åˆ«å¤šçš„æŠ€æœ¯èµ„äº§</p>
<h2 id="Redux-ä¹‹ç±»çš„å·¥å…·è¿˜æœ‰æ„ä¹‰ä¹ˆï¼Ÿ"><a href="#Redux-ä¹‹ç±»çš„å·¥å…·è¿˜æœ‰æ„ä¹‰ä¹ˆï¼Ÿ" class="headerlink" title="Redux ä¹‹ç±»çš„å·¥å…·è¿˜æœ‰æ„ä¹‰ä¹ˆï¼Ÿ"></a>Redux ä¹‹ç±»çš„å·¥å…·è¿˜æœ‰æ„ä¹‰ä¹ˆï¼Ÿ</h2><p>æ²¡æœ‰æ„ä¹‰äº†ï¼Œå®ƒåªæ˜¯è§£å†³æ¡†æ¶æ²¡æœ‰ IOC æƒ…å†µä¸‹ï¼Œä¿æŒå’Œæ¡†æ¶ç›¸åŒçš„å•å‘æ•°æ®æµï¼Œä¿æŒç”¨æˆ·æ€ä»£ç çš„è„±è€¦è€Œå·²ï¼Œç”±äºçŠ¶æ€åˆ†æ•£ä¸æ˜“æµ‹è¯•ï¼Œæä¾›ä¸€ä¸ªåˆ‡é¢ç»™ä½ è°ƒè¯•è€Œå·²</p>
<p>è¿™ç§æ–¹æ¡ˆç›¸å½“äºå¼ºåˆ¶åœ¨å‰ç«¯å°å±‚ï¼Œç›¸å½“ä¸åˆç†ï¼ŒåŒæ—¶ typescript æ”¯æŒè¿˜å¾ˆå·®</p>
<p>åœ¨æ¡†æ¶æœ‰ IOC çš„æƒ…å†µä¸‹ï¼Œç”¨æˆ·ä»£ç çš„çŠ¶æ€é€»è¾‘å®é™…ä¸Šå½¢æˆäº†ä¸€ä¸ªå’Œç»„ä»¶ç»“æ„ç»Ÿä¸€çš„æ ‘ï¼Œç§°ä¹‹ä¸ºé€»è¾‘æ ‘æˆ–è€…æ³¨å…¥æ ‘ï¼Œä¾èµ–æ ‘ï¼Œå¾ˆè‡ªç„¶åœ°ä¸ç»„ä»¶ç›¸ç»Ÿä¸€ï¼Œå¾ˆè‡ªç„¶åœ°ä¿è¯å•å‘æ•°æ®æµå’Œä¸€è‡´æ€§</p>
<p>æ‰€ä»¥ï¼ŒRedux ä¹‹ç±»çš„å·¥å…·æœ€å¥½ä¸è¦ç”¨ï¼Œå¦„å›¾åœ¨åº”ç”¨é¡¶å±‚ä¸€ä¸ªæœåŠ¡è§£å†³é—®é¢˜çš„æ–¹æ³•ï¼Œéƒ½å¾ˆå‚»</p>
<h2 id="ç°æœ‰é¡¹ç›®èƒ½ç›´æ¥æ”¹æˆ-React-DDD-ä¹ˆï¼Ÿ"><a href="#ç°æœ‰é¡¹ç›®èƒ½ç›´æ¥æ”¹æˆ-React-DDD-ä¹ˆï¼Ÿ" class="headerlink" title="ç°æœ‰é¡¹ç›®èƒ½ç›´æ¥æ”¹æˆ React DDD ä¹ˆï¼Ÿ"></a>ç°æœ‰é¡¹ç›®èƒ½ç›´æ¥æ”¹æˆ React DDD ä¹ˆï¼Ÿ</h2><p>è¿™æ˜¯å®ƒæœ€å¤§çš„ç¼ºç‚¹ï¼Œä¸èƒ½ï¼</p>
<p>å› ä¸ºé—®é¢˜çš„æ ¹æºå‡ºåœ¨æ¡†æ¶ä¸Šï¼ŒIOC åº”è¯¥æ˜¯æ¡†æ¶çš„å¤§å˜æ›´ï¼Œä¸ªäººè®¤ä¸º React åº”è¯¥ç›´æ¥æš´åŠ›æ›´æ–°ï¼Œæ‘’å¼ƒæ‰€æœ‰è€æ—§å†™æ³•ï¼Œå¦‚åŒ 15 å¹´çš„ Angular ä¸€æ ·ï¼Œè™½ç„¶æœ‰é˜µç—›ï¼Œä½†æ˜¯å¯¹æå‡ç¤¾åŒºçš„å¥½å¤„å¤§äºåå¤„ï¼Œå½“ç„¶ï¼Œè¿™æ˜¯æ²¡æœ‰è€ƒè™‘å¸‚åœºçš„æƒ³æ³•</p>
<p>å¦‚æœä½ æƒ³æ›´çº¯ç²¹ä½¿ç”¨ React DDDï¼Œæœ€å¥½è¿˜æ˜¯é‡‡å–é‡æ„çš„æ–¹æ¡ˆ</p>
<h2 id="React-DDD-ä¸‹ï¼Œåº”è¯¥æ€ä¹ˆåˆ’åˆ†æ–‡ä»¶ç»“æ„ï¼Ÿ"><a href="#React-DDD-ä¸‹ï¼Œåº”è¯¥æ€ä¹ˆåˆ’åˆ†æ–‡ä»¶ç»“æ„ï¼Ÿ" class="headerlink" title="React DDD ä¸‹ï¼Œåº”è¯¥æ€ä¹ˆåˆ’åˆ†æ–‡ä»¶ç»“æ„ï¼Ÿ"></a>React DDD ä¸‹ï¼Œåº”è¯¥æ€ä¹ˆåˆ’åˆ†æ–‡ä»¶ç»“æ„ï¼Ÿ</h2><p>æŒ‰ç…§åŠŸèƒ½åˆ’åˆ†ï¼Œä½ çš„åŠŸèƒ½æœ‰å“ªäº›åŒ…å«å…³ç³»ï¼Œä½ çš„æ–‡ä»¶ç»“æ„å°±æ˜¯å¦‚ä½•</p>
<p>ä½ çš„åŠŸèƒ½åœ¨å“ªä¸ªèŒƒå›´éœ€è¦æä¾›é™ç•Œä¸Šä¸‹æ–‡ï¼Œå“ªé‡Œå°±è¿›è¡ŒæœåŠ¡æ³¨å…¥</p>
<p>æ‰€ä»¥ç±»ä¼¼æ‹†åˆ† storeï¼Œactionï¼Œmodels ä¹‹ç±»çš„æ–‡ä»¶å¤¹ï¼Œå°±ä¸è¦æœ‰äº†ï¼Œå‰ç«¯æ²¡æœ‰æ•°æ®åº“ï¼Œå³ä¾¿æœ‰ï¼Œä¹Ÿæ²¡æœ‰åˆ°éœ€è¦æŠ½è±¡ dao çš„ç¨‹åº¦ï¼Œå³ä¾¿æŠ½è±¡ daoï¼Œdao æœ¬èº«ä¹Ÿæ˜¯ä¸ç¬¦åˆå·¥ç¨‹åŒ–å’Œ DDD çš„</p>
<h2 id="æ‰€ä»¥å¾®å‰ç«¯å¯ä»¥ç”±-React-DDD-å®ç°æ˜¯ä¹ˆï¼Ÿ"><a href="#æ‰€ä»¥å¾®å‰ç«¯å¯ä»¥ç”±-React-DDD-å®ç°æ˜¯ä¹ˆï¼Ÿ" class="headerlink" title="æ‰€ä»¥å¾®å‰ç«¯å¯ä»¥ç”± React DDD å®ç°æ˜¯ä¹ˆï¼Ÿ"></a>æ‰€ä»¥å¾®å‰ç«¯å¯ä»¥ç”± React DDD å®ç°æ˜¯ä¹ˆï¼Ÿ</h2><p>æ˜¯çš„ï¼Œæœ‰äº†é™ç•Œä¸Šä¸‹æ–‡ï¼Œåˆ†å¼€å¼€å‘ï¼Œåˆ†å¼€æµ‹è¯•ï¼Œåˆ†å¼€éƒ¨ç½²éƒ½å¯ä»¥å®ç°</p>
<p>ä½†æ˜¯ä¸€å®šè¦åœ¨ç›¸åŒæ¡†æ¶å†…ï¼Œä¸ªäººè®¤ä¸ºå‰ç«¯é‡‡ç”¨ä¸åŒæ¡†æ¶å¼€å‘æ˜¯ä¸ªä¼ªéœ€æ±‚</p>
<p>ç°å¦‚ä»Š <code>Angular</code>ï¼Œ<code>React</code>ï¼Œ<code>Vue</code>ï¼Œéƒ½æœ‰ <code>IOC</code>ï¼Œå†™æ³•éƒ½å¯ä»¥äº’é€š</p>
<p>ä½ è¦è®²æ¨¡å—å‰¥ç¦»ï¼Œç›´æ¥æ„å»ºçš„æ—¶å€™æŠŠæ¨¡å—æ–‡ä»¶å¤¹ <code>cp</code> åˆ°æŒ‡å®šç›®å½•ï¼Œè¦†ç›–æ‰å ä½çš„æ–‡ä»¶å¤¹å³å¯</p>
<p>ä¸è¿‡æ³¨æ„ï¼Œâ€˜å¾®åº”ç”¨â€™éœ€è¦æœ‰æ¨¡æ‹Ÿé¡¶å±‚ <code>context</code> çš„å¯é€‰æœåŠ¡ï¼Œå½“ç„¶ï¼Œè¿™äº›ä¸œè¥¿ä¸ç®¡ä½ æ€ä¹ˆå®ç°éƒ½æ˜¯éœ€è¦çš„</p>
<p>è‡³äºè¯´é‡æ„å…¼å®¹è€ä»£ç è€Œé‡‡ç”¨ <code>shadowDom</code> å’Œ <code>iframe</code> çš„ï¼Œæˆ‘åªèƒ½è¯´ï¼Œä½œä¸ºç»ˆç«¯å¼€å‘ï¼Œé‡æ„å…¼å®¹è€ä»£ç åªæ˜¯ä¸´æ—¶çŠ¶æ€ï¼Œä»–ä¸èƒ½ä½œä¸ºæ¶æ„ï¼Œæ›´ä¸èƒ½ä½œä¸ºä¸€ä¸ªæŠ€æœ¯æ¥æ¨å¹¿</p>
<h2 id="React-DDD-å’Œ-Angular-çš„æ¶æ„å¥½åƒï¼Œä¸ºä»€ä¹ˆï¼Ÿ"><a href="#React-DDD-å’Œ-Angular-çš„æ¶æ„å¥½åƒï¼Œä¸ºä»€ä¹ˆï¼Ÿ" class="headerlink" title="React DDD å’Œ Angular çš„æ¶æ„å¥½åƒï¼Œä¸ºä»€ä¹ˆï¼Ÿ"></a>React DDD å’Œ Angular çš„æ¶æ„å¥½åƒï¼Œä¸ºä»€ä¹ˆï¼Ÿ</h2><p>å› ä¸º Angular 15 å¹´é¦–å…ˆå®ç°äº† IOCï¼Œç»„ä»¶ä¸­æ¨èä¸è¦å†™é€»è¾‘ï¼Œä¹Ÿæ˜¯ Angular æœ€æ—©æå‡ºçš„æ–¹æ¡ˆ</p>
<p><code>service</code>ï¼ˆçŠ¶æ€é€»è¾‘å•å…ƒï¼‰ï¼Œ<code>module</code>ï¼ˆservice+component+template+css+staticAssetsâ€¦ï¼‰ï¼Œé¢†åŸŸæ¨¡å—å°è£…ä¹Ÿæ˜¯ <code>Angular</code> æœ€æ—©æå‡ºçš„ï¼Œä½†æ˜¯å› ä¸ºå½“æ—¶å®ƒèµ°å¤ªå¿«ï¼Œç¤¾åŒºæ²¡è·Ÿä¸Šï¼Œç”Ÿå‘½å‘¨æœŸå¤ç”¨ä¹Ÿéº»çƒ¦ï¼Œå› ä¸ºé‡‡ç”¨è£…é¥°å™¨ï¼Œç»„ä»¶è¿˜ä¿ç•™äº†ä¸€ä¸ªå£³ï¼Œæ¨è¿›æœ€ä½³å®è·µçš„éš¾åº¦æ¯”è¾ƒå¤§</p>
<p>è€Œ <code>React</code> çš„ <code>hooks</code> å¯ä»¥æ›´åŠ æŠ½è±¡ï¼Œä¹Ÿæ›´ç®€å•ç›´æ¥ï¼Œç›´æ¥å°±æ˜¯ä¸¤ä¸ªå‡½æ•°ï¼ŒæœåŠ¡æ³¨å…¥ä¹Ÿæ˜¯é€šè¿‡ç»„ä»¶ï¼Œä¹Ÿå°±æ˜¯å¼ºåˆ¶ä¸ç»„ä»¶ä¿æŒä¸€è‡´</p>
<p>è¿™æ—¶å€™å†æ¨åŠ¨ <code>DDD</code> å°±éå¸¸å®¹æ˜“ä¸”æ°´åˆ°æ¸ æˆäº†</p>
<p>ä½†æ˜¯ <code>Angular</code> çš„å¾ˆå¤šç‰¹æ€§ <code>React</code> è¿˜ä¸æ”¯æŒï¼Œæ¯”å¦‚ç»„ä»¶æ ·å¼å°è£…ï¼Œå¤šè¯­è¨€ä¾èµ–åˆ°è§†å›¾ï¼ŒæœåŠ¡æ‘‡æ ‘ï¼ŒåŠ¨æ€ç»„ä»¶æ‘‡æ ‘ï¼Œå¼‚æ­¥æœåŠ¡ï¼ˆ<code>suspense</code>ï¼Œ<code>concurrent</code> è¿˜åœ¨è¯•éªŒé˜¶æ®µï¼‰ï¼Œè¿˜æœ‰çœŸæ­£è§£å†³æ€§èƒ½é—®é¢˜çš„å¤§æ€å™¨ <code>platform-webworker</code>ï¼ˆèƒ½å¤Ÿåœ¨åº”ç”¨å±‚çº§æ”¯æŒæµè§ˆå™¨é«˜åˆ·ï¼‰</p>
<p>ä½†æ˜¯è¿™äº›éœ€æ±‚ï¼Œåœ¨æ²¡æœ‰è¶…å¤§ä½“é‡ï¼ˆä¸–ç•Œçº§åº”ç”¨ï¼‰ä¸‹ï¼Œç”¨åˆ°çš„å¯èƒ½æ€§å¾ˆå°ï¼Œä¸å¦¨ç¢ <code>React</code> çš„æ™®é€‚æ€§</p>
<p>è€Œä¸” React ç¤¾åŒºæ›´æ´»è·ƒï¼Œç®¡é“é£æ ¼å‡½æ•°æ˜¯å¯¹ç¤¾åŒºçš„ä¾èµ–æ˜¯å¾ˆå¼ºçš„ï¼Œè¿™æ–¹é¢ <code>Angular</code> å¹²å†™ <code>rxjs</code> ç®¡é“æœ‰äº›ç£¨äºº</p>
<h2 id="React-DDD-ä¼šæ˜¯æœªæ¥è¶‹åŠ¿ä¹ˆï¼Ÿ"><a href="#React-DDD-ä¼šæ˜¯æœªæ¥è¶‹åŠ¿ä¹ˆï¼Ÿ" class="headerlink" title="React DDD ä¼šæ˜¯æœªæ¥è¶‹åŠ¿ä¹ˆï¼Ÿ"></a>React DDD ä¼šæ˜¯æœªæ¥è¶‹åŠ¿ä¹ˆï¼Ÿ</h2><p>è¿™ç‚¹æˆ‘è§‰å¾—æ¯«æ— ç–‘é—®ï¼Œå› ä¸º <code>DDD</code> æ˜¯æ•´ä¸ªè½¯ç”²å¼€å‘æ¶æ„è®¾è®¡çš„è¶‹åŠ¿ï¼Œè€Œä¸”è¿™ä¸ªè¶‹åŠ¿ä¼´éšç€ å¾®æœåŠ¡ çš„æ™®åŠå·²ç»ä¸å¯é€†è½¬ï¼Œåªè¦å‰ç«¯æ‰¿è®¤è‡ªå·±æ˜¯ç¼–ç¨‹ï¼Œè¿™ä¸ªè¶‹åŠ¿åŒæ ·ä¹Ÿé€ƒä¸è¿‡å»</p>
<p>å‰ç«¯è¿˜æ˜¯å•èŠ‚ç‚¹ï¼Œä½†æ˜¯æœªæ¥ä¼šæœ‰ç«¯åˆ°ç«¯</p>
<p>è¿™ä¸ªä¸œè¥¿ç°åœ¨çš„å¯ç”¨æ€§æ˜“ç”¨æ€§åœ¨ <code>React</code> è¯­å¢ƒä¸‹å·²ç»ç›¸å½“é«˜äº†ï¼Œæœªæ¥ä¹Ÿåªä¼šæ›´æœ‰ç”¨</p>
<p>å…¶ä»–çš„ä¸ç”¨è¯´ï¼Œå…‰æ•ˆç‡çš„æå‡ï¼Œå°±å¯ä»¥è®©å¼€å‘è€…å¤§å‘¼è¿‡ç˜¾äº†</p>
<p>åªæ˜¯ <code>React/Vue</code> è¿˜æœ‰å¾ˆå¤šå†å²é—®é¢˜éœ€è¦è§£å†³ï¼Œç­‰è¿™äº›é—®é¢˜è§£å†³äº†ï¼Œ <code>DDD</code> è‚¯å®šä¼šå¤§è·¨æ­¥å‘å‰çš„</p>
<h2 id="ç®¡é“æµéš¾åº¦ä¼šä¸ä¼šå¾ˆé«˜ï¼Ÿ"><a href="#ç®¡é“æµéš¾åº¦ä¼šä¸ä¼šå¾ˆé«˜ï¼Ÿ" class="headerlink" title="ç®¡é“æµéš¾åº¦ä¼šä¸ä¼šå¾ˆé«˜ï¼Ÿ"></a>ç®¡é“æµéš¾åº¦ä¼šä¸ä¼šå¾ˆé«˜ï¼Ÿ</h2><p>æ˜¯çš„ï¼Œä½œä¸ºæé™å‡½æ•°å¼å¼€å‘ï¼Œåœ¨ç»™ä½ æä¾›æ›´å¥½çš„ç±»å‹æ”¯æŒï¼Œå®¹æ˜“è°ƒè¯•æµ‹è¯•çš„æ”¯æŒåï¼Œé¦–å½“å…¶å†²çš„ï¼Œå°±æ˜¯çº¯ç²¹å‡½æ•°å¼çš„çˆ†ç‚¸éš¾åº¦</p>
<p>æ­£å¸¸æ¨¡å¼ä¸‹ï¼Œä½ æ˜¯éœ€è¦å…ˆåŒ–ç®€èŒƒç•´è¿ç®—å¼å†å†™ä»£ç çš„ï¼Œä¸è¿‡è¿™æ˜æ˜¾è€å­¦ç©¶äº†ï¼Œå“ˆå“ˆå“ˆ</p>
<p>ä½†æ˜¯ï¼Œ<code>React hooks</code> æœ‰éå¸¸æ´»è·ƒçš„ç¤¾åŒºï¼Œä½ ä¸éœ€è¦è‡ªå·±å®ç°å°è£…å¾ˆå¤šé€»è¾‘ï¼Œè¿™éƒ¨åˆ†å¯ä»¥ç›´æ¥æ±‚åŠ©äºç¤¾åŒºå®ç°</p>
<p>éœ€è¦ä½ å®ç°çš„ç®¡é“åŠŸèƒ½å¾ˆå°‘</p>
<p>ä¸åƒ <code>Angular</code> å†™ <code>rxjs</code> ï¼Œç®¡é“éœ€è¦è‡ªå·±æ ¹æ®ä¸€ç™¾å¤šä¸ªæ“ä½œå‡½æ•°é…ç½®ï¼Œè„‘åŠ›è´Ÿæ‹…å¤ªå¤§ï¼Œå¹¶ä¸”æ“ä½œå‡½æ•°éƒ½æ˜¯æŠ½è±¡çš„ï¼Œè°ƒåº¦æƒé™ç»™åˆ°ä½ ä¹‹åï¼Œå¤æ‚åº¦åˆåŠ äº†ä¸ª 3 æ¬¡æ–¹</p>
<p><code>React</code> çš„ç®¡é“å¤ç”¨ç¬¬ä¸‰æ–¹ï¼Œå¤§å¤šéƒ½æ˜¯ç›´æ¥é¢å‘ä¸šåŠ¡çš„ï¼Œæ¯”å¦‚ <code>swr</code> å’Œ <code>ahooks</code> ï¼Œè¦ç›´æ¥å¾ˆå¤š</p>
<p>æ‰€ä»¥åœ¨ï¼ŒçœŸæ­£éœ€è¦ä½ å†™çš„ç®¡é“é€»è¾‘å¹¶ä¸å¤šï¼Œè¿™ä¸€ç‚¹å€¼å¾—åº†å¹¸</p>
<p>ä½†æ˜¯ï¼Œç®¡é“é£æ ¼ä¹Ÿæ˜¯æœªæ¥è¶‹åŠ¿ï¼Œå¯ä»¥è¯´ç®¡é“å’Œé¢†åŸŸï¼Œåˆ†åˆ«æ˜¯å‡½æ•°å¼å’Œé¢å‘å¯¹è±¡æ¨æ¼”åˆ°æè‡´çš„ç»“æœï¼Œä¸¤è€…éƒ½æ˜¯æœ€ä½³èŒƒå¼ï¼Œä¸¤è€…éƒ½å¾—å­¦ä¹ </p>
<p>ä½ åªéœ€è¦å­¦æ€æƒ³æ–¹æ³•ï¼Œè€Œä¸”è¿™æ ·çš„æ€æƒ³æ–¹æ³•ï¼Œæ”¾è¯¸å››æµ·çš†å¯ï¼Œä»»ä½•ç¼–ç¨‹å¹³å°ï¼Œé™¤äº†ç‰¹åˆ«çº¯ç²¹çš„é‚£ç§ï¼šæ— ç±»å‹ <code>lisp</code> å’Œæ—  <code>lambdajava</code>ï¼ŒåŸºæœ¬ä¸Šè¿™äº›æ¦‚å¿µéƒ½æ˜¯æƒ³é€šä¸”èƒ½å¤Ÿäº¤æµçš„</p>
<p>ç®¡é“ä¹Ÿæ˜¯å­˜åœ¨äºç¼–ç¨‹çš„æ–¹æ–¹é¢é¢ï¼Œ<code>elasticSearch</code>ï¼Œ<code>mongo aggregation</code>ï¼Œ<code>node stream</code>ï¼Œ<code>graphQL</code>ï¼Œç­‰ç­‰ç­‰ç­‰â€¦</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="mailto:hqwuzhaoyi@foxmail.com">Wu Zhaoyi</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="https://hqwuzhaoyi.github.io/2021/01/14/react%20ddd/74.HookDDD/">https://hqwuzhaoyi.github.io/2021/01/14/react%20ddd/74.HookDDD/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="https://hqwuzhaoyi.github.io" target="_blank">Prajna's blog</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/React/">React</a><a class="post-meta__tags" href="/tags/DDD/">DDD</a></div><div class="post_share"><div class="social-share" data-image="https://wuzhaoyi-xyz.oss-cn-beijing.aliyuncs.com/git20210114112348.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2021/01/14/react%20ddd/81.ReactDDD%E9%85%8D%E5%90%88Typescript/"><img class="prev-cover" src="https://wuzhaoyi-xyz.oss-cn-beijing.aliyuncs.com/git20210114112348.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">React DDD é…åˆ Typescript</div></div></a></div><div class="next-post pull-right"><a href="/2020/12/17/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/73.grid/"><img class="next-cover" src="https://wuzhaoyi-xyz.oss-cn-beijing.aliyuncs.com/git20201217102303.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">Grid å¸ƒå±€</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> è¯„è®º</span></div></div><div class="comment-wrap"><div><div id="disqus_thread"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%A2%86%E5%9F%9F%E9%A9%B1%E5%8A%A8%EF%BC%8C%E5%90%84%E8%87%AA%E5%8F%AA%E7%AE%A1%E5%90%84%E8%87%AA%E7%9A%84%E6%A8%A1%E5%9D%97%EF%BC%8C%E9%A1%B6%E5%B1%82%E5%86%8D%E6%9D%A5%E8%BF%9B%E8%A1%8C%E7%BB%84%E8%A3%85%E5%92%8C%E5%88%86%E9%85%8D"><span class="toc-number">1.</span> <span class="toc-text">é¢†åŸŸé©±åŠ¨ï¼Œå„è‡ªåªç®¡å„è‡ªçš„æ¨¡å—ï¼Œé¡¶å±‚å†æ¥è¿›è¡Œç»„è£…å’Œåˆ†é…</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE%E7%9A%84%E5%BD%92%E8%AF%95%E5%9B%BE%EF%BC%8C%E9%80%BB%E8%BE%91%E7%9A%84%E5%BD%92%E9%80%BB%E8%BE%91"><span class="toc-number">1.1.</span> <span class="toc-text">è§†å›¾çš„å½’è¯•å›¾ï¼Œé€»è¾‘çš„å½’é€»è¾‘</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B7%A8%E7%BB%84%E4%BB%B6%E6%95%B0%E6%8D%AE%E4%BC%A0%E9%80%92%EF%BC%9F"><span class="toc-number">1.2.</span> <span class="toc-text">è·¨ç»„ä»¶æ•°æ®ä¼ é€’ï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%BD%E6%95%B0-DDD"><span class="toc-number">1.3.</span> <span class="toc-text">å‡½æ•° DDD</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%A4%8D%E7%94%A8"><span class="toc-number">1.4.</span> <span class="toc-text">ç”Ÿå‘½å‘¨æœŸå¤ç”¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%88%E7%8E%87"><span class="toc-number">1.5.</span> <span class="toc-text">æ•ˆç‡</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#React-Hooks-%E7%89%88%E6%9C%AC%E6%9E%B6%E6%9E%84"><span class="toc-number">2.</span> <span class="toc-text">React Hooks ç‰ˆæœ¬æ¶æ„</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%A7%E8%A1%8C-LIFT-%E5%8E%9F%E5%88%99"><span class="toc-number">2.1.</span> <span class="toc-text">æ‰§è¡Œ LIFT åŸåˆ™</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A9%E7%94%A8-SOA-%E5%AE%9E%E7%8E%B0%E8%B7%A8%E7%BB%84%E4%BB%B6%E9%80%BB%E8%BE%91%E5%A4%8D%E7%94%A8"><span class="toc-number">2.2.</span> <span class="toc-text">åˆ©ç”¨ SOA å®ç°è·¨ç»„ä»¶é€»è¾‘å¤ç”¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%80%E5%B0%8F%E6%9D%83%E9%99%90-%F0%9F%90%BE"><span class="toc-number">2.3.</span> <span class="toc-text">æœ€å°æƒé™ ğŸ¾</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JUST-USE-REACT-HOOKS"><span class="toc-number">2.4.</span> <span class="toc-text">JUST USE REACT HOOKS</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E5%8F%AA%E5%AD%98%E5%9C%A8"><span class="toc-number">2.4.1.</span> <span class="toc-text">é¡¹ç›®åªå­˜åœ¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A5%E4%B8%8B%E4%B8%BA%E7%BB%86%E5%8C%96%E9%98%90%E8%BF%B0%E4%B8%BA%E4%BD%95%E5%A6%82%E6%AD%A4%E8%AE%BE%E8%AE%A1%E7%9A%84%E5%87%BA%E5%8F%91%E7%82%B9"><span class="toc-number">2.4.2.</span> <span class="toc-text">ä»¥ä¸‹ä¸ºç»†åŒ–é˜è¿°ä¸ºä½•å¦‚æ­¤è®¾è®¡çš„å‡ºå‘ç‚¹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BB%BA%E8%AE%AE%E7%9A%84%E6%8A%80%E6%9C%AF%E6%A0%88%E6%90%AD%E9%85%8D"><span class="toc-number">2.4.3.</span> <span class="toc-text">å»ºè®®çš„æŠ€æœ¯æ ˆæ­é…</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Hook-%E4%BD%BF%E4%BD%A0%E5%9C%A8%E6%97%A0%E9%9C%80%E4%BF%AE%E6%94%B9%E7%BB%84%E4%BB%B6%E7%BB%93%E6%9E%84%E7%9A%84%E6%83%85%E5%86%B5%E4%B8%8B%E5%A4%8D%E7%94%A8%E7%8A%B6%E6%80%81%E9%80%BB%E8%BE%91"><span class="toc-number">3.</span> <span class="toc-text">Hook ä½¿ä½ åœ¨æ— éœ€ä¿®æ”¹ç»„ä»¶ç»“æ„çš„æƒ…å†µä¸‹å¤ç”¨çŠ¶æ€é€»è¾‘</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#React-SOA"><span class="toc-number">4.</span> <span class="toc-text">React SOA</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E7%9A%84%E6%9C%8D%E5%8A%A1"><span class="toc-number">4.1.</span> <span class="toc-text">åŸºæœ¬çš„æœåŠ¡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%84%E5%90%88%E6%9C%8D%E5%8A%A1"><span class="toc-number">4.2.</span> <span class="toc-text">ç»„åˆæœåŠ¡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%A8%E5%85%A5%E5%8D%95%E4%BE%8B%E6%9C%8D%E5%8A%A1"><span class="toc-number">4.3.</span> <span class="toc-text">æ³¨å…¥å•ä¾‹æœåŠ¡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%95%E4%BE%8B%E6%9C%8D%E5%8A%A1%EF%BC%8C%E8%A7%A3%E5%86%B3%E6%B7%B1%E5%B1%82%E5%B5%8C%E5%A5%97%E5%AF%B9%E8%B1%A1%E9%97%AE%E9%A2%98"><span class="toc-number">4.4.</span> <span class="toc-text">å•ä¾‹æœåŠ¡ï¼Œè§£å†³æ·±å±‚åµŒå¥—å¯¹è±¡é—®é¢˜</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E8%8E%B7%E5%8F%96%E6%97%B6%E7%9A%84%E7%B1%BB%E5%9E%8B%E9%97%AE%E9%A2%98"><span class="toc-number">4.5.</span> <span class="toc-text">æœåŠ¡è·å–æ—¶çš„ç±»å‹é—®é¢˜</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B6%E5%B1%82%E6%B3%A8%E5%85%A5%E6%9C%8D%E5%8A%A1"><span class="toc-number">4.6.</span> <span class="toc-text">é¡¶å±‚æ³¨å…¥æœåŠ¡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%AF%E9%80%89%E6%9C%8D%E5%8A%A1"><span class="toc-number">4.7.</span> <span class="toc-text">å¯é€‰æœåŠ¡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%B7%E5%BC%8F%E5%B0%81%E8%A3%85"><span class="toc-number">4.8.</span> <span class="toc-text">æ ·å¼å°è£…</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BB%A7%E7%BB%AD%E5%88%86%E6%9E%90-SOA"><span class="toc-number">5.</span> <span class="toc-text">ç»§ç»­åˆ†æ SOA</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#useTableHandlerService"><span class="toc-number">5.1.</span> <span class="toc-text">useTableHandlerService</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E9%97%B4%E9%80%9A%E8%AE%AF%E7%BB%93%E6%9E%84"><span class="toc-number">6.</span> <span class="toc-text">æœåŠ¡é—´é€šè®¯ç»“æ„</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E5%8D%95%E4%B8%80%E6%9C%8D%E5%8A%A1%EF%BC%88%E7%B1%BB-Redux-%E6%96%B9%E6%A1%88%EF%BC%89"><span class="toc-number">6.1.</span> <span class="toc-text">å…¨å±€å•ä¸€æœåŠ¡ï¼ˆç±» Redux æ–¹æ¡ˆï¼‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%AD%E5%8F%B0-%E5%85%B6%E4%BB%96%E6%9C%8D%E5%8A%A1%EF%BC%88%E5%8F%8C%E5%B1%82%E7%BB%93%E6%9E%84%EF%BC%89"><span class="toc-number">6.2.</span> <span class="toc-text">ä¸­å°+å…¶ä»–æœåŠ¡ï¼ˆåŒå±‚ç»“æ„ï¼‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%91%E5%BD%A2%E7%BB%93%E6%9E%84%E6%A8%A1%E5%9D%97"><span class="toc-number">6.3.</span> <span class="toc-text">æ ‘å½¢ç»“æ„æ¨¡å—</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BC%96%E7%A8%8B%E8%8C%83%E5%BC%8F"><span class="toc-number">7.</span> <span class="toc-text">ç¼–ç¨‹èŒƒå¼</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9E%81%E9%99%90%E7%9A%84%E5%87%BD%E6%95%B0%E5%BC%8F%EF%BC%8C%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1"><span class="toc-number">7.1.</span> <span class="toc-text">æé™çš„å‡½æ•°å¼ï¼Œé¢å‘å¯¹è±¡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A2%86%E5%9F%9F%E6%A8%A1%E5%9D%97"><span class="toc-number">7.2.</span> <span class="toc-text">é¢†åŸŸæ¨¡å—</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#React-%E6%8F%90%E5%80%A1%E5%87%BD%E6%95%B0%E5%BC%8F"><span class="toc-number">7.3.</span> <span class="toc-text">React æå€¡å‡½æ•°å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Redux"><span class="toc-number">7.3.1.</span> <span class="toc-text">Redux</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%AA%E6%9C%89-%E5%87%BD%E6%95%B0-%E7%9A%84%E5%B0%81%E8%A3%85%E6%80%A7%E6%89%8D%E5%8F%97%E5%89%AF%E4%BD%9C%E7%94%A8%E9%99%90%E5%88%B6"><span class="toc-number">7.3.2.</span> <span class="toc-text">åªæœ‰ å‡½æ•° çš„å°è£…æ€§æ‰å—å‰¯ä½œç”¨é™åˆ¶</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Hooks%EF%BC%8CComposition%EF%BC%8CngModule"><span class="toc-number">7.4.</span> <span class="toc-text">Hooksï¼ŒCompositionï¼ŒngModule</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%AA%E6%9C%89%E9%9B%86%E6%88%90%E5%BA%A6%E4%B8%8D%E9%AB%98%E7%9A%84%E7%B3%BB%E7%BB%9F%EF%BC%8C%E6%89%8D%E9%9C%80%E8%A6%81%E4%B8%AD%E4%BB%8B%E6%A8%A1%E5%BC%8F%EF%BC%8C%E6%89%8D%E9%9C%80%E8%A6%81-MVC"><span class="toc-number">7.5.</span> <span class="toc-text">åªæœ‰é›†æˆåº¦ä¸é«˜çš„ç³»ç»Ÿï¼Œæ‰éœ€è¦ä¸­ä»‹æ¨¡å¼ï¼Œæ‰éœ€è¦ MVC</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%99%85%E4%B8%8A%E6%98%AF%E8%A2%AB%E5%BF%BD%E6%82%A0%E4%BA%86"><span class="toc-number">7.6.</span> <span class="toc-text">å®é™…ä¸Šæ˜¯è¢«å¿½æ‚ äº†</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AE%A1%E9%81%93%E9%A3%8E%E6%A0%BC%E7%9A%84%E5%87%BD%E6%95%B0%E5%BC%8F%EF%BC%88unidirectional-network-%E5%8D%95%E9%A1%B9%E6%95%B0%E6%8D%AE%E6%B5%81%EF%BC%89"><span class="toc-number">8.</span> <span class="toc-text">ç®¡é“é£æ ¼çš„å‡½æ•°å¼ï¼ˆunidirectional network å•é¡¹æ•°æ®æµï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B0%83%E5%BA%A6"><span class="toc-number">8.1.</span> <span class="toc-text">è°ƒåº¦</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Hooks-api-%E5%B0%B1%E6%98%AF-React-%E7%9A%84%E8%B0%83%E5%BA%A6%E6%8E%A7%E5%88%B6%E6%9D%83"><span class="toc-number">8.2.</span> <span class="toc-text">Hooks api å°±æ˜¯ React çš„è°ƒåº¦æ§åˆ¶æƒ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#useState-%E6%95%B4%E4%B8%AA%E5%8D%95%E9%A1%B9%E6%95%B0%E6%8D%AE%E6%B5%81%E7%9A%84%E8%B0%83%E5%BA%A6%E5%8F%91%E8%B5%B7%E8%80%85"><span class="toc-number">8.2.1.</span> <span class="toc-text">useState æ•´ä¸ªå•é¡¹æ•°æ®æµçš„è°ƒåº¦å‘èµ·è€…</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#useEffect-%E6%95%B4%E4%B8%AA%E5%8D%95%E9%A1%B9%E6%95%B0%E6%8D%AE%E6%B5%81%E8%B0%83%E5%BA%A6%E7%9A%84%E6%8C%87%E6%8C%A5%E8%80%85"><span class="toc-number">8.2.2.</span> <span class="toc-text">useEffect æ•´ä¸ªå•é¡¹æ•°æ®æµè°ƒåº¦çš„æŒ‡æŒ¥è€…</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#useMemo-%E6%95%B4%E4%B8%AA%E5%8D%95%E9%A1%B9%E6%95%B0%E6%8D%AE%E6%B5%81%E8%B0%83%E5%BA%A6%E7%9A%84%E6%8E%A7%E5%88%B6%E8%80%85"><span class="toc-number">8.2.3.</span> <span class="toc-text">useMemo æ•´ä¸ªå•é¡¹æ•°æ®æµè°ƒåº¦çš„æ§åˆ¶è€…</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%80%E5%90%8E"><span class="toc-number">8.2.4.</span> <span class="toc-text">æœ€å</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E6%98%8E%E6%98%8E%E5%B0%B1%E5%8F%AA%E6%98%AF%E9%80%BB%E8%BE%91%E5%92%8C%E7%8A%B6%E6%80%81%EF%BC%88%E6%9C%8D%E5%8A%A1%EF%BC%89%E8%B0%83%E9%85%8D%E7%9A%84%E5%9C%B0%E6%96%B9%EF%BC%8C%E5%AE%83%E5%8E%8B%E6%A0%B9%E5%B0%B1%E4%B8%8D%E5%BA%94%E8%AF%A5%E6%9C%89%E9%80%BB%E8%BE%91"><span class="toc-number">9.</span> <span class="toc-text">ç»„ä»¶æ˜æ˜å°±åªæ˜¯é€»è¾‘å’ŒçŠ¶æ€ï¼ˆæœåŠ¡ï¼‰è°ƒé…çš„åœ°æ–¹ï¼Œå®ƒå‹æ ¹å°±ä¸åº”è¯¥æœ‰é€»è¾‘</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#React-DDD-%E4%B8%8B%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86%E7%B1%BB%E5%9E%8B%E9%97%AE%E9%A2%98%EF%BC%9F"><span class="toc-number">10.</span> <span class="toc-text">React DDD ä¸‹å¦‚ä½•å¤„ç†ç±»å‹é—®é¢˜ï¼Ÿ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%9B%E5%9E%8B%E7%BA%A6%E6%9D%9F-InjectionToken"><span class="toc-number">10.1.</span> <span class="toc-text">æ³›å‹çº¦æŸ InjectionToken</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%99%9A%E6%8B%9F%E6%95%B0%E6%8D%AE%E6%B3%9B%E5%9E%8B%E7%BA%A6%E6%9D%9F"><span class="toc-number">10.2.</span> <span class="toc-text">è™šæ‹Ÿæ•°æ®æ³›å‹çº¦æŸ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B1%BB%E6%9C%8D%E5%8A%A1"><span class="toc-number">10.3.</span> <span class="toc-text">ç±»æœåŠ¡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E7%B1%BB"><span class="toc-number">10.4.</span> <span class="toc-text">å®ç°ä¸€ä¸ªç±»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E8%BF%99%E4%B8%AA%E7%B1%BB"><span class="toc-number">10.5.</span> <span class="toc-text">ä½¿ç”¨è¿™ä¸ªç±»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%8C%E6%97%B6%EF%BC%8C%E9%9C%80%E8%A6%81%E4%BF%9D%E8%AF%81%E5%9C%A8-constructor-%E4%B8%AD%E4%BD%BF%E7%94%A8-hooks"><span class="toc-number">10.6.</span> <span class="toc-text">åŒæ—¶ï¼Œéœ€è¦ä¿è¯åœ¨ constructor ä¸­ä½¿ç”¨ hooks</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#React-DDD-%E4%B8%8B%E7%9A%84%E4%B8%80%E4%BA%9B%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98-FAQ"><span class="toc-number">11.</span> <span class="toc-text">React DDD ä¸‹çš„ä¸€äº›å¸¸è§é—®é¢˜ FAQ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#React-DDD-%E4%B8%8B%EF%BC%8Cclass-%E9%A3%8E%E6%A0%BC%E7%BB%84%E4%BB%B6%E8%83%BD%E7%94%A8%E4%B9%88%EF%BC%9F"><span class="toc-number">11.1.</span> <span class="toc-text">React DDD ä¸‹ï¼Œclass é£æ ¼ç»„ä»¶èƒ½ç”¨ä¹ˆï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#React-DDD-%E6%98%AF%E7%9B%B8%E6%AF%94-%E4%B9%8B%E5%89%8D%E7%9A%84-%E7%B1%BB-redux-%E5%88%86%E5%B1%82%E6%98%AF%E6%9B%B4%E7%AE%80%E5%8D%95%E8%BF%98%E6%98%AF%E6%9B%B4%E9%9A%BE%EF%BC%9F"><span class="toc-number">11.2.</span> <span class="toc-text">React DDD æ˜¯ç›¸æ¯” ä¹‹å‰çš„ ç±» redux åˆ†å±‚æ˜¯æ›´ç®€å•è¿˜æ˜¯æ›´éš¾ï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#React-DDD-%E9%9C%80%E8%A6%81%E7%94%A8%E5%88%B0%E4%BB%80%E4%B9%88%E5%B7%A5%E5%85%B7%E4%B9%88%EF%BC%9F"><span class="toc-number">11.3.</span> <span class="toc-text">React DDD éœ€è¦ç”¨åˆ°ä»€ä¹ˆå·¥å…·ä¹ˆï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#React-DDD-%E6%80%A7%E8%83%BD%E4%BC%9A%E6%9C%89%E9%97%AE%E9%A2%98%E4%B9%88%EF%BC%9F"><span class="toc-number">11.4.</span> <span class="toc-text">React DDD æ€§èƒ½ä¼šæœ‰é—®é¢˜ä¹ˆï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#React-DDD-%E9%80%82%E5%90%88%E5%A4%A7%E4%BD%93%E9%87%8F%E9%A1%B9%E7%9B%AE%E4%B9%88%EF%BC%9F"><span class="toc-number">11.5.</span> <span class="toc-text">React DDD é€‚åˆå¤§ä½“é‡é¡¹ç›®ä¹ˆï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#React-DDD-%E6%95%88%E7%8E%87%E9%AB%98%E4%B9%88%EF%BC%9F"><span class="toc-number">11.6.</span> <span class="toc-text">React DDD æ•ˆç‡é«˜ä¹ˆï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Redux-%E4%B9%8B%E7%B1%BB%E7%9A%84%E5%B7%A5%E5%85%B7%E8%BF%98%E6%9C%89%E6%84%8F%E4%B9%89%E4%B9%88%EF%BC%9F"><span class="toc-number">11.7.</span> <span class="toc-text">Redux ä¹‹ç±»çš„å·¥å…·è¿˜æœ‰æ„ä¹‰ä¹ˆï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%8E%B0%E6%9C%89%E9%A1%B9%E7%9B%AE%E8%83%BD%E7%9B%B4%E6%8E%A5%E6%94%B9%E6%88%90-React-DDD-%E4%B9%88%EF%BC%9F"><span class="toc-number">11.8.</span> <span class="toc-text">ç°æœ‰é¡¹ç›®èƒ½ç›´æ¥æ”¹æˆ React DDD ä¹ˆï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#React-DDD-%E4%B8%8B%EF%BC%8C%E5%BA%94%E8%AF%A5%E6%80%8E%E4%B9%88%E5%88%92%E5%88%86%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84%EF%BC%9F"><span class="toc-number">11.9.</span> <span class="toc-text">React DDD ä¸‹ï¼Œåº”è¯¥æ€ä¹ˆåˆ’åˆ†æ–‡ä»¶ç»“æ„ï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%80%E4%BB%A5%E5%BE%AE%E5%89%8D%E7%AB%AF%E5%8F%AF%E4%BB%A5%E7%94%B1-React-DDD-%E5%AE%9E%E7%8E%B0%E6%98%AF%E4%B9%88%EF%BC%9F"><span class="toc-number">11.10.</span> <span class="toc-text">æ‰€ä»¥å¾®å‰ç«¯å¯ä»¥ç”± React DDD å®ç°æ˜¯ä¹ˆï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#React-DDD-%E5%92%8C-Angular-%E7%9A%84%E6%9E%B6%E6%9E%84%E5%A5%BD%E5%83%8F%EF%BC%8C%E4%B8%BA%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">11.11.</span> <span class="toc-text">React DDD å’Œ Angular çš„æ¶æ„å¥½åƒï¼Œä¸ºä»€ä¹ˆï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#React-DDD-%E4%BC%9A%E6%98%AF%E6%9C%AA%E6%9D%A5%E8%B6%8B%E5%8A%BF%E4%B9%88%EF%BC%9F"><span class="toc-number">11.12.</span> <span class="toc-text">React DDD ä¼šæ˜¯æœªæ¥è¶‹åŠ¿ä¹ˆï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%A1%E9%81%93%E6%B5%81%E9%9A%BE%E5%BA%A6%E4%BC%9A%E4%B8%8D%E4%BC%9A%E5%BE%88%E9%AB%98%EF%BC%9F"><span class="toc-number">11.13.</span> <span class="toc-text">ç®¡é“æµéš¾åº¦ä¼šä¸ä¼šå¾ˆé«˜ï¼Ÿ</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2022 By Wu Zhaoyi</div><div class="framework-info"><span>æ¡†æ¶ </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="ç›´è¾¾è¯„è®º"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="fas fa-arrow-up"></i></button></div></div><div id="algolia-search"><div class="search-dialog"><div class="search-dialog__title" id="algolia-search-title">Algolia</div><div id="algolia-input-panel"><div id="algolia-search-input"></div></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-stats"></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/algolia.js"></script><div class="js-pjax"><script>function loadDisqus () {
  var disqus_config = function () {
    this.page.url = 'https://hqwuzhaoyi.github.io/2021/01/14/react%20ddd/74.HookDDD/'
    this.page.identifier = '2021/01/14/react ddd/74.HookDDD/'
    this.page.title = 'React DDD'
  };

  window.disqusReset = () => {
    DISQUS.reset({
      reload: true,
      config: disqus_config
    })
  }

  if (window.DISQUS) disqusReset()
  else {
    (function() { 
      var d = document, s = d.createElement('script');
      s.src = 'https://wuzhaoyi.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  }
}

if ('Disqus' === 'Disqus' || !false) {
  if (false) btf.loadComment(document.getElementById('disqus_thread'), loadDisqus)
  else loadDisqus()
} else {
  function loadOtherComment () {
    loadDisqus()
  }
}
</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="true"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>